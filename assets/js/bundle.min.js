!function r(i,a,u){function o(e,t){if(!a[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=a[e]={exports:{}},i[e][0].call(n.exports,function(t){return o(i[e][1][t]||t)},n,n.exports,r,i,a,u)}return a[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)o(u[t]);return o}({1:[function(t,e,n){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicVariable=void 0,n.getCurrentComputeTime=function getCurrentComputeTime(){return r},n.updateDynamicVariables=function updateDynamicVariables(){r++};var r=0;var i=function(){function DynamicVariable(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DynamicVariable),this.value=t,this.time=-1}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(DynamicVariable,[{key:"update",value:function update(t){return this.time==r||(this.value=t(),this.time=r),this.value}}]),DynamicVariable}();n.DynamicVariable=i},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Edge=void 0;var c=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./d3.js")),s=t("./constants.js"),r=t("./DynamicVariable.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],c=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){s=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(t,e)||function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}(t,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}var i=function casteljau1d(t,e){var n=[(1-e)*t[0]+e*t[1],(1-e)*t[1]+e*t[2],(1-e)*t[2]+e*t[3]],r=[(1-e)*n[0]+e*n[1],(1-e)*n[1]+e*n[2]],e=[(1-e)*r[0]+e*r[1]];return[[t[0],n[0],r[0],e[0]],[e[0],r[1],n[2],t[3]]]},o=function casteljau2d(t,e){var n=i(t.map(function(t){return t[0]}),e),t=i(t.map(function(t){return t[1]}),e);return[[[n[0][0],t[0][0]],[n[0][1],t[0][1]],[n[0][2],t[0][2]],[n[0][3],t[0][3]]],[[n[1][0],t[1][0]],[n[1][1],t[1][1]],[n[1][2],t[1][2]],[n[1][3],t[1][3]]]]},t=function(){function Edge(t,e,n){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Edge),this.from=t,this.to=e,this.weight=n,this.dloss=0,this.dweight=new r.DynamicVariable,this.adjustable=!0,this.multvis0=1/3,this.multvis1=2/3}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(Edge,[{key:"bezier",value:function bezier(){var t=this,e=t.from.x+("InputNode"==t.from.constructor.name?s.noderadius:0),n=t.to.x-("OutputNode"==t.to.constructor.name?s.noderadius:0);return[[e,t.from.y],[(e+n)/2,t.from.y],[(e+n)/2,t.to.y-s.unit*t.offset],[n,t.to.y-s.unit*t.offset]]}},{key:"generateActivatedCubicBezierSplines",value:function generateActivatedCubicBezierSplines(t){var e=this.bezier(),e=o(e,this.multvis0),n=o(e[1],(this.multvis1-this.multvis0)/(1-this.multvis0));return[e[0],n[0],n[1]]}},{key:"generateActivatedPath",value:function generateActivatedPath(t,e,n){var r=t*this.weight,i=_slicedToArray(this.generateActivatedCubicBezierSplines(t),3),o=i[0],a=i[1],i=i[2],u=c.path();return u.moveTo(o[0][0],o[0][1]-s.unit*t),u.bezierCurveTo(o[1][0],o[1][1]-s.unit*t,o[2][0],o[2][1]-s.unit*t,o[3][0],o[3][1]-s.unit*t),u.bezierCurveTo(a[1][0],a[1][1]-s.unit*t,a[2][0],a[2][1]-s.unit*r,a[3][0],a[3][1]-s.unit*r),u.bezierCurveTo(i[1][0],i[1][1]-s.unit*r,i[2][0],i[2][1]-s.unit*r,i[3][0],i[3][1]-s.unit*r),u}},{key:"generateActivatedPathMiddle",value:function generateActivatedPathMiddle(t){var e=t*this.weight,n=this.generateActivatedCubicBezierSplines(t)[1],r=c.path();return r.moveTo(n[0][0],n[0][1]-s.unit*t),r.bezierCurveTo(n[1][0],n[1][1]-s.unit*t,n[2][0],n[2][1]-s.unit*e,n[3][0],n[3][1]-s.unit*e),r}},{key:"normalizedParameterPosition",value:function normalizedParameterPosition(){return[(this.from.x+this.to.x)/2,this.firstHalfBezier()[3][1]-s.unit*this.weight]}},{key:"parameterPosition",value:function parameterPosition(){var t=this.from.getActivation(),e=(Math.abs(t)<s.parameterths&&(t=(this.from.getActivation()<0?-1:1)*s.parameterths),this.generateActivatedCubicBezierSplines(t)[1]),t=t*this.weight;return[e[3][0],e[3][1]-s.unit*t]}},{key:"getdWeight",value:function getdWeight(){var t=this;return this.dweight.update(function(){return t.to.active()?t.from.getActivation()*t.to.getdActivation():0})}},{key:"backup",value:function backup(){this.backupWeight=this.weight}},{key:"restore",value:function restore(){this.weight=this.backupWeight}}]),Edge}();n.Edge=t},{"./DynamicVariable.js":1,"./constants.js":10,"./d3.js":11}],3:[function(t,e,n){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.InputNode=void 0;var r=t("./Node.js"),i=t("./DynamicVariable.js");function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(n){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function _createSuperInternal(){var t,e=_getPrototypeOf(n);return function _possibleConstructorReturn(t,e){{if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function _assertThisInitialized(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(InputNode,r.Node);var n=_createSuper(InputNode);function InputNode(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){return 0};return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,InputNode),(t=n.call(this)).getActivation=e,t.adjustable=!1,t.allownegative=!0,t}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(InputNode,[{key:"setUserParameter",value:function setUserParameter(t){var e=this;this.hasOwnProperty("userparamter")||(this.getActivation=function(){return e.userparamter}),this.allownegative||(t=Math.max(0,t)),this.userparamter=t,(0,i.updateDynamicVariables)()}},{key:"temporarilyReplaceGetActivation",value:function temporarilyReplaceGetActivation(t){this.getActivationBackup=this.getActivation,this.getActivation=t,(0,i.updateDynamicVariables)()}},{key:"restoreGetActivation",value:function restoreGetActivation(){this.getActivation=this.getActivationBackup,(0,i.updateDynamicVariables)()}},{key:"pauseInput",value:function pauseInput(){this.setUserParameter(this.getActivation())}}]),InputNode}();n.InputNode=t},{"./DynamicVariable.js":1,"./Node.js":8}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Level=void 0;var a=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),r=t("./NetworkVisualization.js");t("./constants.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}t=function(){function Level(t,e,n,r,i,o,a){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Level),this.title=t||"",this.network=e,this.trainXs=r,this.trainYs=o,this.xlabels=n,this.ylabels=i,this.description=a||"",this.gradientdescentactive=!1,this.network.backup()}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(Level,[{key:"show",value:function show(){var t=this,e=(this.createUI(),this.t0=Date.now(),this.nv=new r.NetworkVisualization(this.network,function(){return t.animatecallback()}));e.animate(),e.addInteraction(),e.resizeSVG(120),this.onenter&&this.onenter()}},{key:"hide",value:function hide(){this.nv&&this.nv.stop(),this.table&&this.table.html(""),this.onleave&&this.onleave(),a.select("#levelinfo").html("")}},{key:"createUI",value:function createUI(){var t=this;document.querySelector(".helper").classList.remove("visible"),document.querySelector(".mission").classList.add("visible"),document.querySelector("#helpmebutton").classList.remove("selected"),document.querySelector("#missionbutton").classList.add("selected"),a.select("#leveltitle").text(this.title),a.select("#description").text(this.description),this.createTable(),document.querySelector(".reset").onclick=function(){t.network.restore()},document.querySelector(".single-step").onclick=function(){t.gradientdescentactive=!1,t.network.gradientstep(t.trainXs,t.trainYs,.01)},document.querySelector(".pause-resume").onclick=function(){t.gradientdescentactive=!t.gradientdescentactive}}},{key:"createTable",value:function createTable(){var n=this;this.columns=this.xlabels.concat(this.ylabels).concat(this.ylabels.map(function(t){return"predicted "+t})),this.table=a.select("#trainingtable"),this.thead=this.table.append("thead"),this.tbody=this.table.append("tbody"),this.thead.append("tr").selectAll("th").data(this.columns).enter().append("th").style("background-color",function(t,e){return e>=n.xlabels.length?"orange":"yellow"}).text(function(t){return t})}},{key:"animatecallback",value:function animatecallback(){if(this.animatestep&&this.animatestep(),this.gradientdescentactive)for(var t=0;t<10;t++)this.network.gradientstep(this.trainXs,this.trainYs,.001);this.updateUI()}},{key:"updateUI",value:function updateUI(){this.gradientdescentactive&&a.select("#gradientanimating")?(document.querySelector(".pause-resume").classList.add("pause"),document.querySelector(".pause-resume").classList.remove("resume")):(document.querySelector(".pause-resume").classList.remove("pause"),document.querySelector(".pause-resume").classList.add("resume")),this.updatetable();var t=this.network.loss(this.trainXs,this.trainYs);a.select("#totalerror").text(t.toFixed(2)),a.select("#nextbutton").classed("selected",t<.02).classed("successful",t<.02),a.select(".tabbed").classed("successful",t<.02),a.select("#totalerrorterm").text(this.rows.map(function(t){return"(".concat(t[t.length-1]," - ").concat(t[t.length-2],")²")}).join(" + ")),document.querySelector("#showgradient").checked?this.network.gradientLoss(this.trainXs,this.trainYs):this.network.resetdloss()}},{key:"updatetable",value:function updatetable(){var t,i=this,e=this.tbody,n=[];for(t in this.rows=n,this.trainXs){var r=this.trainXs[t].map(function(t,e){return i.network.inputnodes[e].format(t)}).concat(this.trainYs[t].map(function(t,e){return i.network.outputnodes[e].format(t)})).concat(this.network.predict(this.trainXs[t]).map(function(t,e){return i.network.outputnodes[e].format(t)}));r.error=this.network.sqerror(this.trainXs[t],this.trainYs[t]),n.push(r)}var o=a.scaleSequential().domain([1,0]).interpolator(a.interpolateRdYlGn);e.selectAll("tr").data(n).join("tr").on("click",function(t,e){for(var n in i.network.inputnodes)i.network.inputnodes[n].setUserParameter(i.trainXs[e][n]);for(var r in i.network.outputnodes)i.network.outputnodes[r].target=i.trainYs[e][r]}).selectAll("td").data(function(e){return e.map(function(t){return{value:t,error:e.error}})}).join("td").text(function(t){return t.value}).style("background-color",function(t,e){return e>=i.trainXs[0].length+i.trainYs[0].length?o(t.error):"white"})}}]),Level}();n.Level=t},{"./NetworkVisualization.js":7,"./constants.js":10,d3:"d3"}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LevelController=void 0;var r=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),i=t("./levels.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}n.LevelController=function(){function LevelController(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LevelController),this.createEvents(),this.levels=[function(){return new i.TutorialLevelA},function(){return new i.SumLevel},function(){return new i.AvgLevel},function(){return new i.TutorialLevelB},function(){return new i.TutorialLevelC},function(){return new i.FahrenheitLevel},function(){return new i.AndLevel},function(){return new i.MaxLevel},function(){return new i.WeatherLevel},function(){return new i.XorLevel}],this.NUMBER_OF_LEVELS=this.levels.length,this.updateFooter(0)}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(LevelController,[{key:"updateFooter",value:function updateFooter(n){r.select("#navcircles").selectAll("a").data(this.levels).join("a").attr("href",function(t,e){return"index.html#".concat(e+1)}).classed("circ",!0).classed("selected",function(t,e){return e==n}),r.select("#backbutton").style("visibility",0==n?"hidden":"visible"),r.select("#nextbutton").style("visibility",n==this.NUMBER_OF_LEVELS-1?"hidden":"visible")}},{key:"createEvents",value:function createEvents(){var e=this;window.addEventListener("DOMContentLoaded",function(t){document.querySelector("#backbutton").onclick=function(){return e.goBack()},document.querySelector("#nextbutton").onclick=function(){return e.goNext()},e.showLevelByURL()}),window.onhashchange=function(t){e.showLevelByURL()},window.addEventListener("keydown",function(t){t.key;switch(t.key){case"ArrowLeft":e.goBack();break;case"ArrowRight":e.goNext()}})}},{key:"goNext",value:function goNext(){this.setLevel((this.getCurrentLevel()+1)%this.NUMBER_OF_LEVELS)}},{key:"goBack",value:function goBack(){this.setLevel((this.getCurrentLevel()-1+this.NUMBER_OF_LEVELS)%this.NUMBER_OF_LEVELS)}},{key:"getCurrentLevel",value:function getCurrentLevel(){var t=window.location.hash.substring(1);return""===t?t=1:t|=0,t-1}},{key:"setLevel",value:function setLevel(t){window.location.hash=t+1}},{key:"showLevelByURL",value:function showLevelByURL(){this.showLevel(this.getCurrentLevel())}},{key:"showLevel",value:function showLevel(t){this.updateFooter(t),this.clevel&&this.clevel.hide(),this.clevel=this.levels[t](),this.clevel.show()}}]),LevelController}()},{"./levels.js":12,d3:"d3"}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Network=void 0;var m=t("./DynamicVariable.js");function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}t=function(){function Network(t,e,n){for(var r in!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Network),this.nodes=t,this.inputnodes=e,this.outputnodes=n,this.edges=[],t)for(var i in t[r].outedges)this.edges.push(t[r].outedges[i])}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(Network,[{key:"predict",value:function predict(e){var t,n=this,r=(this.inputnodes.length!=e.length&&console.error("Input does not fit input size of Network"),function _loop(t){n.inputnodes[t].temporarilyReplaceGetActivation(function(){return e[t]})});for(t in this.inputnodes)r(t);(0,m.updateDynamicVariables)();var i,o=this.outputnodes.map(function(t){return t.getActivation()});for(i in this.inputnodes)this.inputnodes[i].restoreGetActivation();return o}},{key:"sqerror",value:function sqerror(t,e){var n,r=this.predict(t),i=0;for(n in r)i+=(r[n]-e[n])*(r[n]-e[n]);return i}},{key:"loss",value:function loss(t,e){var n,r=0;for(n in t)r+=this.sqerror(t[n],e[n]);return r}},{key:"resetdloss",value:function resetdloss(){for(var t in this.nodes)this.nodes[t].dloss=0;for(var e in this.edges)this.edges[e].dloss=0}},{key:"gradientLoss",value:function gradientLoss(h,d){var p,y=this,v=0,t=(this.resetdloss(),function _loop2(){var t,e=h[p],n=d[p],r=function _loop3(t){y.inputnodes[t].temporarilyReplaceGetActivation(function(){return e[t]})};for(t in y.inputnodes)r(t);(0,m.updateDynamicVariables)();var i,o=y.outputnodes.map(function(t){return t.getActivation()});for(i in o)v+=(o[i]-n[i])*(o[i]-n[i]);var a,u,c,s,l,f=function _loop4(t){y.outputnodes[t].temporarilyReplaceGetdActivation(function(){return 2*(o[t]-n[t])})};for(a in y.outputnodes)f(a);for(u in(0,m.updateDynamicVariables)(),y.nodes)y.nodes[u].dloss+=y.nodes[u].getdBias();for(c in y.edges)y.edges[c].dloss+=y.edges[c].getdWeight();for(s in y.inputnodes)y.inputnodes[s].restoreGetActivation();for(l in y.outputnodes)y.outputnodes[l].restoreGetdActivation()});for(p in h)t();return v}},{key:"gradientstep",value:function gradientstep(t,e,n){for(var r in this.gradientLoss(t,e),this.nodes)"Node"==this.nodes[r].constructor.name&&this.nodes[r].adjustable&&(this.nodes[r].bias-=n*this.nodes[r].dloss);for(var i in this.edges)this.edges[i].adjustable&&(this.edges[i].weight-=n*this.edges[i].dloss);(0,m.updateDynamicVariables)()}},{key:"pauseAnimatedInput",value:function pauseAnimatedInput(){for(var t in this.inputnodes)this.inputnodes[t].pauseInput()}},{key:"backup",value:function backup(){for(var t in this.nodes)this.nodes[t].backup();for(var e in this.edges)this.edges[e].backup()}},{key:"restore",value:function restore(){for(var t in this.nodes)this.nodes[t].restore();for(var e in this.edges)this.edges[e].restore()}}]),Network}();n.Network=t},{"./DynamicVariable.js":1}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkVisualization=void 0;var c=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./d3.js")),s=t("./constants.js"),l=t("./DynamicVariable.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}var f=function clamp(t,e,n){return Math.min(n,Math.max(e,t))},t=function(){function NetworkVisualization(t,e){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NetworkVisualization);var n,r=this.nodes=t.nodes;for(n in this.network=t,this.inputnodes=t.inputnodes,this.outputnodes=t.outputnodes,this.animatecallback=e,this.edges=[],r)for(var i in r[n].outedges)this.edges.push(r[n].outedges[i]);this.edges=this.edges.sort(function(t,e){return e.from.y-t.from.y}),c.select("svg").append("svg:defs").append("svg:marker").attr("id","triangle").attr("refX",6).attr("refY",6).attr("markerWidth",30).attr("markerHeight",30).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 0 0 12 6 0 12 3 6").style("fill","orange")}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(NetworkVisualization,[{key:"stop",value:function stop(){this.animating=!1}},{key:"animate",value:function animate(){this.animating=!0,this.animateloop()}},{key:"resizeSVG",value:function resizeSVG(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=document.querySelector("svg"),n=e.getBBox();e.setAttribute("viewBox","".concat(n.x-t," ").concat(n.y-t," ").concat(Math.min(1e3,n.width)+2*t," ").concat(Math.min(1e3,n.height)+2*t))}},{key:"animateloop",value:function animateloop(){var t=this;if(this.animating){this.animatecallback&&this.animatecallback();var e,n,r=this.nodes,i=this.inputnodes,o=this.outputnodes,a=this.edges;for(e in(0,l.updateDynamicVariables)(),r)r[e].offset=r[e].bias;for(n in a){var u=a[n];u.offset=u.to.offset,u.to.offset+=u.from.getActivation()*u.weight}c.select("#nodes").select(".nodes").selectAll("circle").data(r).join("circle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",s.noderadius).attr("fill",function(t){return"InputNode"==t.constructor.name?"yellow":"OutputNode"==t.constructor.name?"orange":"black"}).attr("stroke","black").attr("stroke-width",3).attr("fill-opacity",function(t){return"Node"==t.constructor.name?.2:1}),c.select("#parameters").select(".nodes").selectAll("circle").data(r.filter(function(t){return t.adjustable})).join("circle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y-s.unit*t.bias}).attr("r",15).attr("fill","white").attr("fill-opacity",.5).attr("stroke","black").attr("stroke-width",2).attr("stroke-opacity",.5);c.select("#nodes").select(".gradient").selectAll("path").data(r.filter(function(t){return 0!=t.dloss&&t.adjustable})).join("path").attr("d",function(t){var e=c.path();return e.moveTo(t.x,t.y-s.unit*t.bias),e.lineTo(t.x,t.y-s.unit*(t.bias-f(.1*t.dloss,-3,3))),e}).attr("marker-end","url(#triangle)").attr("stroke","orange").attr("stroke-width",2).attr("fill","none"),c.select("#edges").select(".gradient").selectAll("path").data(a.filter(function(t){return 0!=t.dloss&&t.adjustable})).join("path").attr("d",function(t){var e=c.path(),n=t.parameterPosition()[0],r=t.parameterPosition()[1];return e.moveTo(n,r),e.lineTo(n,r+s.unit*f(t.dloss/t.from.getActivation()*.1,-3,3)),e}).attr("marker-end","url(#triangle)").attr("stroke","orange").attr("stroke-width",2).attr("fill","none").style("opacity",function(t){return Math.min(.5,Math.abs(t.from.getActivation()))}),c.select("#parameters").select(".edges").selectAll("circle").data(a.filter(function(t){return t.adjustable})).join("circle").attr("cx",function(t){return t.parameterPosition()[0]}).attr("cy",function(t){return t.parameterPosition()[1]}).attr("r",15).attr("fill",function(t){return 0<t.weight?"blue":"red"}).attr("stroke","black").attr("stroke-width",2).attr("fill-opacity",.5).attr("stroke-opacity",.5),c.select("#input").select(".activations").selectAll("rect").data(i).join("rect").attr("x",function(t){return t.x}).attr("y",function(t){return t.y-Math.max(0,t.getActivation()*s.unit)}).attr("width",s.noderadius).attr("height",function(t){return Math.abs(t.getActivation()*s.unit)}).attr("fill","blue").attr("fill-opacity",.5),c.select("#parameters").select(".input").selectAll("circle").data(i).join("circle").attr("cx",function(t){return t.x+s.noderadius}).attr("cy",function(t){return t.y-s.unit*t.getActivation()}).attr("r",15).attr("fill","yellow").attr("fill-opacity",.6).attr("stroke","black").attr("stroke-width",2).attr("stroke-opacity",.6),c.select("#outputs").select(".flow").selectAll("rect").data(o).join("rect").attr("x",function(t){return t.x-s.noderadius}).attr("y",function(t){return t.y-Math.max(0,t.getActivation()*s.unit)}).attr("width",s.noderadius).attr("height",function(t){return Math.abs(t.getActivation()*s.unit)}).attr("fill","blue").attr("fill-opacity",.5),c.select("#nodes").select(".target").selectAll("text").data(o.filter(function(t){return"number"==typeof t.target})).join("text").attr("font-size",40).attr("text-anchor","left").attr("pointer-events","none").text(function(t){return"target: "+t.format(t.target)}).attr("x",function(t){return t.x-s.noderadius}).attr("y",function(t){return t.y-s.unit*t.target}).attr("opacity",1).attr("fill",function(t){return t.errorcolor()}),c.select("#nodes").select(".target").selectAll("path").data(o.filter(function(t){return"number"==typeof t.target})).join("path").attr("d",function(t){var e=c.path();return e.moveTo(t.x-10-s.noderadius,t.y-s.unit*t.target),e.lineTo(t.x+s.noderadius,t.y-s.unit*t.target),e}).attr("stroke",function(t){return t.errorcolor()}).attr("stroke-width",4).attr("fill","none"),c.select("#nodes").select(".values").selectAll("text").data(this.network.nodes).join("text").attr("font-size",40).attr("text-anchor","middle").attr("alignment-baseline","hanging").attr("pointer-events","none").text(function(t){return t.format(t.getActivation())}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y-f(s.unit*t.getActivation(),-30,70)}),c.select("#edges").select(".edges").selectAll("path").data(a).join("path").attr("d",function(t){var e=c.path(),n=t.bezier();return t.from.bias<=0||"InputNode"==t.from.constructor.name?e.moveTo(n[0][0],n[0][1]):(e.moveTo(n[0][0],n[0][1]-s.unit*t.from.bias),e.lineTo(n[0][0],n[0][1])),e.bezierCurveTo(n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]),t.offset<0&&e.lineTo(n[3][0],n[3][1]+s.unit*t.offset),e}).attr("stroke","black").attr("stroke-width",2).attr("fill","none"),c.select("#edges").select(".activations").selectAll("path").data(a).join("path").attr("d",function(t){var e=t.generateActivatedPath(t.from.getActivation()),t=t.bezier();return e.lineTo(t[3][0],t[3][1]),e.bezierCurveTo(t[2][0],t[2][1],t[1][0],t[1][1],t[0][0],t[0][1]),e.closePath(),e}).attr("fill",function(t){return 0<=t.weight?"blue":"red"}).attr("fill-opacity",.5);c.select("#edges").select(".factorlines").selectAll("g").data(a.filter(function(t){return t.adjustable})).join("g").selectAll("path").data(function(t){return Array(Math.abs(t.from.getActivation())>s.parameterths?0:1).fill(t)}).join("path").attr("d",function(t,e){return t.generateActivatedPathMiddle(s.parameterths*(t.from.getActivation()<0?-1:1)*(e+1))}).attr("stroke",function(t){return 0<=t.weight?"blue":"red"}).attr("stroke-width",2).attr("stroke-opacity",.5).attr("fill","none"),requestAnimationFrame(function(){return t.animateloop()})}}},{key:"addInteraction",value:function addInteraction(){this.nodes;var n,r=this,t=c.drag().on("start",function(){c.select(this);this.y0=c.event.y;var t=c.select(this).data()[0];t.adjustable&&(this.v0=t.bias,r.network.pauseAnimatedInput(),n=c.select("#tooltip").append("text")),"InputNode"==t.constructor.name&&(this.v0=t.getActivation(),t.setUserParameter(this.v0))}).on("drag",function(){var t=c.select(this).data()[0];if(t.adjustable&&(t.bias=f(this.v0-(c.event.y-this.y0)/s.unit,-4,4),n.attr("x",t.x).attr("y",t.y-s.unit*t.bias).text("+ ".concat(t.format(t.bias)))),"InputNode"==t.constructor.name)for(var e in t.setUserParameter(f(this.v0-(c.event.y-this.y0)/s.unit,-4,4)),r.network.outputnodes)delete r.network.outputnodes[e].target}).on("end",function(){n&&n.remove()}),t=(t(c.select("#nodes").selectAll("circle")),t(c.select("#parameters").select(".input").selectAll("circle")),t(c.select("#parameters").select(".nodes").selectAll("circle")),t(c.select("#input").selectAll("rect")),c.drag().on("start",function(){var t=c.select(this).data()[0];t.adjustable&&(c.select(this),this.y0=c.event.y,this.weight0=t.weight,r.network.pauseAnimatedInput(),n=c.select("#tooltip").append("text"))}).on("drag",function(){var t,e=c.select(this).data()[0];e.adjustable&&(t=e.from.getActivation(),Math.abs(t)<s.parameterths&&(t=(e.from.getActivation()<0?-1:1)*s.parameterths),e.weight=f(this.weight0-(c.event.y-this.y0)/t/s.unit,-4,4),n.attr("x",e.parameterPosition()[0]).attr("y",e.parameterPosition()[1]).text("× ".concat(e.weight.toFixed(2))))}).on("end",function(){n&&n.remove()}));t(c.select("#edges").selectAll("path, circle")),t(c.select("#parameters").select(".edges").selectAll("circle"))}}]),NetworkVisualization}();n.NetworkVisualization=t},{"./DynamicVariable.js":1,"./constants.js":10,"./d3.js":11}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Node=void 0;var r=t("./Edge.js"),i=t("./DynamicVariable.js");function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}t=function(){function Node(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Node),this.dactivation=new i.DynamicVariable(0),this.sum=new i.DynamicVariable(0),this.bias=0,this.dloss=0,this.outedges=[],this.inedges=[],this.adjustable=!0}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(Node,[{key:"addChild",value:function addChild(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=new r.Edge(this,t,e);this.outedges.push(e),n&&t.inedges.push(e)}},{key:"computeSum",value:function computeSum(){var r=this;return this.sum.update(function(){var t,e=r.bias;for(t in r.inedges){var n=r.inedges[t];e+=n.weight*n.from.getActivation()}return e})}},{key:"getActivation",value:function getActivation(){return Math.max(0,this.computeSum())}},{key:"active",value:function active(){return 0<=this.computeSum()}},{key:"getdActivation",value:function getdActivation(){var r=this;return this.dactivation.update(function(){var t,e=0;for(t in r.outedges){var n=r.outedges[t];n.to.active()&&(e+=n.weight*n.to.getdActivation())}return e})}},{key:"getdBias",value:function getdBias(){return this.active()?this.getdActivation():0}},{key:"format",value:function format(t){return t.toFixed(1)}},{key:"backup",value:function backup(){this.backupBias=this.bias}},{key:"restore",value:function restore(){this.bias=this.backupBias}}]),Node}();n.Node=t},{"./DynamicVariable.js":1,"./Edge.js":2}],9:[function(t,e,n){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.OutputNode=void 0;var r=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("./d3.js")),i=t("./Node.js"),o=t("./DynamicVariable.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(n){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function _createSuperInternal(){var t,e=_getPrototypeOf(n);return function _possibleConstructorReturn(t,e){{if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function _assertThisInitialized(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(OutputNode,i.Node);var e=_createSuper(OutputNode);function OutputNode(){var t;return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,OutputNode),(t=e.call(this)).bias=0,t.adjustable=!1,t}return function _createClass(t,e,n){e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(OutputNode,[{key:"getActivation",value:function getActivation(){return this.computeSum()}},{key:"getdActivation",value:function getdActivation(){return 1}},{key:"active",value:function active(){return!0}},{key:"temporarilyReplaceGetdActivation",value:function temporarilyReplaceGetdActivation(t){this.getdActivationBackup=this.getdActivation,this.getdActivation=t,(0,o.updateDynamicVariables)()}},{key:"restoreGetdActivation",value:function restoreGetdActivation(){this.getdActivation=this.getdActivationBackup,(0,o.updateDynamicVariables)()}},{key:"errorcolor",value:function errorcolor(){return r.scaleSequential().domain([1,0]).interpolator(r.interpolateRdYlGn)(Math.abs(this.target-this.getActivation()))}}]),OutputNode}();n.OutputNode=t},{"./DynamicVariable.js":1,"./Node.js":8,"./d3.js":11}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unit=n.parameterths=n.noderadius=void 0;n.unit=35,n.parameterths=.3;n.noderadius=80},{}],11:[function(t,e,n){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(j){var g=function ascending(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},q=function bisector(o){return 1===o.length&&(o=function ascendingComparator(n){return function(t,e){return g(n(t),e)}}(o)),{left:function left(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}return n},right:function right(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<o(t[i],e)?r=i:n=1+i}return n}}};var r=q(g),_=r.right,r=r.left,a=function descending(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},b=function number(t){return null===t?NaN:+t},D=function variance(t,e){var n,r,i=t.length,o=0,a=0,u=-1,c=0;if(null==e)for(;++u<i;)isNaN(n=b(t[u]))||(a+=(r=n-o)*(n-(o+=r/++c)));else for(;++u<i;)isNaN(n=b(e(t[u],u,t)))||(a+=(r=n-o)*(n-(o+=r/++c)));if(1<c)return a/(c-1)},F=function deviation(t,e){t=D(t,e);return t&&Math.sqrt(t)},U=function extent(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r<=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(r<n&&(n=r),i<r)&&(i=r)}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r<=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(r<n&&(n=r),i<r)&&(i=r)}return[n,i]},B=Array.prototype,W=B.slice,Y=B.map,H=function constant$1(t){return function(){return t}},V=function identity(t){return t},X=function range(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),range=new Array(i);++r<i;)range[r]=t+r*n;return range},G=Math.sqrt(50),Z=Math.sqrt(10),K=Math.sqrt(2),Q=function ticks(t,e,n){n=tickStep(t,e,n);return X(Math.ceil(t/n)*n,Math.floor(e/n)*n+n/2,n)};function tickStep(t,e,n){var n=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),n=n/r;return G<=n?r*=10:Z<=n?r*=5:K<=n&&(r*=2),e<t?-r:r}function of(){var h=V,d=U,p=J;function histogram(t){for(var e,n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=h(t[i],i,t);for(var o=d(r),a=o[0],u=o[1],c=p(r,a,u),s=(c=Array.isArray(c)?c:Q(a,u,c)).length;c[0]<=a;)c.shift(),--s;for(;c[s-1]>=u;)c.pop(),--s;var l,f=new Array(s+1);for(i=0;i<=s;++i)(l=f[i]=[]).x0=0<i?c[i-1]:a,l.x1=i<s?c[i]:u;for(i=0;i<n;++i)a<=(e=r[i])&&e<=u&&f[_(c,e,0,s)].push(t[i]);return f}return histogram.value=function(t){return arguments.length?(h="function"==typeof t?t:H(t),histogram):h},histogram.domain=function(t){return arguments.length?(d="function"==typeof t?t:H([t[0],t[1]]),histogram):d},histogram.thresholds=function(t){return arguments.length?(p="function"==typeof t?t:Array.isArray(t)?H(W.call(t)):H(t),histogram):p},histogram}function xf(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i}function Cf(t){if(!(i=t.length))return[];for(var e=-1,n=at(t,length),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}var J=function sturges(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},tt=function threshold(t,e,n){var r,i;if(null==n&&(n=b),r=t.length)return(e=+e)<=0||r<2?+n(t[0],0,t):1<=e?+n(t[r-1],r-1,t):(r=(r-1)*e,(i=+n(t[e=Math.floor(r)],e,t))+(+n(t[e+1],e+1,t)-i)*(r-e))},B=function freedmanDiaconis(t,e,n){return t=Y.call(t,b).sort(g),Math.ceil((n-e)/(2*(tt(t,.75)-tt(t,.25))*Math.pow(t.length,-1/3)))},et=function scott(t,e,n){return Math.ceil((n-e)/(3.5*F(t)*Math.pow(t.length,-1/3)))},nt=function max(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n<r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r<=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n<r&&(n=r)}return n},rt=function mean(t,e){var n,r=0,i=t.length,o=-1,a=i;if(null==e)for(;++o<i;)isNaN(n=b(t[o]))?--a:r+=n;else for(;++o<i;)isNaN(n=b(e(t[o],o,t)))?--a:r+=n;if(a)return r/a},it=function median(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=b(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=b(e(t[o],o,t)))||r.push(n);return tt(r.sort(g),.5)},ot=function merge(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--a]=r[e];return n},at=function min(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r<=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r<n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r<=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r<n&&(n=r)}return n},ut=function permute(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ct=function scan(t,e){if(n=t.length){var n,r,i=0,o=0,a=t[o];for(e=e||g;++i<n;)(e(r=t[i],a)<0||0!==e(a,a))&&(a=r,o=i);return 0===e(a,a)?o:void 0}},st=function shuffle(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},lt=function sum(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r};function length(t){return t.length}var ft=function zip(){return Cf(arguments)},n="$";function Map(){}function map$1(t,e){var n=new Map;if(t instanceof Map)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Map.prototype=map$1.prototype={constructor:Map,has:function has(t){return n+t in this},get:function get(t){return this[n+t]},set:function set(t,e){return this[n+t]=e,this},remove:function remove(t){t=n+t;return t in this&&delete this[t]},clear:function clear(){for(var t in this)t[0]===n&&delete this[t]},keys:function keys(){var t,keys=[];for(t in this)t[0]===n&&keys.push(t.slice(1));return keys},values:function values(){var t,values=[];for(t in this)t[0]===n&&values.push(this[t]);return values},entries:function entries(){var t,entries=[];for(t in this)t[0]===n&&entries.push({key:t.slice(1),value:this[t]});return entries},size:function size(){var t,size=0;for(t in this)t[0]===n&&++size;return size},empty:function empty(){for(var t in this)if(t[0]===n)return!1;return!0},each:function each(t){for(var e in this)e[0]===n&&t(this[e],e.slice(1),this)}};function Ff(){var h,d,e,p=[],o=[];function apply(t,n,r,i){if(n>=p.length)return null!=d?d(t):null!=h?t.sort(h):t;for(var e,o,a,u=-1,c=t.length,s=p[n++],l=map$1(),f=r();++u<c;)(a=l.get(e=s(o=t[u])+""))?a.push(o):l.set(e,[o]);return l.each(function(t,e){i(f,e,apply(t,n,r,i))}),f}return e={object:function object(t){return apply(t,0,createObject,setObject)},map:function map(t){return apply(t,0,createMap,setMap)},entries:function entries(t){return function _entries(t,n){var r,i;return++n>p.length?t:(i=o[n-1],null!=d&&n>=p.length?r=t.entries():(r=[],t.each(function(t,e){r.push({key:e,values:_entries(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r)}(apply(t,0,createMap,setMap),0)},key:function key(t){return p.push(t),e},sortKeys:function sortKeys(t){return o[p.length-1]=t,e},sortValues:function sortValues(t){return h=t,e},rollup:function rollup(t){return d=t,e}}}function createObject(){return{}}function setObject(t,e,n){t[e]=n}function createMap(){return map$1()}function setMap(t,e,n){t.set(e,n)}function Set(){}var ht=map$1.prototype;function set(t,e){var n=new Set;if(t instanceof Set)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Set.prototype=set.prototype={constructor:Set,has:ht.has,add:function add(t){return this[n+(t+="")]=t,this},remove:ht.remove,clear:ht.clear,values:ht.keys,size:ht.size,empty:ht.empty,each:ht.each};function Hf(t){var e,n=[];for(e in t)n.push(e);return n}function If(t){var e,n=[];for(e in t)n.push(t[e]);return n}function Jf(t){var e,n=[];for(e in t)n.push({key:e,value:t[e]});return n}var ht=function uniform(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},dt=function normal(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=r)t=r,r=null;else for(;r=2*Math.random()-1,t=2*Math.random()-1,!(i=r*r+t*t)||1<i;);return e+n*t*Math.sqrt(-2*Math.log(i)/i)}},pt=function logNormal(){var t=dt.apply(this,arguments);return function(){return Math.exp(t())}},yt=function irwinHall(n){return function(){for(var t=0,e=0;e<n;++e)t+=Math.random();return t}},vt=function bates(t){var e=yt(t);return function(){return e()/t}},mt=function exponential(t){return function(){return-Math.log(1-Math.random())/t}};function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gt=function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),_t=function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),bt=function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3),xt=Math.PI,wt=xt/2;function sinInOut(t){return(1-Math.cos(xt*t))/2}function expInOut(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Mt=7.5625;function bounceOut(t){return(t=+t)<4/11?Mt*t*t:t<8/11?Mt*(t-=6/11)*t+.75:t<10/11?Mt*(t-=9/11)*t+.9375:Mt*(t-=21/22)*t+63/64}function og(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}var kt=1.70158,St=function custom(e){function backIn(t){return t*t*((e+1)*t-e)}return e=+e,backIn.overshoot=custom,backIn}(kt),Ct=function custom(e){function backOut(t){return--t*t*((e+1)*t+e)+1}return e=+e,backOut.overshoot=custom,backOut}(kt),kt=function custom(e){function backInOut(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,backInOut.overshoot=custom,backInOut}(kt),Nt=2*Math.PI,Tt=function custom(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Nt);function elasticIn(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return elasticIn.amplitude=function(t){return custom(t,n*Nt)},elasticIn.period=function(t){return custom(e,t)},elasticIn}(1,.3),Pt=function custom(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Nt);function elasticOut(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return elasticOut.amplitude=function(t){return custom(t,n*Nt)},elasticOut.period=function(t){return custom(e,t)},elasticOut}(1,.3),At=function custom(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Nt);function elasticInOut(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return elasticInOut.amplitude=function(t){return custom(t,n*Nt)},elasticInOut.period=function(t){return custom(e,t)},elasticInOut}(1,.3),Et=function centroid(t){for(var e,n,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)e=u,u=t[r],c+=n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return[o/(c*=3),a/c]},Rt=function cross(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function lexicographicOrder(t,e){return t[0]-e[0]||t[1]-e[1]}function computeUpperHullIndexes(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;1<r&&Rt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function rg(t){if((e=t.length)<3)return null;for(var e,n=new Array(e),r=new Array(e),i=0;i<e;++i)n[i]=[+t[i][0],+t[i][1],i];for(n.sort(lexicographicOrder),i=0;i<e;++i)r[i]=[n[i][0],-n[i][1]];var o=computeUpperHullIndexes(n),a=computeUpperHullIndexes(r),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],s=[];for(i=o.length-1;0<=i;--i)s.push(t[n[o[i]][2]]);for(i=+u;i<a.length-c;++i)s.push(t[n[a[i]][2]]);return s}var Lt=function contains(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],u=e[1],c=o[0],s=o[1],l=!1,f=0;f<i;++f)n=(o=t[f])[0],u<(r=o[1])!=u<s&&a<(c-n)*(u-r)/(s-r)+n&&(l=!l),c=n,s=r;return l},Ot=function length$1(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)e=a,n=u,e-=a=(o=t[r])[0],n-=u=o[1],c+=Math.sqrt(e*e+n*n);return c},jt=Math.PI,$t=2*jt,zt=1e-6,It=$t-zt;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function moveTo(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function lineTo(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function quadraticCurveTo(t,e,n,r){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function bezierCurveTo(t,e,n,r,i,o){this._.push("C",+t,",",+e,",",+n,",",+r,",",this._x1=+i,",",this._y1=+o)},arcTo:function arcTo(t,e,n,r,i){var o,a,u=this._x1,c=this._y1,s=(n=+n)-(t=+t),l=(r=+r)-(e=+e),f=u-t,h=c-e,d=f*f+h*h;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._.push("M",this._x1=t,",",this._y1=e):zt<d&&(Math.abs(h*s-l*f)>zt&&i?(a=s*s+l*l,r=(n=n-u)*n+(u=r-c)*u,c=Math.sqrt(a),o=Math.sqrt(d),d=(a=i*Math.tan((jt-Math.acos((a+d-r)/(2*c*o)))/2))/o,r=a/c,Math.abs(d-1)>zt&&this._.push("L",t+d*f,",",e+d*h),this._.push("A",i,",",i,",0,0,",+(f*u<h*n),",",this._x1=t+r*s,",",this._y1=e+r*l)):this._.push("L",this._x1=t,",",this._y1=e))},arc:function arc(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),u=n*Math.sin(r),c=t+a,s=e+u,l=1^o,o=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",c,",",s):(Math.abs(this._x1-c)>zt||Math.abs(this._y1-s)>zt)&&this._.push("L",c,",",s),n&&(It<o?this._.push("A",n,",",n,",0,1,",l,",",t-a,",",e-u,"A",n,",",n,",0,1,",l,",",this._x1=c,",",this._y1=s):this._.push("A",n,",",n,",0,",+(jt<=(o=o<0?o%$t+$t:o)),",",l,",",this._x1=t+n*Math.cos(i),",",this._y1=e+n*Math.sin(i)))},rect:function rect(t,e,n,r){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+r,"h",-n,"Z")},toString:function toString(){return this._.join("")}};var qt=function tree_add(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return add(this.cover(e,n),e,n,t)};function add(t,e,n,r){if(!isNaN(e)&&!isNaN(n)){var i,o,a,u,c,s,l,f,h,d=t._root,p={data:r},y=t._x0,v=t._y0,m=t._x1,g=t._y1;if(d){for(;d.length;)if((s=e>=(o=(y+m)/2))?y=o:m=o,(l=n>=(a=(v+g)/2))?v=a:g=a,!(d=(i=d)[f=l<<1|s]))return i[f]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===u&&n===c)p.next=d,i?i[f]=p:t._root=p;else{for(;i=i?i[f]=new Array(4):t._root=new Array(4),(s=e>=(o=(y+m)/2))?y=o:m=o,(l=n>=(a=(v+g)/2))?v=a:g=a,(f=l<<1|s)==(h=(a<=c)<<1|o<=u););i[h]=d,i[f]=p}}else t._root=p}return t}var Dt=function tree_cover(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(t<n||i<t||e<r||o<e))return this;var a,u,c=i-n,s=this._root;switch(u=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:for(;(a=new Array(4))[u]=s,s=a,o=r+(c*=2),(i=n+c)<t||o<e;);break;case 1:for(;(a=new Array(4))[u]=s,s=a,o=r+(c*=2),t<(n=i-c)||o<e;);break;case 2:for(;(a=new Array(4))[u]=s,s=a,r=o-(c*=2),(i=n+c)<t||e<r;);break;case 3:for(;(a=new Array(4))[u]=s,s=a,r=o-(c*=2),t<(n=i-c)||e<r;);}this._root&&this._root.length&&(this._root=s)}this._x0=n,this._y0=r,this._x1=i,this._y1=o}return this},Ft=function tree_data(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Ut=function tree_extent(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},m=function Quad(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},Bt=function tree_find(t,e,n){var r,i,o,a,u,c,s,l,f=this._x0,h=this._y0,d=this._x1,p=this._y1,y=[],v=this._root;for(v&&y.push(new m(v,f,h,d,p)),null==n?n=1/0:(f=t-n,h=e-n,d=t+n,p=e+n,n*=n);r=y.pop();)!(v=r.node)||(u=r.x0)>d||(c=r.y0)>p||(a=r.x1)<f||(i=r.y1)<h||(v.length?(y.push(new m(v[3],o=(u+a)/2,s=(c+i)/2,a,i),new m(v[2],u,s,o,i),new m(v[1],o,c,a,s),new m(v[0],u,c,o,s)),(i=(s<=e)<<1|o<=t)&&(r=y[y.length-1],y[y.length-1]=y[y.length-1-i],y[y.length-1-i]=r)):(c=(a=t-+this._x.call(null,v.data))*a+(u=e-+this._y.call(null,v.data))*u)<n&&(f=t-(s=Math.sqrt(n=c)),h=e-s,d=t+s,p=e+s,l=v.data));return l},Wt=function tree_remove(t){if(!isNaN(o=+this._x.call(null,t))&&!isNaN(a=+this._y.call(null,t))){var e,n,r,i,o,a,u,c,s,l,f,h=this._root,d=this._x0,p=this._y0,y=this._x1,v=this._y1;if(h){if(h.length)for(;;){if((c=o>=(u=(d+y)/2))?d=u:y=u,(s=a>=(u=(p+v)/2))?p=u:v=u,!(h=(e=h)[l=s<<1|c]))return this;if(!h.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;h.data!==t;)if(!(h=(r=h).next))return this;(i=h.next)&&delete h.next,r?i?r.next=i:delete r.next:e?(i?e[l]=i:delete e[l],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[f]=h:this._root=h)):this._root=i}}return this};var Yt=function tree_root(){return this._root},Ht=function tree_size(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Vt=function tree_visit(t){var e,n,r,i,o,a,u,c=[],s=this._root;for(s&&c.push(new m(s,this._x0,this._y0,this._x1,this._y1));o=c.pop();)!t(s=o.node,n=o.x0,r=o.y0,i=o.x1,o=o.y1)&&s.length&&(a=(n+i)/2,u=(r+o)/2,(e=s[3])&&c.push(new m(e,a,u,i,o)),(e=s[2])&&c.push(new m(e,n,u,a,o)),(e=s[1])&&c.push(new m(e,a,r,i,u)),e=s[0])&&c.push(new m(e,n,r,a,u));return this},Xt=function tree_visitAfter(t){var e,n=[],r=[];for(this._root&&n.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i,o,a,u,c,s,l,f=e.node;f.length&&(o=e.x0,a=e.y0,s=(o+(u=e.x1))/2,l=(a+(c=e.y1))/2,(i=f[0])&&n.push(new m(i,o,a,s,l)),(i=f[1])&&n.push(new m(i,s,a,u,l)),(i=f[2])&&n.push(new m(i,o,l,s,c)),i=f[3])&&n.push(new m(i,s,l,u,c)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function defaultX(t){return t[0]}var Gt=function tree_x(t){return arguments.length?(this._x=t,this):this._x};function defaultY(t){return t[1]}var Zt=function tree_y(t){return arguments.length?(this._y=t,this):this._y};function quadtree(t,e,n){e=new Quadtree(null==e?defaultX:e,null==n?defaultY:n,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function Quadtree(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var t=quadtree.prototype=Quadtree.prototype,Kt=(t.copy=function(){var t,e,n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=leaf_copy(e));else n._root=leaf_copy(r);return n},t.add=qt,t.addAll=function addAll(t){for(var e,n,r=t.length,i=new Array(r),o=new Array(r),a=1/0,u=1/0,c=-1/0,s=-1/0,l=0;l<r;++l)isNaN(e=+this._x.call(null,n=t[l]))||isNaN(n=+this._y.call(null,n))||((i[l]=e)<a&&(a=e),c<e&&(c=e),(o[l]=n)<u&&(u=n),s<n&&(s=n));for(c<a&&(a=this._x0,c=this._x1),s<u&&(u=this._y0,s=this._y1),this.cover(a,u).cover(c,s),l=0;l<r;++l)add(this,i[l],o[l],t[l]);return this},t.cover=Dt,t.data=Ft,t.extent=Ut,t.find=Bt,t.remove=Wt,t.removeAll=function removeAll(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},t.root=Yt,t.size=Ht,t.visit=Vt,t.visitAfter=Xt,t.x=Gt,t.y=Zt,[].slice),Qt={};function Queue(t){if(!(1<=t))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function poke(e){if(!e._start)try{!function start(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=function end(n,r){return function(t,e){n._tasks[r]&&(--n._active,++n._ended,(n._tasks[r]=null)==n._error)&&(null!=t?_abort(n,t):(n._data[r]=e,(n._waiting?poke:maybeNotify)(n)))}}(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Qt)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])_abort(e,t);else if(!e._data)throw t}}function _abort(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;0<=--r;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,maybeNotify(t)}function maybeNotify(t){var e;!t._active&&t._call&&(e=t._data,t._data=void 0,t._call(t._error,e))}function queue(t){return new Queue(arguments.length?+t:1/0)}Queue.prototype=queue.prototype={constructor:Queue,defer:function defer(t){if("function"!=typeof t||this._call)throw new Error;var e;return null==this._error&&((e=Kt.call(arguments,1)).push(t),++this._waiting,this._tasks.push(e),poke(this)),this},abort:function abort(){return null==this._error&&_abort(this,new Error("abort")),this},await:function _await(n){if("function"!=typeof n||this._call)throw new Error;return this._call=function(t,e){n.apply(null,[t].concat(e))},maybeNotify(this),this},awaitAll:function awaitAll(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,maybeNotify(this),this}};var o=function constant$2(t){return function constant(){return t}},$=1e-12,Jt=Math.PI,te=Jt/2,ee=2*Jt;function arcInnerRadius(t){return t.innerRadius}function arcOuterRadius(t){return t.outerRadius}function arcStartAngle(t){return t.startAngle}function arcEndAngle(t){return t.endAngle}function arcPadAngle(t){return t&&t.padAngle}function asin(t){return 1<=t?te:t<=-1?-te:Math.asin(t)}function cornerTangents(t,e,n,r,i,o,a){var u=t-n,c=e-r,a=(a?o:-o)/Math.sqrt(u*u+c*c),c=a*c,a=-a*u,u=t+c,t=e+a,e=n+c,n=r+a,r=(u+e)/2,s=(t+n)/2,l=e-u,f=n-t,h=l*l+f*f,o=i-o,u=u*n-e*t,n=(f<0?-1:1)*Math.sqrt(Math.max(0,o*o*h-u*u)),e=(u*f-l*n)/h,t=(-u*l-f*n)/h,d=(u*f+l*n)/h,u=(-u*l+f*n)/h,l=e-r,f=t-s,n=d-r,h=u-s;return n*n+h*h<l*l+f*f&&(e=d,t=u),{cx:e,cy:t,x01:-c,y01:-a,x11:e*(i/o-1),y11:t*(i/o-1)}}function Tg(){var T=arcInnerRadius,P=arcOuterRadius,A=o(0),E=null,R=arcStartAngle,L=arcEndAngle,O=arcPadAngle,j=null;function arc(){var t,e,n,r,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g,_,b,x,w=+T.apply(this,arguments),M=+P.apply(this,arguments),k=R.apply(this,arguments)-te,S=L.apply(this,arguments)-te,C=Math.abs(S-k),N=k<S;if(j=j||(t=path()),M<w&&(e=M,M=w,w=e),$<M?ee-$<C?(j.moveTo(M*Math.cos(k),M*Math.sin(k)),j.arc(0,0,M,k,S,!N),$<w&&(j.moveTo(w*Math.cos(S),w*Math.sin(S)),j.arc(0,0,w,S,k,N))):(r=e=k,i=n=S,a=o=C,l=O.apply(this,arguments)/2,h=$<l&&(E?+E.apply(this,arguments):Math.sqrt(w*w+M*M)),x=b=u=Math.min(Math.abs(M-w)/2,+A.apply(this,arguments)),$<h&&(f=asin(h/w*Math.sin(l)),h=asin(h/M*Math.sin(l)),(o-=2*f)>$?(r+=f*=N?1:-1,i-=f):(o=0,r=i=(k+S)/2),(a-=2*h)>$?(e+=h*=N?1:-1,n-=h):(a=0,e=n=(k+S)/2)),l=M*Math.cos(e),f=M*Math.sin(e),h=w*Math.cos(i),k=w*Math.sin(i),$<u&&(d=M*Math.cos(n),p=M*Math.sin(n),y=w*Math.cos(r),v=w*Math.sin(r),C<Jt)&&(C=l-(S=$<o?function intersect(t,e,n,r,i,o,a,u){return[t+(o=((a-=i)*(e-o)-(u-=o)*(t-i))/(u*(n-=t)-a*(r-=e)))*n,e+o*r]}(l,f,y,v,d,p,h,k):[h,k])[0],_=f-S[1],m=d-S[0],g=p-S[1],C=1/Math.sin(Math.acos((C*m+_*g)/(Math.sqrt(C*C+_*_)*Math.sqrt(m*m+g*g)))/2),_=Math.sqrt(S[0]*S[0]+S[1]*S[1]),b=Math.min(u,(w-_)/(C-1)),x=Math.min(u,(M-_)/(1+C))),$<a?$<x?(c=cornerTangents(y,v,l,f,M,x,N),s=cornerTangents(d,p,h,k,M,x,N),j.moveTo(c.cx+c.x01,c.cy+c.y01),x<u?j.arc(c.cx,c.cy,x,Math.atan2(c.y01,c.x01),Math.atan2(s.y01,s.x01),!N):(j.arc(c.cx,c.cy,x,Math.atan2(c.y01,c.x01),Math.atan2(c.y11,c.x11),!N),j.arc(0,0,M,Math.atan2(c.cy+c.y11,c.cx+c.x11),Math.atan2(s.cy+s.y11,s.cx+s.x11),!N),j.arc(s.cx,s.cy,x,Math.atan2(s.y11,s.x11),Math.atan2(s.y01,s.x01),!N))):(j.moveTo(l,f),j.arc(0,0,M,e,n,!N)):j.moveTo(l,f),$<w&&$<o?$<b?(c=cornerTangents(h,k,d,p,w,-b,N),s=cornerTangents(l,f,y,v,w,-b,N),j.lineTo(c.cx+c.x01,c.cy+c.y01),b<u?j.arc(c.cx,c.cy,b,Math.atan2(c.y01,c.x01),Math.atan2(s.y01,s.x01),!N):(j.arc(c.cx,c.cy,b,Math.atan2(c.y01,c.x01),Math.atan2(c.y11,c.x11),!N),j.arc(0,0,w,Math.atan2(c.cy+c.y11,c.cx+c.x11),Math.atan2(s.cy+s.y11,s.cx+s.x11),N),j.arc(s.cx,s.cy,b,Math.atan2(s.y11,s.x11),Math.atan2(s.y01,s.x01),!N))):j.arc(0,0,w,i,r,N):j.lineTo(h,k)):j.moveTo(0,0),j.closePath(),t)return j=null,t+""||null}return arc.centroid=function(){var t=(+T.apply(this,arguments)+ +P.apply(this,arguments))/2,e=(+R.apply(this,arguments)+ +L.apply(this,arguments))/2-Jt/2;return[Math.cos(e)*t,Math.sin(e)*t]},arc.innerRadius=function(t){return arguments.length?(T="function"==typeof t?t:o(+t),arc):T},arc.outerRadius=function(t){return arguments.length?(P="function"==typeof t?t:o(+t),arc):P},arc.cornerRadius=function(t){return arguments.length?(A="function"==typeof t?t:o(+t),arc):A},arc.padRadius=function(t){return arguments.length?(E=null==t?null:"function"==typeof t?t:o(+t),arc):E},arc.startAngle=function(t){return arguments.length?(R="function"==typeof t?t:o(+t),arc):R},arc.endAngle=function(t){return arguments.length?(L="function"==typeof t?t:o(+t),arc):L},arc.padAngle=function(t){return arguments.length?(O="function"==typeof t?t:o(+t),arc):O},arc.context=function(t){return arguments.length?(j=null==t?null:t,arc):j},arc}function Linear(t){this._context=t}Linear.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var ne=function curveLinear(t){return new Linear(t)};function x(t){return t[0]}function y(t){return t[1]}function Vg(){var a=x,u=y,c=o(!0),s=null,l=ne,f=null;function line(t){var e,n,r,i=t.length,o=!1;for(null==s&&(f=l(r=path())),e=0;e<=i;++e)!(e<i&&c(n=t[e],e,t))===o&&((o=!o)?f.lineStart():f.lineEnd()),o&&f.point(+a(n,e,t),+u(n,e,t));if(r)return f=null,r+""||null}return line.x=function(t){return arguments.length?(a="function"==typeof t?t:o(+t),line):a},line.y=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),line):u},line.defined=function(t){return arguments.length?(c="function"==typeof t?t:o(!!t),line):c},line.curve=function(t){return arguments.length?(l=t,null!=s&&(f=l(s)),line):l},line.context=function(t){return arguments.length?(null==t?s=f=null:f=l(s=t),line):s},line}function Zg(){var d=oe,p=ie,y=null,v=o(0),m=o(ee),g=o(0);function pie(n){for(var t,e,r,i=n.length,o=0,a=new Array(i),u=new Array(i),c=+v.apply(this,arguments),s=Math.min(ee,Math.max(-ee,m.apply(this,arguments)-c)),l=Math.min(Math.abs(s)/i,g.apply(this,arguments)),f=l*(s<0?-1:1),h=0;h<i;++h)0<(r=u[a[h]=h]=+d(n[h],h,n))&&(o+=r);for(null!=p?a.sort(function(t,e){return p(u[t],u[e])}):null!=y&&a.sort(function(t,e){return y(n[t],n[e])}),h=0,t=o?(s-i*f)/o:0;h<i;++h,c=e)e=a[h],r=u[e],u[e]={data:n[e],index:h,value:r,startAngle:c,endAngle:e=c+(0<r?r*t:0)+f,padAngle:l};return u}return pie.value=function(t){return arguments.length?(d="function"==typeof t?t:o(+t),pie):d},pie.sortValues=function(t){return arguments.length?(p=t,y=null,pie):p},pie.sort=function(t){return arguments.length?(y=t,p=null,pie):y},pie.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:o(+t),pie):v},pie.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:o(+t),pie):m},pie.padAngle=function(t){return arguments.length?(g="function"==typeof t?t:o(+t),pie):g},pie}var re=function area$1(){var l=x,f=null,h=o(0),d=y,p=o(!0),v=null,m=ne,g=null;function area(t){var e,n,r,i,o,a=t.length,u=!1,c=new Array(a),s=new Array(a);for(null==v&&(g=m(o=path())),e=0;e<=a;++e){if(!(e<a&&p(i=t[e],e,t))===u)if(u=!u)n=e,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),r=e-1;n<=r;--r)g.point(c[r],s[r]);g.lineEnd(),g.areaEnd()}u&&(c[e]=+l(i,e,t),s[e]=+h(i,e,t),g.point(f?+f(i,e,t):c[e],d?+d(i,e,t):s[e]))}if(o)return g=null,o+""||null}function arealine(){return Vg().defined(p).curve(m).context(v)}return area.x=function(t){return arguments.length?(l="function"==typeof t?t:o(+t),f=null,area):l},area.x0=function(t){return arguments.length?(l="function"==typeof t?t:o(+t),area):l},area.x1=function(t){return arguments.length?(f=null==t?null:"function"==typeof t?t:o(+t),area):f},area.y=function(t){return arguments.length?(h="function"==typeof t?t:o(+t),d=null,area):h},area.y0=function(t){return arguments.length?(h="function"==typeof t?t:o(+t),area):h},area.y1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:o(+t),area):d},area.lineX0=area.lineY0=function(){return arealine().x(l).y(h)},area.lineY1=function(){return arealine().x(l).y(d)},area.lineX1=function(){return arealine().x(f).y(h)},area.defined=function(t){return arguments.length?(p="function"==typeof t?t:o(!!t),area):p},area.curve=function(t){return arguments.length?(m=t,null!=v&&(g=m(v)),area):m},area.context=function(t){return arguments.length?(null==t?v=g=null:g=m(v=t),area):v},area},ie=function descending$1(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},oe=function identity$1(t){return t},ae=curveRadial(ne);function Radial(t){this._curve=t}function curveRadial(e){function radial(t){return new Radial(e(t))}return radial._curve=e,radial}function radialLine(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(curveRadial(t)):e()._curve},t}Radial.prototype={areaStart:function areaStart(){this._curve.areaStart()},areaEnd:function areaEnd(){this._curve.areaEnd()},lineStart:function lineStart(){this._curve.lineStart()},lineEnd:function lineEnd(){this._curve.lineEnd()},point:function point(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function u6(){var e=o(ue),n=o(64),r=null;function symbol(){var t;if(r=r||(t=path()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}return symbol.type=function(t){return arguments.length?(e="function"==typeof t?t:o(t),symbol):e},symbol.size=function(t){return arguments.length?(n="function"==typeof t?t:o(+t),symbol):n},symbol.context=function(t){return arguments.length?(r=null==t?null:t,symbol):r},symbol}var qt=function radialLine$1(){return radialLine(Vg().curve(ae))},Dt=function radialArea(){var t=re().curve(ae),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return radialLine(n())},delete t.lineX0,t.lineEndAngle=function(){return radialLine(r())},delete t.lineX1,t.lineInnerRadius=function(){return radialLine(i())},delete t.lineY0,t.lineOuterRadius=function(){return radialLine(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(curveRadial(t)):e()._curve},t},ue={draw:function draw(t,e){e=Math.sqrt(e/Jt);t.moveTo(e,0),t.arc(0,0,e,0,ee)}},Ft={draw:function draw(t,e){e=Math.sqrt(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},ce=Math.sqrt(1/3),se=2*ce,Ut={draw:function draw(t,e){var e=Math.sqrt(e/se),n=e*ce;t.moveTo(0,-e),t.lineTo(n,0),t.lineTo(0,e),t.lineTo(-n,0),t.closePath()}},Bt=Math.sin(Jt/10)/Math.sin(7*Jt/10),le=Math.sin(ee/10)*Bt,fe=-Math.cos(ee/10)*Bt,Wt={draw:function draw(t,e){var n=Math.sqrt(.8908130915292852*e),r=le*n,i=fe*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=ee*o/5,u=Math.cos(a),a=Math.sin(a);t.lineTo(a*n,-u*n),t.lineTo(u*r-a*i,a*r+u*i)}t.closePath()}},Yt={draw:function draw(t,e){var e=Math.sqrt(e),n=-e/2;t.rect(n,n,e,e)}},he=Math.sqrt(3),Ht={draw:function draw(t,e){e=-Math.sqrt(e/(3*he));t.moveTo(0,2*e),t.lineTo(-he*e,-e),t.lineTo(he*e,-e),t.closePath()}},u=-.5,c=Math.sqrt(3)/2,de=1/Math.sqrt(12),pe=3*(de/2+1),Vt={draw:function draw(t,e){var e=Math.sqrt(e/pe),n=e/2,r=e*de,i=n,e=e*de+e,o=-i,a=e;t.moveTo(n,r),t.lineTo(i,e),t.lineTo(o,a),t.lineTo(u*n-c*r,c*n+u*r),t.lineTo(u*i-c*e,c*i+u*e),t.lineTo(u*o-c*a,c*o+u*a),t.lineTo(u*n+c*r,u*r-c*n),t.lineTo(u*i+c*e,u*e-c*i),t.lineTo(u*o+c*a,u*a-c*o),t.closePath()}},Xt=[ue,Ft,Ut,Yt,Wt,Ht,Vt],Gt=function noop(){};function _point(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Basis(t){this._context=t}Basis.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 3:_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_point(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};t=function basis(t){return new Basis(t)};function BasisClosed(t){this._context=t}BasisClosed.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_point(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};Zt=function basisClosed(t){return new BasisClosed(t)};function BasisOpen(t){this._context=t}BasisOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_point(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};Bt=function basisOpen(t){return new BasisOpen(t)};function Bundle(t,e){this._basis=new Basis(t),this._beta=e}Bundle.prototype={lineStart:function lineStart(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function lineEnd(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,c=-1;++c<=n;)this._basis.point(this._beta*t[c]+(1-this._beta)*(i+(r=c/n)*a),this._beta*e[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function point(t,e){this._x.push(+t),this._y.push(+e)}};var ye=function custom(e){function bundle(t){return 1===e?new Basis(t):new Bundle(t,e)}return bundle.beta=function(t){return custom(+t)},bundle}(.85);function point$1(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cardinal(t,e){this._context=t,this._k=(1-e)/6}Cardinal.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$1(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:point$1(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ve=function custom(e){function cardinal(t){return new Cardinal(t,e)}return cardinal.tension=function(t){return custom(+t)},cardinal}(0);function CardinalClosed(t,e){this._context=t,this._k=(1-e)/6}CardinalClosed.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:point$1(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var me=function custom(e){function cardinal(t){return new CardinalClosed(t,e)}return cardinal.tension=function(t){return custom(+t)},cardinal}(0);function CardinalOpen(t,e){this._context=t,this._k=(1-e)/6}CardinalOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ge=function custom(e){function cardinal(t){return new CardinalOpen(t,e)}return cardinal.tension=function(t){return custom(+t)},cardinal}(0);function point$2(t,e,n){var r,i,o=t._x1,a=t._y1,u=t._x2,c=t._y2;t._l01_a>$&&(r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),o=(o*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,a=(a*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>$&&(r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,i=3*t._l23_a*(t._l23_a+t._l12_a),u=(u*r+t._x1*t._l23_2a-e*t._l12_2a)/i,c=(c*r+t._y1*t._l23_2a-n*t._l12_2a)/i),t._context.bezierCurveTo(o,a,u,c,t._x2,t._y2)}function CatmullRom(t,e){this._context=t,this._alpha=e}CatmullRom.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var _e=function custom(e){function catmullRom(t){return e?new CatmullRom(t,e):new Cardinal(t,0)}return catmullRom.alpha=function(t){return custom(+t)},catmullRom}(.5);function CatmullRomClosed(t,e){this._context=t,this._alpha=e}CatmullRomClosed.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:point$2(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var be=function custom(e){function catmullRom(t){return e?new CatmullRomClosed(t,e):new CardinalClosed(t,0)}return catmullRom.alpha=function(t){return custom(+t)},catmullRom}(.5);function CatmullRomOpen(t,e){this._context=t,this._alpha=e}CatmullRomOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){var n,r;switch(t=+t,e=+e,this._point&&(n=this._x2-t,r=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xe=function custom(e){function catmullRom(t){return e?new CatmullRomOpen(t,e):new CardinalOpen(t,0)}return catmullRom.alpha=function(t){return custom(+t)},catmullRom}(.5);function LinearClosed(t){this._context=t}LinearClosed.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){this._point&&this._context.closePath()},point:function point(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};Gt=function linearClosed(t){return new LinearClosed(t)};function sign(t){return t<0?-1:1}function slope3(t,e,n){var r=t._x1-t._x0,e=e-t._x1,i=(t._y1-t._y0)/(r||e<0&&-0),n=(n-t._y1)/(e||r<0&&-0),t=(i*e+n*r)/(r+e);return(sign(i)+sign(n))*Math.min(Math.abs(i),Math.abs(n),.5*Math.abs(t))||0}function slope2(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function point$3(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function MonotoneX(t){this._context=t}function MonotoneY(t){this._context=new ReflectContext(t)}function ReflectContext(t){this._context=t}function Natural(t){this._context=t}function controlPoints(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(o[i[0]=0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;0<=e;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}MonotoneX.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$3(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,point$3(this,slope2(this,n=slope3(this,t,e)),n);break;default:point$3(this,this._t0,n=slope3(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(t,e){MonotoneX.prototype.point.call(this,e,t)},ReflectContext.prototype={moveTo:function moveTo(t,e){this._context.moveTo(e,t)},closePath:function closePath(){this._context.closePath()},lineTo:function lineTo(t,e){this._context.lineTo(e,t)},bezierCurveTo:function bezierCurveTo(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Natural.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=[],this._y=[]},lineEnd:function lineEnd(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=controlPoints(t),i=controlPoints(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function point(t,e){this._x.push(+t),this._y.push(+e)}};var we=function natural(t){return new Natural(t)};function Step(t,e){this._context=t,this._t=e}Step.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=this._y=NaN,this._point=0},lineEnd:function lineEnd(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};var Me=function step(t){return new Step(t,.5)};var ke=Array.prototype.slice,Se=function none(t,e){if(1<(n=t.length))for(var n,r=1,i=(a=t[e[0]]).length;r<n;++r)for(var o=a,a=t[e[r]],u=0;u<i;++u)a[u][1]+=a[u][0]=isNaN(o[u][1])?o[u][0]:o[u][1]},Ce=function none$1(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n};function stackValue(t,e){return t[e]}function M6(){var f=o([]),h=Ce,d=Se,p=stackValue;function stack(t){for(var e,n=f.apply(this,arguments),r=t.length,i=n.length,o=new Array(i),a=0;a<i;++a){for(var u,c=n[a],s=o[a]=new Array(r),l=0;l<r;++l)s[l]=u=[0,+p(t[l],c,l,t)],u.data=t[l];s.key=c}for(a=0,e=h(o);a<i;++a)o[e[a]].index=a;return d(o,e),o}return stack.keys=function(t){return arguments.length?(f="function"==typeof t?t:o(ke.call(t)),stack):f},stack.value=function(t){return arguments.length?(p="function"==typeof t?t:o(+t),stack):p},stack.order=function(t){return arguments.length?(h=null==t?Ce:"function"==typeof t?t:o(ke.call(t)),stack):h},stack.offset=function(t){return arguments.length?(d=null==t?Se:t,stack):d},stack}var Ne=function expand(t,e){if(0<(r=t.length)){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Se(t,e)}},Te=function silhouette(t,e){if(0<(n=t.length)){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}Se(t,e)}},Pe=function wiggle(t,e){if(0<(i=t.length)&&0<(r=(n=t[e[0]]).length)){for(var n,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,s=0;u<i;++u){for(var l=t[e[u]],f=l[a][1]||0,h=(f-(l[a-1][1]||0))/2,d=0;d<u;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=f,s+=h*f}n[a-1][1]+=n[a-1][0]=o,c&&(o-=s/c)}n[a-1][1]+=n[a-1][0]=o,Se(t,e)}},Ae=function ascending$1(t){var n=t.map(sum$1);return Ce(t).sort(function(t,e){return n[t]-n[e]})};function sum$1(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var Ee=function descending$2(t){return Ae(t).reverse()},Re=function insideOut(t){for(var e,n=t.length,r=t.map(sum$1),i=Ce(t).sort(function(t,e){return r[e]-r[t]}),o=0,a=0,u=[],c=[],s=0;s<n;++s)e=i[s],(o<a?(o+=r[e],u):(a+=r[e],c)).push(e);return c.reverse().concat(u)},Le=function reverse(t){return Ce(t).reverse()},Oe=function define(t,e,n){(t.prototype=e.prototype=n).constructor=t};function extend(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function Color(){}var je=1/.7,$e=/^#([0-9a-f]{3})$/,ze=/^#([0-9a-f]{6})$/,Ie=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,qe=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,De=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Fe=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Ue=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Be=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,We={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(t){var e;return t=(t+"").trim().toLowerCase(),(e=$e.exec(t))?new Rgb((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=ze.exec(t))?rgbn(parseInt(e[1],16)):(e=Ie.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=qe.exec(t))?new Rgb(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=De.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=Fe.exec(t))?rgba(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ue.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=Be.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):We.hasOwnProperty(t)?rgbn(We[t]):"transparent"===t?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,255&t,1)}function rgba(t,e,n,r){return new Rgb(t=r<=0?e=n=NaN:t,e,n,r)}function rgbConvert(t){return(t=t instanceof Color?t:color(t))?new Rgb((t=t.rgb()).r,t.g,t.b,t.opacity):new Rgb}function rgb(t,e,n,r){return 1===arguments.length?rgbConvert(t):new Rgb(t,e,n,null==r?1:r)}function Rgb(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function hsla(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,n,r)}function hsl(t,e,n,r){return 1===arguments.length?function hslConvert(t){var e,n,r,i,o,a,u,c;return t instanceof Hsl?new Hsl(t.h,t.s,t.l,t.opacity):(t=t instanceof Color?t:color(t))?t instanceof Hsl?t:(e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=NaN,c=((o=Math.max(e,n,r))+i)/2,(u=o-i)?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=0<c&&c<1?0:a,new Hsl(a,u,c,t.opacity)):new Hsl}(t):new Hsl(t,e,n,null==r?1:r)}function Hsl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function hsl2rgb(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Oe(Color,color,{displayable:function displayable(){return this.rgb().displayable()},toString:function toString(){return this.rgb()+""}}),Oe(Rgb,rgb,extend(Color,{brighter:function brighter(t){return t=null==t?je:Math.pow(je,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function darker(t){return t=null==t?.7:Math.pow(.7,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function rgb(){return this},displayable:function displayable(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function toString(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Oe(Hsl,hsl,extend(Color,{brighter:function brighter(t){return t=null==t?je:Math.pow(je,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker:function darker(t){return t=null==t?.7:Math.pow(.7,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb:function rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new Rgb(hsl2rgb(240<=t?t-240:120+t,n,e),hsl2rgb(t,n,e),hsl2rgb(t<120?240+t:t-120,n,e),this.opacity)},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ye=Math.PI/180,He=180/Math.PI,Ve=.95047,Xe=1,Ge=1.08883,Ze=4/29,Ke=6/29,Qe=3*Ke*Ke,Je=Ke*Ke*Ke;function labConvert(t){var e,n,r,i,o;return t instanceof Lab?new Lab(t.l,t.a,t.b,t.opacity):t instanceof Hcl?(e=t.h*Ye,new Lab(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)):(i=xyz2lab((.4124564*(e=rgb2xyz((t=t instanceof Rgb?t:rgbConvert(t)).r))+.3575761*(n=rgb2xyz(t.g))+.1804375*(r=rgb2xyz(t.b)))/Ve),new Lab(116*(o=xyz2lab((.2126729*e+.7151522*n+.072175*r)/Xe))-16,500*(i-o),200*(o-xyz2lab((.0193339*e+.119192*n+.9503041*r)/Ge)),t.opacity))}function lab(t,e,n,r){return 1===arguments.length?labConvert(t):new Lab(t,e,n,null==r?1:r)}function Lab(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function xyz2lab(t){return Je<t?Math.pow(t,1/3):t/Qe+Ze}function lab2xyz(t){return Ke<t?t*t*t:Qe*(t-Ze)}function xyz2rgb(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rgb2xyz(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hcl(t,e,n,r){return 1===arguments.length?function hclConvert(t){if(t instanceof Hcl)return new Hcl(t.h,t.c,t.l,t.opacity);t instanceof Lab||(t=labConvert(t));var e=Math.atan2(t.b,t.a)*He;return new Hcl(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Hcl(t,e,n,null==r?1:r)}function Hcl(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Oe(Lab,lab,extend(Color,{brighter:function brighter(t){return new Lab(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function darker(t){return new Lab(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200,t=Xe*lab2xyz(t);return new Rgb(xyz2rgb(3.2404542*(e=Ve*lab2xyz(e))-1.5371385*t-.4985314*(n=Ge*lab2xyz(n))),xyz2rgb(-.969266*e+1.8760108*t+.041556*n),xyz2rgb(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Oe(Hcl,hcl,extend(Color,{brighter:function brighter(t){return new Hcl(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function darker(t){return new Hcl(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function rgb(){return labConvert(this).rgb()}}));var tn=1.78277,en=-.29227,nn=-.90649,rn=1.97294,an=rn*nn,un=rn*tn,cn=tn*en- -.14861*nn;function cubehelix(t,e,n,r){return 1===arguments.length?function cubehelixConvert(t){var e,n,r,i;return t instanceof Cubehelix?new Cubehelix(t.h,t.s,t.l,t.opacity):(e=(t=t instanceof Rgb?t:rgbConvert(t)).r/255,n=t.g/255,i=t.b/255,i=(rn*(n-(e=(cn*i+an*e-un*n)/(cn+an-un)))-en*(n=i-e))/nn,new Cubehelix((i=(r=Math.sqrt(i*i+n*n)/(rn*e*(1-e)))?Math.atan2(i,n)*He-120:NaN)<0?i+360:i,r,e,t.opacity))}(t):new Cubehelix(t,e,n,null==r?1:r)}function Cubehelix(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function basis$1(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Oe(Cubehelix,cubehelix,extend(Color,{brighter:function brighter(t){return t=null==t?je:Math.pow(je,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},darker:function darker(t){return t=null==t?.7:Math.pow(.7,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},rgb:function rgb(){var t=isNaN(this.h)?0:(this.h+120)*Ye,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),t=Math.sin(t);return new Rgb(255*(e+n*(-.14861*r+tn*t)),255*(e+n*(en*r+nn*t)),255*(e+rn*r*n),this.opacity)}}));var Oe=function basis$2(a){var u=a.length-1;return function(t){var e=t<=0?t=0:1<=t?u-(t=1):Math.floor(t*u),n=a[e],r=a[e+1],i=0<e?a[e-1]:2*n-r,o=e<u-1?a[e+2]:2*r-n;return basis$1((t-e/u)*u,i,n,r,o)}},sn=function basisClosed$1(a){var u=a.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*u),n=a[(e+u-1)%u],r=a[e%u],i=a[(e+1)%u],o=a[(e+2)%u];return basis$1((t-e/u)*u,n,r,i,o)}},ln=function constant$3(t){return function(){return t}};function linear$1(e,n){return function(t){return e+t*n}}function hue(t,e){var n=e-t;return n?linear$1(t,180<n||n<-180?n-360*Math.round(n/360):n):ln(isNaN(t)?e:t)}function gamma(n){return 1==(n=+n)?nogamma:function(t,e){return e-t?function exponential$1(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(t){return Math.pow(e+t*n,r)}}(t,e,n):ln(isNaN(t)?e:t)}}function nogamma(t,e){var n=e-t;return n?linear$1(t,n):ln(isNaN(t)?e:t)}var fn=function rgbGamma(t){var a=gamma(t);function rgb$$1(e,t){var n=a((e=rgb(e)).r,(t=rgb(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=a(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return rgb$$1.gamma=rgbGamma,rgb$$1}(1);function rgbSpline(u){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a=0;a<n;++a)e=rgb(t[a]),r[a]=e.r||0,i[a]=e.g||0,o[a]=e.b||0;return r=u(r),i=u(i),o=u(o),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e+""}}}var hn=rgbSpline(Oe),dn=rgbSpline(sn),pn=function array$1(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(n),o=new Array(n),a=0;a<r;++a)i[a]=kn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}},yn=function date(e,n){var r=new Date;return n-=e=+e,function(t){return r.setTime(e+n*t),r}},w=function interpolateNumber(e,n){return n-=e=+e,function(t){return e+n*t}},vn=function object(t,e){var n,r={},i={};for(n in null!==t&&"object"===_typeof(t)||(t={}),e=null!==e&&"object"===_typeof(e)?e:{})n in t?r[n]=kn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gn=new RegExp(mn.source,"g");var _n,bn,xn,wn,Mn=function interpolateString(t,r){var e,n,i,o=mn.lastIndex=gn.lastIndex=0,a=-1,u=[],c=[];for(t+="",r+="";(e=mn.exec(t))&&(n=gn.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(n=n[0])?u[a]?u[a]+=n:u[++a]=n:(u[++a]=null,c.push({i:a,x:w(e,n)})),o=gn.lastIndex;return o<r.length&&(i=r.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function one(e){return function(t){return e(t)+""}}(c[0].x):function zero(t){return function(){return t}}(r):(r=c.length,function(t){for(var e,n=0;n<r;++n)u[(e=c[n]).i]=e.x(t);return u.join("")})},kn=function interpolate(t,e){var n=_typeof(e);return null==e||"boolean"===n?ln(e):("number"===n?w:"string"===n?(n=color(e))?(e=n,fn):Mn:e instanceof color?fn:e instanceof Date?yn:Array.isArray(e)?pn:isNaN(e)?vn:w)(t,e)},Sn=function interpolateRound(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}},Cn=180/Math.PI,Nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Tn=function decompose(t,e,n,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Cn,skewX:Math.atan(c)*Cn,scaleX:a,scaleY:u}};function interpolateTransform(n,u,c,a){function pop(t){return t.length?t.pop()+" ":""}return function(t,e){var i=[],o=[];return t=n(t),e=n(e),function translate(t,e,n,r,i,o){var a;t!==n||e!==r?(a=i.push("translate(",null,u,null,c),o.push({i:a-4,x:w(t,n)},{i:a-2,x:w(e,r)})):(n||r)&&i.push("translate("+n+u+r+c)}(t.translateX,t.translateY,e.translateX,e.translateY,i,o),function rotate(t,e,n,r){t!==e?(180<t-e?e+=360:180<e-t&&(t+=360),r.push({i:n.push(pop(n)+"rotate(",null,a)-2,x:w(t,e)})):e&&n.push(pop(n)+"rotate("+e+a)}(t.rotate,e.rotate,i,o),function skewX(t,e,n,r){t!==e?r.push({i:n.push(pop(n)+"skewX(",null,a)-2,x:w(t,e)}):e&&n.push(pop(n)+"skewX("+e+a)}(t.skewX,e.skewX,i,o),function scale(t,e,n,r,i,o){var a;t!==n||e!==r?(a=i.push(pop(i)+"scale(",null,",",null,")"),o.push({i:a-4,x:w(t,n)},{i:a-2,x:w(e,r)})):1===n&&1===r||i.push(pop(i)+"scale("+n+","+r+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,i,o),t=e=null,function(t){for(var e,n=-1,r=o.length;++n<r;)i[(e=o[n]).i]=e.x(t);return i.join("")}}}var Pn=interpolateTransform(function parseCss(t){return"none"===t?Nn:(_n||(_n=document.createElement("DIV"),bn=document.documentElement,xn=document.defaultView),_n.style.transform=t,t=xn.getComputedStyle(bn.appendChild(_n),null).getPropertyValue("transform"),bn.removeChild(_n),t=t.slice(7,-1).split(","),Tn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),An=interpolateTransform(function parseSvg(t){return null!=t&&((wn=wn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),t=wn.transform.baseVal.consolidate())?(t=t.matrix,Tn(t.a,t.b,t.c,t.d,t.e,t.f)):Nn},", ",")",")"),En=Math.SQRT2;function cosh(t){return((t=Math.exp(t))+1/t)/2}var Rn=function interpolateZoom(t,e){var r,o,a,u=t[0],c=t[1],s=t[2],t=e[0],n=e[1],e=e[2],l=t-u,f=n-c,t=l*l+f*f;return(e=t<1e-12?(a=Math.log(e/s)/En,function i(t){return[u+t*l,c+t*f,s*Math.exp(En*t*a)]}):(r=Math.sqrt(t),n=(e*e-s*s+4*t)/(2*s*2*r),t=(e*e-s*s-4*t)/(2*e*2*r),o=Math.log(Math.sqrt(n*n+1)-n),a=(Math.log(Math.sqrt(t*t+1)-t)-o)/En,function i(t){var t=t*a,e=cosh(o),n=s/(2*r)*(e*function tanh(t){return((t=Math.exp(2*t))-1)/(t+1)}(En*t+o)-function sinh(t){return((t=Math.exp(t))-1/t)/2}(o));return[u+n*l,c+n*f,s*e/cosh(En*t+o)]})).duration=1e3*a,e};function hsl$1(a){return function(e,t){var n=a((e=hsl(e)).h,(t=hsl(t)).h),r=nogamma(e.s,t.s),i=nogamma(e.l,t.l),o=nogamma(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(t),e.opacity=o(t),e+""}}}var Ln=hsl$1(hue),On=hsl$1(nogamma);function hcl$1(a){return function(e,t){var n=a((e=hcl(e)).h,(t=hcl(t)).h),r=nogamma(e.c,t.c),i=nogamma(e.l,t.l),o=nogamma(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=o(t),e+""}}}var jn=hcl$1(hue),$n=hcl$1(nogamma);function cubehelix$1(u){return function cubehelixGamma(a){function cubehelix$$1(e,t){var n=u((e=cubehelix(e)).h,(t=cubehelix(t)).h),r=nogamma(e.s,t.s),i=nogamma(e.l,t.l),o=nogamma(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(Math.pow(t,a)),e.opacity=o(t),e+""}}return a=+a,cubehelix$$1.gamma=cubehelixGamma,cubehelix$$1}(1)}var zn=cubehelix$1(hue),In=cubehelix$1(nogamma),qn=function quantize(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Dn={value:function value(){}};function dispatch(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Dispatch(r)}function Dispatch(t){this._=t}function set$2(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Dn,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function objectConverter(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function on(t,e){var n,r=this._,i=function parseTypenames(t,r){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=set$2(r[n],t.name,e);else if(null==e)for(n in r)r[n]=set$2(r[n],t.name,null);return this}for(;++o<a;)if(n=(n=(t=i[o]).type)&&function get(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(r[n],t.name))return n},copy:function copy(){var t,copy={},e=this._;for(t in e)copy[t]=e[t].slice();return new Dispatch(copy)},call:function call(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function apply(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function q7(r,t){var i,o,a,u,c=dispatch("beforesend","progress","load","error"),s=map$1(),l=new XMLHttpRequest,f=null,h=null,d=0;function respond(t){var e,n=l.status;if(!n&&function hasResponse(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||200<=n&&n<300||304===n){if(a)try{e=a.call(i,l)}catch(t){return void c.call("error",i,t)}else e=l;c.call("load",i,e)}else c.call("error",i,t)}if("onload"in(l="undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(r)?l:new XDomainRequest)?l.onload=l.onerror=l.ontimeout=respond:l.onreadystatechange=function(t){3<l.readyState&&respond(t)},l.onprogress=function(t){c.call("progress",i,t)},i={header:function header(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),i)},mimeType:function mimeType(t){return arguments.length?(o=null==t?null:t+"",i):o},responseType:function responseType(t){return arguments.length?(u=t,i):u},timeout:function timeout(t){return arguments.length?(d=+t,i):d},user:function user(t){return arguments.length<1?f:(f=null==t?null:t+"",i)},password:function password(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},response:function response(t){return a=t,i},get:function get(t,e){return i.send("GET",t,e)},post:function post(t,e){return i.send("POST",t,e)},send:function send(t,e,n){return l.open(t,r,!0,f,h),null==o||s.has("accept")||s.set("accept",o+",*/*"),l.setRequestHeader&&s.each(function(t,e){l.setRequestHeader(e,t)}),null!=o&&l.overrideMimeType&&l.overrideMimeType(o),null!=u&&(l.responseType=u),0<d&&(l.timeout=d),null==n&&"function"==typeof e&&(n=e,e=null),null!=(n=null!=n&&1===n.length?function fixCallback(n){return function(t,e){n(null==t?e:null)}}(n):n)&&i.on("error",n).on("load",function(t){n(null,t)}),c.call("beforesend",i,l),l.send(null==e?null:e),i},abort:function abort(){return l.abort(),i},on:function on(){var t=c.on.apply(c,arguments);return t===c?i:t}},null==t)return i;if("function"!=typeof t)throw new Error("invalid callback: "+t);return i.get(t)}var Fn=function dsv(r){var e=new RegExp('["'+r+"\n]"),f=r.charCodeAt(0);function parseRows(i,t){var e,o,a={},u={},n=[],c=i.length,s=0,r=0;function token(){if(c<=s)return u;if(o)return o=!1,a;var t=s;if(34===i.charCodeAt(t)){for(var e=t;e++<c;)if(34===i.charCodeAt(e)){if(34!==i.charCodeAt(e+1))break;++e}return s=e+2,13===(n=i.charCodeAt(e+1))?(o=!0,10===i.charCodeAt(e+2)&&++s):10===n&&(o=!0),i.slice(t+1,e).replace(/""/g,'"')}for(;s<c;){var n,r=1;if(10===(n=i.charCodeAt(s++)))o=!0;else if(13===n)o=!0,10===i.charCodeAt(s)&&(++s,++r);else if(n!==f)continue;return i.slice(t,s-r)}return i.slice(t)}for(;(e=token())!==u;){for(var l=[];e!==a&&e!==u;)l.push(e),e=token();t&&null==(l=t(l,r++))||n.push(l)}return n}function formatRow(t){return t.map(formatValue).join(r)}function formatValue(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:function parse(t,n){var r,i;return(t=parseRows(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?function customConverter(n,r){var i=objectConverter(n);return function(t,e){return r(i(t),e,n)}}(t,n):objectConverter(t)})).columns=i,t},parseRows:parseRows,format:function format(t,n){return[(n=null==n?function inferColumns(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}(t):n).map(formatValue).join(r)].concat(t.map(function(e){return n.map(function(t){return formatValue(e[t])}).join(r)})).join("\n")},formatRows:function formatRows(t){return t.map(formatRow).join("\n")}}},Un=Fn(","),Bn=Un.parse,Wn=Un.parseRows,Yn=Un.format,Un=Un.formatRows,Hn=Fn("\t"),Vn=Hn.parse,Xn=Hn.parseRows,Gn=Hn.format,Hn=Hn.formatRows;var Zn=function type(n,r){return function(t,e){t=q7(t).mimeType(n).response(r);if(null==e)return t;if("function"!=typeof e)throw new Error("invalid callback: "+e);return t.get(e)}},Kn=Zn("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),Qn=Zn("application/json",function(t){return JSON.parse(t.responseText)}),tr=Zn("text/plain",function(t){return t.responseText}),Zn=Zn("application/xml",function(t){t=t.responseXML;if(t)return t;throw new Error("parse error")}),er=function dsv$1(i,o){return function(t,e,n){arguments.length<3&&(n=e,e=null);var r=q7(t).mimeType(i);return r.row=function(t){return arguments.length?r.response(function responseOf(e,n){return function(t){return e(t.responseText,n)}}(o,e=t)):e},r.row(e),n?r.get(n):r}};var nr,rr,ir=er("text/csv",Bn),er=er("text/tab-separated-values",Vn),or=0,ar=0,ur=0,cr=1e3,sr=0,lr=0,fr=0,hr="object"===("undefined"==typeof performance?"undefined":_typeof(performance))&&performance.now?performance:Date,dr="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};function now(){return lr||(dr(clearNow),lr=hr.now()+fr)}function clearNow(){lr=0}function Timer(){this._call=this._time=this._next=null}function timer(t,e,n){var r=new Timer;return r.restart(t,e,n),r}function timerFlush(){now(),++or;for(var t,e=nr;e;)0<=(t=lr-e._time)&&e._call.call(null,t),e=e._next;--or}function wake(){lr=(sr=hr.now())+fr,or=ar=0;try{timerFlush()}finally{or=0,!function nap(){var t,e,n=nr,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:nr=e);rr=t,sleep(r)}(),lr=0}}function poke$1(){var t=hr.now(),e=t-sr;cr<e&&(fr-=e,sr=t)}function sleep(t){var e;or||(ar=ar&&clearTimeout(ar),24<(e=t-lr)?(t<1/0&&(ar=setTimeout(wake,e)),ur=ur&&clearInterval(ur)):(ur=ur||setInterval(poke$1,cr),or=1,dr(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function restart(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?now():+n)+(null==e?0:+e),this._next||rr===this||(rr?rr._next=this:nr=this,rr=this),this._call=t,this._time=n,sleep()},stop:function stop(){this._call&&(this._call=null,this._time=1/0,sleep())}};var pr=function timeout$1(e,n,t){var r=new Timer;return n=null==n?0:+n,r.restart(function(t){r.stop(),e(t+n)},n,t),r},yr=function interval$1(e,n,r){var i=new Timer,o=n;return null==n?i.restart(e,n,r):(n=+n,r=null==r?now():+r,i.restart(function tick(t){t+=o,i.restart(tick,o+=n,r),e(t)},n,r)),i},vr=new Date,mr=new Date;function newInterval(i,o,n,r){function interval(t){return i(t=new Date(+t)),t}return(interval.floor=interval).ceil=function(t){return i(t=new Date(t-1)),o(t,1),i(t),t},interval.round=function(t){var e=interval(t),n=interval.ceil(t);return t-e<n-t?e:n},interval.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},interval.range=function(t,e,n){var r=[];if(t=interval.ceil(t),n=null==n?1:Math.floor(n),t<e&&0<n)for(;r.push(new Date(+t)),o(t,n),i(t),t<e;);return r},interval.filter=function(n){return newInterval(function(t){if(t<=t)for(;i(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(interval.count=function(t,e){return vr.setTime(+t),mr.setTime(+e),i(vr),i(mr),Math.floor(n(vr,mr))},interval.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?interval.filter(r?function(t){return r(t)%e==0}:function(t){return interval.count(0,t)%e==0}):interval:null}),interval}var gr=newInterval(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t}),_r=(gr.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?newInterval(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):gr:null},gr.range),br=6e4,xr=36e5,wr=newInterval(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Mr=wr.range,kr=newInterval(function(t){t.setTime(Math.floor(t/br)*br)},function(t,e){t.setTime(+t+e*br)},function(t,e){return(e-t)/br},function(t){return t.getMinutes()}),Sr=kr.range,Cr=newInterval(function(t){var e=t.getTimezoneOffset()*br%xr;e<0&&(e+=xr),t.setTime(Math.floor((+t-e)/xr)*xr+e)},function(t,e){t.setTime(+t+e*xr)},function(t,e){return(e-t)/xr},function(t){return t.getHours()}),Nr=Cr.range,Tr=newInterval(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*br)/864e5},function(t){return t.getDate()-1}),Pr=Tr.range;function weekday(e){return newInterval(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*br)/6048e5})}var Ar=weekday(0),Er=weekday(1),Rr=weekday(2),Lr=weekday(3),Or=weekday(4),jr=weekday(5),$r=weekday(6),zr=Ar.range,Ir=Er.range,qr=Rr.range,Dr=Lr.range,Fr=Or.range,Ur=jr.range,Br=$r.range,Wr=newInterval(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Yr=Wr.range,Hr=newInterval(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}),Vr=(Hr.every=function(n){return isFinite(n=Math.floor(n))&&0<n?newInterval(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null},Hr.range),Xr=newInterval(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*br)},function(t,e){return(e-t)/br},function(t){return t.getUTCMinutes()}),Gr=Xr.range,Zr=newInterval(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*xr)},function(t,e){return(e-t)/xr},function(t){return t.getUTCHours()}),Kr=Zr.range,Qr=newInterval(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Jr=Qr.range;function utcWeekday(e){return newInterval(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var ti,ei=utcWeekday(0),ni=utcWeekday(1),ri=utcWeekday(2),ii=utcWeekday(3),oi=utcWeekday(4),ai=utcWeekday(5),ui=utcWeekday(6),ci=ei.range,si=ni.range,li=ri.range,fi=ii.range,hi=oi.range,di=ai.range,pi=ui.range,yi=newInterval(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),vi=yi.range,mi=newInterval(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}),gi=(mi.every=function(n){return isFinite(n=Math.floor(n))&&0<n?newInterval(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null},mi.range),_i=function formatDecimal(t,e){var n;return(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:[1<(n=t.slice(0,e)).length?n[0]+n.slice(2):n,+t.slice(e+1)]},bi=function exponent$1(t){return(t=_i(Math.abs(t)))?t[1]:NaN},xi=function formatGroup(u,c){return function(t,e){for(var n=t.length,r=[],i=0,o=u[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=u[i=(i+1)%u.length];return r.reverse().join(c)}},wi=function formatRounded(t,e){var n,e=_i(t,e);return e?(n=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+n:n.length>e+1?n.slice(0,e+1)+"."+n.slice(e+1):n+new Array(e-n.length+2).join("0")):t+""},Mi={"":function formatDefault(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:0<o&&(o=0)}return 0<o?t.slice(0,o)+t.slice(n+1):t},"%":function _(t,e){return(100*t).toFixed(e)},b:function b(t){return Math.round(t).toString(2)},c:function c(t){return t+""},d:function d(t){return Math.round(t).toString(10)},e:function e(t,n){return t.toExponential(n)},f:function f(t,e){return t.toFixed(e)},g:function g(t,e){return t.toPrecision(e)},o:function o(t){return Math.round(t).toString(8)},p:function p(t,e){return wi(100*t,e)},r:wi,s:function formatPrefixAuto(t,e){var n,r,i=_i(t,e);return i?(n=i[0],(i=(i=i[1])-(ti=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1)===(r=n.length)?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+_i(t,Math.max(0,e+i-1))[0]):t+""},X:function X(t){return Math.round(t).toString(16).toUpperCase()},x:function x(t){return Math.round(t).toString(16)}},ki=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,Si=function formatSpecifier(t){return new FormatSpecifier(t)};function FormatSpecifier(t){if(!(c=ki.exec(t)))throw new Error("invalid format: "+t);var t=c[1]||" ",e=c[2]||">",n=c[3]||"-",r=c[4]||"",i=!!c[5],o=c[6]&&+c[6],a=!!c[7],u=c[8]&&+c[8].slice(1),c=c[9]||"";"n"===c?(a=!0,c="g"):Mi[c]||(c=""),(i||"0"===t&&"="===e)&&(i=!0,t="0",e="="),this.fill=t,this.align=e,this.sign=n,this.symbol=r,this.zero=i,this.width=o,this.comma=a,this.precision=u,this.type=c}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Ci=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function identity$3(t){return t}var Ni,Ti=function formatLocale(t){var x=t.grouping&&t.thousands?xi(t.grouping,t.thousands):identity$3,n=t.currency,w=t.decimal;function newFormat(t){var s=(t=Si(t)).fill,l=t.align,f=t.sign,e=t.symbol,h=t.zero,d=t.width,p=t.comma,y=t.precision,v=t.type,m="$"===e?n[0]:"#"===e&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",g="$"===e?n[1]:/[%p]/.test(v)?"%":"",_=Mi[v],b=!v||/[defgprs%]/.test(v);function format(t){var e,n,r,i=m,o=g;if("c"===v)o=_(t)+o,t="";else{var a=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=_(t,y),a)for(n=t.length,a=!(e=-1);++e<n;)if(48<(r=t.charCodeAt(e))&&r<58||"x"===v&&96<r&&r<103||"X"===v&&64<r&&r<71){a=!0;break}if(i=(a?"("===f?f:"-":"-"===f||"("===f?"":f)+i,o=o+("s"===v?Ci[8+ti/3]:"")+(a&&"("===f?")":""),b)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){o=(46===r?w+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!h&&(t=x(t,1/0));var u=i.length+t.length+o.length,c=u<d?new Array(d-u+1).join(s):"";switch(p&&h&&(t=x(c+t,c.length?d-o.length:1/0),c=""),l){case"<":return i+t+o+c;case"=":return i+c+t+o;case"^":return c.slice(0,u=c.length>>1)+i+t+o+c.slice(u)}return c+i+t+o}return y=null==y?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),format.toString=function(){return t+""},format}return{format:newFormat,formatPrefix:function formatPrefix(t,e){var n=newFormat(((t=Si(t)).type="f",t)),t=3*Math.max(-8,Math.min(8,Math.floor(bi(e)/3))),r=Math.pow(10,-t),i=Ci[8+t/3];return function(t){return n(r*t)+i}}}};function defaultLocale(t){return Ni=Ti(t),j.format=Ni.format,j.formatPrefix=Ni.formatPrefix,Ni}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Pi=function precisionFixed(t){return Math.max(0,-bi(Math.abs(t)))},Ai=function precisionPrefix(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bi(e)/3)))-bi(Math.abs(t)))},Ei=function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bi(e)-bi(t))+1};function localDate(t){var e;return 0<=t.y&&t.y<100?((e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L)).setFullYear(t.y),e):new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){var e;return 0<=t.y&&t.y<100?((e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L))).setUTCFullYear(t.y),e):new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newYear(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(t){var r=t.dateTime,i=t.date,o=t.time,e=t.periods,n=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,s=formatRe(e),l=formatLookup(e),f=formatRe(n),h=formatLookup(n),d=formatRe(a),p=formatLookup(a),y=formatRe(u),v=formatLookup(u),m=formatRe(c),g=formatLookup(c),_={a:function formatShortWeekday(t){return a[t.getDay()]},A:function formatWeekday(t){return n[t.getDay()]},b:function formatShortMonth(t){return c[t.getMonth()]},B:function formatMonth(t){return u[t.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(t){return e[+(12<=t.getHours())]},S:formatSeconds,U:formatWeekNumberSunday,w:formatWeekdayNumber,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},b={a:function formatUTCShortWeekday(t){return a[t.getUTCDay()]},A:function formatUTCWeekday(t){return n[t.getUTCDay()]},b:function formatUTCShortMonth(t){return c[t.getUTCMonth()]},B:function formatUTCMonth(t){return u[t.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(t){return e[+(12<=t.getUTCHours())]},S:formatUTCSeconds,U:formatUTCWeekNumberSunday,w:formatUTCWeekdayNumber,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},x={a:function parseShortWeekday(t,e,n){e=d.exec(e.slice(n));return e?(t.w=p[e[0].toLowerCase()],n+e[0].length):-1},A:function parseWeekday(t,e,n){e=f.exec(e.slice(n));return e?(t.w=h[e[0].toLowerCase()],n+e[0].length):-1},b:function parseShortMonth(t,e,n){e=m.exec(e.slice(n));return e?(t.m=g[e[0].toLowerCase()],n+e[0].length):-1},B:function parseMonth(t,e,n){e=y.exec(e.slice(n));return e?(t.m=v[e[0].toLowerCase()],n+e[0].length):-1},c:function parseLocaleDateTime(t,e,n){return parseSpecifier(t,r,e,n)},d:parseDayOfMonth,e:parseDayOfMonth,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(t,e,n){e=s.exec(e.slice(n));return e?(t.p=l[e[0].toLowerCase()],n+e[0].length):-1},S:parseSeconds,U:parseWeekNumberSunday,w:parseWeekdayNumber,W:parseWeekNumberMonday,x:function parseLocaleDate(t,e,n){return parseSpecifier(t,i,e,n)},X:function parseLocaleTime(t,e,n){return parseSpecifier(t,o,e,n)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(c,s){return function(t){var e,n,r,i=[],o=-1,a=0,u=c.length;for(t instanceof Date||(t=new Date(+t));++o<u;)37===c.charCodeAt(o)&&(i.push(c.slice(a,o)),null!=(n=Li[e=c.charAt(++o)])?e=c.charAt(++o):n="e"===e?" ":"0",(r=s[e])&&(e=r(t,n)),i.push(e),a=o+1);return i.push(c.slice(a,o)),i.join("")}}function newParse(n,r){return function(t){var e=newYear(1900);return parseSpecifier(e,n,t+="",0)!=t.length?null:("p"in e&&(e.H=e.H%12+12*e.p),("W"in e||"U"in e)&&("w"in e||(e.w="W"in e?1:0),t="Z"in e?utcDate(newYear(e.y)).getUTCDay():r(newYear(e.y)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(t+5)%7:e.w+7*e.U-(t+6)%7),("Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,utcDate):r)(e))}}function parseSpecifier(t,e,n,r){for(var i,o,a=0,u=e.length,c=n.length;a<u;){if(c<=r)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Li?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=newFormat(i,_),_.X=newFormat(o,_),_.c=newFormat(r,_),b.x=newFormat(i,b),b.X=newFormat(o,b),b.c=newFormat(r,b),{format:function format(t){var e=newFormat(t+="",_);return e.toString=function(){return t},e},parse:function parse(t){var e=newParse(t+="",localDate);return e.toString=function(){return t},e},utcFormat:function utcFormat(t){var e=newFormat(t+="",b);return e.toString=function(){return t},e},utcParse:function utcParse(t){var e=newParse(t,utcDate);return e.toString=function(){return t},e}}}var Ri,Li={"-":"",_:" ",0:"0"},Oi=/^\s*\d+/,ji=/^%/,$i=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function pad(t,e,n){var r=t<0?"-":"",t=(r?-t:t)+"",i=t.length;return r+(i<n?new Array(n-i+1).join(e)+t:t)}function requote(t){return t.replace($i,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function parseWeekdayNumber(t,e,n){e=Oi.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function parseWeekNumberSunday(t,e,n){e=Oi.exec(e.slice(n));return e?(t.U=+e[0],n+e[0].length):-1}function parseWeekNumberMonday(t,e,n){e=Oi.exec(e.slice(n));return e?(t.W=+e[0],n+e[0].length):-1}function parseFullYear(t,e,n){e=Oi.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function parseYear(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function parseZone(t,e,n){e=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function parseMonthNumber(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function parseDayOfMonth(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function parseDayOfYear(t,e,n){e=Oi.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function parseHour24(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function parseMinutes(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function parseSeconds(t,e,n){e=Oi.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function parseMilliseconds(t,e,n){e=Oi.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function parseLiteralPercent(t,e,n){e=ji.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function formatDayOfMonth(t,e){return pad(t.getDate(),e,2)}function formatHour24(t,e){return pad(t.getHours(),e,2)}function formatHour12(t,e){return pad(t.getHours()%12||12,e,2)}function formatDayOfYear(t,e){return pad(1+Tr.count(Hr(t),t),e,3)}function formatMilliseconds(t,e){return pad(t.getMilliseconds(),e,3)}function formatMonthNumber(t,e){return pad(t.getMonth()+1,e,2)}function formatMinutes(t,e){return pad(t.getMinutes(),e,2)}function formatSeconds(t,e){return pad(t.getSeconds(),e,2)}function formatWeekNumberSunday(t,e){return pad(Ar.count(Hr(t),t),e,2)}function formatWeekdayNumber(t){return t.getDay()}function formatWeekNumberMonday(t,e){return pad(Er.count(Hr(t),t),e,2)}function formatYear(t,e){return pad(t.getFullYear()%100,e,2)}function formatFullYear(t,e){return pad(t.getFullYear()%1e4,e,4)}function formatZone(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(t,e){return pad(t.getUTCDate(),e,2)}function formatUTCHour24(t,e){return pad(t.getUTCHours(),e,2)}function formatUTCHour12(t,e){return pad(t.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(t,e){return pad(1+Qr.count(mi(t),t),e,3)}function formatUTCMilliseconds(t,e){return pad(t.getUTCMilliseconds(),e,3)}function formatUTCMonthNumber(t,e){return pad(t.getUTCMonth()+1,e,2)}function formatUTCMinutes(t,e){return pad(t.getUTCMinutes(),e,2)}function formatUTCSeconds(t,e){return pad(t.getUTCSeconds(),e,2)}function formatUTCWeekNumberSunday(t,e){return pad(ei.count(mi(t),t),e,2)}function formatUTCWeekdayNumber(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,e){return pad(ni.count(mi(t),t),e,2)}function formatUTCYear(t,e){return pad(t.getUTCFullYear()%100,e,2)}function formatUTCFullYear(t,e){return pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function defaultLocale$1(t){return Ri=formatLocale$1(t),j.timeFormat=Ri.format,j.timeParse=Ri.parse,j.utcFormat=Ri.utcFormat,j.utcParse=Ri.utcParse,Ri}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var zi="%Y-%m-%dT%H:%M:%S.%LZ";var Ii=Date.prototype.toISOString?function formatIsoNative(t){return t.toISOString()}:j.utcFormat(zi);var zi=+new Date("2000-01-01T00:00:00.000Z")?function parseIsoNative(t){return t=new Date(t),isNaN(t)?null:t}:j.utcParse(zi),qi=Array.prototype,Di=qi.map,Fi=qi.slice,Ui={name:"implicit"};function ordinal(r){var o=map$1(),a=[],i=Ui;function scale(t){var e=t+"",n=o.get(e);if(!n){if(i!==Ui)return i;o.set(e,n=a.push(t))}return r[(n-1)%r.length]}return r=null==r?[]:Fi.call(r),scale.domain=function(t){if(!arguments.length)return a.slice();a=[],o=map$1();for(var e,n,r=-1,i=t.length;++r<i;)o.has(n=(e=t[r])+"")||o.set(n,a.push(e));return scale},scale.range=function(t){return arguments.length?(r=Fi.call(t),scale):r.slice()},scale.unknown=function(t){return arguments.length?(i=t,scale):i},scale.copy=function(){return ordinal().domain(a).range(r).unknown(i)},scale}function band(){var i,o,t=ordinal().unknown(void 0),a=t.domain,u=t.range,c=[0,1],s=!1,l=0,f=0,h=.5;function rescale(){var t=a().length,e=c[1]<c[0],n=c[+e],r=c[1-e],r=(i=(r-n)/Math.max(1,t-l+2*f),s&&(i=Math.floor(i)),n+=(r-n-i*(t-l))*h,o=i*(1-l),s&&(n=Math.round(n),o=Math.round(o)),X(t).map(function(t){return n+i*t}));return u(e?r.reverse():r)}return delete t.unknown,t.domain=function(t){return(arguments.length?(a(t),rescale):a)()},t.range=function(t){return arguments.length?(c=[+t[0],+t[1]],rescale()):c.slice()},t.rangeRound=function(t){return c=[+t[0],+t[1]],s=!0,rescale()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(t){return arguments.length?(s=!!t,rescale()):s},t.padding=function(t){return arguments.length?(l=f=Math.max(0,Math.min(1,t)),rescale()):l},t.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),rescale()):l},t.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),rescale()):f},t.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),rescale()):h},t.copy=function(){return band().domain(a()).range(c).round(s).paddingInner(l).paddingOuter(f).align(h)},rescale()}var Bi=function constant$4(t){return function(){return t}},Wi=function number$1(t){return+t},Yi=[0,1];function deinterpolateLinear(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:Bi(n)}function bimap(t,e,n,r){var i=t[0],t=t[1],o=e[0],e=e[1],o=t<i?(i=n(t,i),r(e,o)):(i=n(i,t),r(o,e));return function(t){return o(i(t))}}function polymap(n,t,e,r){var i=Math.min(n.length,t.length)-1,o=new Array(i),a=new Array(i),u=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<i;)o[u]=e(n[u],n[u+1]),a[u]=r(t[u],t[u+1]);return function(t){var e=_(n,t,1,i)-1;return a[e](o[e](t))}}function copy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function continuous(e,n){var r,i,o,a=Yi,u=Yi,c=kn,s=!1;function rescale(){return r=2<Math.min(a.length,u.length)?polymap:bimap,i=o=null,scale}function scale(t){return(i=i||r(a,u,s?function deinterpolateClamp(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:n<=t?1:r(t)}}}(e):e,c))(+t)}return scale.invert=function(t){return(o=o||r(u,a,deinterpolateLinear,s?function reinterpolateClamp(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:1<=t?n:r(t)}}}(n):n))(+t)},scale.domain=function(t){return arguments.length?(a=Di.call(t,Wi),rescale()):a.slice()},scale.range=function(t){return arguments.length?(u=Fi.call(t),rescale()):u.slice()},scale.rangeRound=function(t){return u=Fi.call(t),c=Sn,rescale()},scale.clamp=function(t){return arguments.length?(s=!!t,rescale()):s},scale.interpolate=function(t){return arguments.length?(c=t,rescale()):c},rescale()}var Hi=function tickFormat(t,e,n){var r,i=t[0],o=t[t.length-1],a=tickStep(i,o,null==e?10:e);switch((n=Si(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=Ai(a,u))||(n.precision=r),j.formatPrefix(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=Ei(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Pi(a))||(n.precision=r-2*("%"===n.type))}return j.format(n)};function linearish(a){var u=a.domain;return a.ticks=function(t){var e=u();return Q(e[0],e[e.length-1],null==t?10:t)},a.tickFormat=function(t,e){return Hi(u(),t,e)},a.nice=function(t){var e=u(),n=e.length-1,t=null==t?10:t,r=e[0],i=e[n],o=tickStep(r,i,t);return o&&(o=tickStep(Math.floor(r/o)*o,Math.ceil(i/o)*o,t),e[0]=Math.floor(r/o)*o,e[n]=Math.ceil(i/o)*o,u(e)),a},a}var Vi=function nice(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function deinterpolate(e,n){return(n=Math.log(n/e))?function(t){return Math.log(t/e)/n}:Bi(n)}function reinterpolate(e,n){return e<0?function(t){return-Math.pow(-n,t)*Math.pow(-e,1-t)}:function(t){return Math.pow(n,t)*Math.pow(e,1-t)}}function pow10(t){return isFinite(t)?+("1e"+t):t<0?0:t}function powp(e){return 10===e?pow10:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function logp(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function reflect(e){return function(t){return-e(-t)}}function raise(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function pow(){var r=1,t=continuous(function deinterpolate(e,n){return(n=raise(n,r)-(e=raise(e,r)))?function(t){return(raise(t,r)-e)/n}:Bi(n)},function reinterpolate(e,n){return n=raise(n,r)-(e=raise(e,r)),function(t){return raise(e+n*t,1/r)}}),e=t.domain;return t.exponent=function(t){return arguments.length?(r=+t,e(e())):r},t.copy=function(){return copy(t,pow().exponent(r))},linearish(t)}var Xi=1e3,Gi=60*Xi,Zi=60*Gi,Ki=24*Zi,Qi=7*Ki,Ji=30*Ki,to=365*Ki;function date$1(t){return new Date(t)}function number$2(t){return t instanceof Date?+t:+new Date(+t)}function calendar(a,e,n,r,i,o,u,c,s){var l=continuous(deinterpolateLinear,w),f=l.invert,h=l.domain,d=s(".%L"),p=s(":%S"),y=s("%I:%M"),v=s("%I %p"),m=s("%a %d"),g=s("%b %d"),_=s("%B"),b=s("%Y"),x=[[u,1,Xi],[u,5,5*Xi],[u,15,15*Xi],[u,30,30*Xi],[o,1,Gi],[o,5,5*Gi],[o,15,15*Gi],[o,30,30*Gi],[i,1,Zi],[i,3,3*Zi],[i,6,6*Zi],[i,12,12*Zi],[r,1,Ki],[r,2,2*Ki],[n,1,Qi],[e,1,Ji],[e,3,3*Ji],[a,1,to]];function tickFormat(t){return(u(t)<t?d:o(t)<t?p:i(t)<t?y:r(t)<t?v:e(t)<t?n(t)<t?m:g:a(t)<t?_:b)(t)}function tickInterval(t,e,n,r){var i,o;return"number"==typeof(t=null==t?10:t)&&(i=Math.abs(n-e)/t,t=(o=q(function(t){return t[2]}).right(x,i))===x.length?(r=tickStep(e/to,n/to,t),a):o?(r=(o=x[i/x[o-1][2]<x[o][2]/i?o-1:o])[1],o[0]):(r=tickStep(e,n,t),c)),null==r?t:t.every(r)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Di.call(t,number$2)):h().map(date$1)},l.ticks=function(t,e){var n,r=h(),i=r[0],r=r[r.length-1],o=r<i;return o&&(n=i,i=r,r=n),n=(n=tickInterval(t,i,r,e))?n.range(i,r+1):[],o?n.reverse():n},l.tickFormat=function(t,e){return null==e?tickFormat:s(e)},l.nice=function(t,e){var n=h();return(t=tickInterval(t,n[0],n[n.length-1],e))?h(Vi(n,t)):l},l.copy=function(){return copy(l,calendar(a,e,n,r,i,o,u,c,s))},l}var qi=function time(){return calendar(Hr,Wr,Ar,Tr,Cr,kr,wr,gr,j.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},eo=function utcTime(){return calendar(mi,yi,ei,Qr,Zr,Xr,wr,gr,j.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},no=function colors(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},ro=no("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),io=no("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),oo=no("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ao=no("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),uo=In(cubehelix(300,.5,0),cubehelix(-240,.5,1)),co=In(cubehelix(-100,.75,.35),cubehelix(80,1.5,.8)),so=In(cubehelix(260,.75,.35),cubehelix(80,1.5,.8)),lo=cubehelix(),fo=function rainbow$1(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return lo.h=360*t-100,lo.s=1.5-1.5*e,lo.l=.8-.9*e,lo+""};function ramp(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var ho=ramp(no("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),po=ramp(no("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),yo=ramp(no("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),no=ramp(no("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var vo="http://www.w3.org/1999/xhtml",mo={svg:"http://www.w3.org/2000/svg",xhtml:vo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},go=function namespace(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),mo.hasOwnProperty(e)?{space:mo[e],local:t}:t};var _o=function creator(t){t=go(t);return(t.local?function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function creatorInherit(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===vo&&t.documentElement.namespaceURI===vo?t.createElement(n):t.createElementNS(e,n)}})(t)},bo=0;function local(){return new Local}function Local(){this._="@"+(++bo).toString(36)}Local.prototype=local.prototype={constructor:Local,get:function get(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function set(t,e){return t[this._]=e},remove:function remove(t){return this._ in t&&delete t[this._]},toString:function toString(){return this._}};var xo,wo=function matcher(t){return function(){return this.matches(t)}},Mo=("undefined"==typeof document||(So=document.documentElement).matches||(xo=So.webkitMatchesSelector||So.msMatchesSelector||So.mozMatchesSelector||So.oMatchesSelector,wo=function matcher(t){return function(){return xo.call(this,t)}}),wo),ko={};function filterContextListener(n,t,e){return n=contextListener(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function contextListener(n,r,i){return function(t){var e=j.event;j.event=t;try{n.call(this,this.__data__,r,i)}finally{j.event=e}}}function onRemove(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function onAdd(c,s,l){var f=ko.hasOwnProperty(c.type)?filterContextListener:contextListener;return function(t,e,n){var r,i=this.__on,o=f(s,e,n);if(i)for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=l),void(r.value=s);this.addEventListener(c.type,o,l),r={type:c.type,name:c.name,value:s,listener:o,capture:l},i?i.push(r):this.__on=[r]}}j.event=null,"undefined"==typeof document||"onmouseenter"in document.documentElement||(ko={mouseenter:"mouseover",mouseleave:"mouseout"});var So=function selection_on(t,e,n){var r,i,o=function parseTypenames$1(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?onAdd:onRemove,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var c,s=0,l=u.length;s<l;++s)for(r=0,c=u[s];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value};function customEvent(t,e,n,r){var i=j.event;t.sourceEvent=j.event,j.event=t;try{return e.apply(n,r)}finally{j.event=i}}var Co=function sourceEvent(){for(var t,e=j.event;t=e.sourceEvent;)e=t;return e},No=function point$5(t,e){var n=t.ownerSVGElement||t;return n.createSVGPoint?((n=n.createSVGPoint()).x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]):(n=t.getBoundingClientRect(),[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop])},To=function mouse(t){var e=Co();return e.changedTouches&&(e=e.changedTouches[0]),No(t,e)};function none$2(){}var Po=function selector(t){return null==t?none$2:function(){return this.querySelector(t)}},wo=function selection_select(t){"function"!=typeof t&&(t=Po(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],c=u.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=u[l])&&(a=t.call(o,o.__data__,l,u))&&("__data__"in o&&(a.__data__=o.__data__),s[l]=a);return new Selection(r,this._parents)};function empty(){return[]}var Ao=function selectorAll(t){return null==t?empty:function(){return this.querySelectorAll(t)}},Eo=function selection_selectAll(t){"function"!=typeof t&&(t=Ao(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],c=u.length,s=0;s<c;++s)(a=u[s])&&(r.push(t.call(a,a.__data__,s,u)),i.push(a));return new Selection(r,i)},Ro=function selection_filter(t){"function"!=typeof t&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new Selection(r,this._parents)},Lo=function sparse(t){return new Array(t.length)},Oo=function selection_enter(){return new Selection(this._enter||this._groups.map(Lo),this._parents)};function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function appendChild(t){return this._parent.insertBefore(t,this._next)},insertBefore:function insertBefore(t,e){return this._parent.insertBefore(t,e)},querySelector:function querySelector(t){return this._parent.querySelector(t)},querySelectorAll:function querySelectorAll(t){return this._parent.querySelectorAll(t)}};var jo=function constant$5(t){return function(){return t}},$o="$";function bindIndex(t,e,n,r,i,o){for(var a,u=0,c=e.length,s=o.length;u<s;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new EnterNode(t,o[u]);for(;u<c;++u)(a=e[u])&&(i[u]=a)}function bindKey(t,e,n,r,i,o,a){for(var u,c,s={},l=e.length,f=o.length,h=new Array(l),d=0;d<l;++d)(u=e[d])&&(h[d]=c=$o+a.call(u,u.__data__,d,e),c in s?i[d]=u:s[c]=u);for(d=0;d<f;++d)(u=s[c=$o+a.call(t,o[d],d,o)])?((r[d]=u).__data__=o[d],s[c]=null):n[d]=new EnterNode(t,o[d]);for(d=0;d<l;++d)(u=e[d])&&s[h[d]]===u&&(i[d]=u)}var zo=function selection_data(t,e){if(!t)return d=new Array(this.size()),s=-1,this.each(function(t){d[++s]=t}),d;var n=e?bindKey:bindIndex,r=this._parents,i=this._groups;"function"!=typeof t&&(t=jo(t));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,d=t.call(l,l&&l.__data__,s,r),p=d.length,y=u[s]=new Array(p),v=a[s]=new Array(p);n(l,f,y,v,c[s]=new Array(h),d,e);for(var m,g,_=0,b=0;_<p;++_)if(m=y[_]){for(b<=_&&(b=_+1);!(g=v[b])&&++b<p;);m._next=g||null}}return(a=new Selection(a,r))._enter=u,a._exit=c,a},Io=function selection_exit(){return new Selection(this._exit||this._groups.map(Lo),this._parents)},qo=function selection_merge(t){for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),o=new Array(r),a=0;a<i;++a)for(var u,c=e[a],s=n[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=c[h]||s[h])&&(f[h]=u);for(;a<r;++a)o[a]=e[a];return new Selection(o,this._parents)},Do=function selection_order(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Fo=function selection_sort(n){function compareNode(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||ascending$2;for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i){for(var o,a=t[i],u=a.length,c=r[i]=new Array(u),s=0;s<u;++s)(o=a[s])&&(c[s]=o);c.sort(compareNode)}return new Selection(r,this._parents).order()};function ascending$2(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var Uo=function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Bo=function selection_nodes(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Wo=function selection_node(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},Yo=function selection_size(){var t=0;return this.each(function(){++t}),t},Ho=function selection_empty(){return!this.node()},Vo=function selection_each(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this};var Xo=function selection_attr(t,e){var n,t=go(t);return arguments.length<2?(n=this.node(),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)):this.each((null==e?t.local?function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function attrRemove(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?t.local?function attrFunctionNS(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function attrFunction(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:t.local?function attrConstantNS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function attrConstant(t,e){return function(){this.setAttribute(t,e)}})(t,e))},Go=function window(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};var Zo=function selection_style(t,e,n){return 1<arguments.length?this.each((null==e?function styleRemove(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function styleFunction(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function styleConstant(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):Go(e=this.node()).getComputedStyle(e,null).getPropertyValue(t)};var Ko=function selection_property(t,e){return 1<arguments.length?this.each((null==e?function propertyRemove(t){return function(){delete this[t]}}:"function"==typeof e?function propertyFunction(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function propertyConstant(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]};function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}function classedAdd(t,e){for(var n=classList(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function classedRemove(t,e){for(var n=classList(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function textRemove(){this.textContent=""}function htmlRemove(){this.innerHTML=""}function raise$1(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function dispatchEvent(t,e,n){var r=Go(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}ClassList.prototype={add:function add(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function remove(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function contains(t){return 0<=this._names.indexOf(t)}};var Qo=[null];function Selection(t,e){this._groups=t,this._parents=e}function selection(){return new Selection([[document.documentElement]],Qo)}Selection.prototype=selection.prototype={constructor:Selection,select:wo,selectAll:Eo,filter:Ro,data:zo,enter:Oo,exit:Io,merge:qo,order:Do,sort:Fo,call:Uo,nodes:Bo,node:Wo,size:Yo,empty:Ho,each:Vo,attr:Xo,style:Zo,property:Ko,classed:function selection_classed(t,e){var n=classArray(t+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}:e?function classedTrue(t){return function(){classedAdd(this,t)}}:function classedFalse(t){return function(){classedRemove(this,t)}})(n,e))},text:function selection_text(t){return arguments.length?this.each(null==t?textRemove:("function"==typeof t?function textFunction(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function textConstant(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function selection_html(t){return arguments.length?this.each(null==t?htmlRemove:("function"==typeof t?function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function htmlConstant(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function selection_raise(){return this.each(raise$1)},lower:function selection_lower(){return this.each(lower)},append:function selection_append(t){var e="function"==typeof t?t:_o(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function selection_insert(t,e){var n="function"==typeof t?t:_o(t),r=null==e?constantNull:"function"==typeof e?e:Po(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function selection_remove(){return this.each(remove)},datum:function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:So,dispatch:function selection_dispatch(t,e){return this.each(("function"==typeof e?function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}:function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}})(t,e))}};function R9(t,e,n){arguments.length<3&&(n=e,e=Co().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return No(t,r);return null}var Jo=function select(t){return"string"==typeof t?new Selection([[document.querySelector(t)]],[document.documentElement]):new Selection([[t]],Qo)},wo=function selectAll(t){return"string"==typeof t?new Selection([document.querySelectorAll(t)],[document.documentElement]):new Selection([null==t?[]:t],Qo)},Eo=function touches(t,e){for(var n=0,r=(e=null==e?Co().touches:e)?e.length:0,i=new Array(r);n<r;++n)i[n]=No(t,e[n]);return i},ta=dispatch("start","end","interrupt"),ea=[],na=0,ra=1,ia=2,oa=3,aa=4,ua=5,ca=6,sa=function schedule(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function create(o,a,u){var c,s=o.__transition;function start(t){var e,n,r,i;if(u.state!==ra)return stop();for(e in s)if((i=s[e]).name===u.name){if(i.state===oa)return pr(start);i.state===aa?(i.state=ca,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete s[e]):+e<a&&(i.state=ca,i.timer.stop(),delete s[e])}if(pr(function(){u.state===oa&&(u.state=aa,u.timer.restart(tick,u.delay,u.time),tick(t))}),u.state=ia,u.on.call("start",o,o.__data__,u.index,u.group),u.state===ia){for(u.state=oa,c=new Array(r=u.tween.length),e=0,n=-1;e<r;++e)(i=u.tween[e].value.call(o,o.__data__,u.index,u.group))&&(c[++n]=i);c.length=n+1}}function tick(t){for(var e=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(stop),u.state=ua,1),n=-1,r=c.length;++n<r;)c[n].call(null,e);u.state===ua&&(u.on.call("end",o,o.__data__,u.index,u.group),stop())}function stop(){for(var t in u.state=ca,u.timer.stop(),delete s[a],s)return;delete o.__transition}(s[a]=u).timer=timer(function schedule(t){u.state=ra,u.timer.restart(start,u.delay,u.time),u.delay<=t&&start(t-u.delay)},0,u.time)}(t,n,{name:e,index:r,group:i,on:ta,tween:ea,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:na})};function init(t,e){t=t.__transition;if(!t||!(t=t[e])||t.state>na)throw new Error("too late");return t}function set$3(t,e){t=t.__transition;if(!t||!(t=t[e])||t.state>ia)throw new Error("too late");return t}function get$1(t,e){t=t.__transition;if(t=t&&t[e])return t;throw new Error("too late")}var la=function interrupt(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name!==e?a=!1:(r=n.state>ia&&n.state<ua,n.state=ca,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]);a&&delete t.__transition}},Ro=function selection_interrupt(t){return this.each(function(){la(this,t)})};function tweenValue(t,e,n){var r=t._id;return t.each(function(){var t=set$3(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return get$1(t,r).value[e]}}var fa=function interpolate$1(t,e){var n;return("number"==typeof e?w:e instanceof color?fn:(n=color(e))?(e=n,fn):Mn)(t,e)};function onFunction(n,r,i){var o,a,u=function start$1(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})}(r)?init:set$3;return function(){var t=u(this,n),e=t.on;e!==o&&(a=(o=e).copy()).on(r,i),t.on=a}}var ha=selection.prototype.constructor;var da=0;function Transition(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function transition(t){return selection().transition(t)}var zo=selection.prototype,pa=(Transition.prototype=transition.prototype={constructor:Transition,select:function transition_select(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Po(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,s=r[a],l=s.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=s[h])&&(c=t.call(u,u.__data__,h,s))&&("__data__"in u&&(c.__data__=u.__data__),f[h]=c,sa(f[h],e,n,h,f,get$1(u,n)));return new Transition(o,this._parents,e,n)},selectAll:function transition_selectAll(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ao(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,s=r[u],l=s.length,f=0;f<l;++f)if(c=s[f]){for(var h,d=t.call(c,c.__data__,f,s),p=get$1(c,n),y=0,v=d.length;y<v;++y)(h=d[y])&&sa(h,e,n,y,d,p);o.push(d),a.push(c)}return new Transition(o,a,e,n)},filter:function transition_filter(t){"function"!=typeof t&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,c=r[i]=[],s=0;s<u;++s)(o=a[s])&&t.call(o,o.__data__,s,a)&&c.push(o);return new Transition(r,this._parents,this._name,this._id)},merge:function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),o=new Array(r),a=0;a<i;++a)for(var u,c=e[a],s=n[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(u=c[h]||s[h])&&(f[h]=u);for(;a<r;++a)o[a]=e[a];return new Transition(o,this._parents,this._name,this._id)},selection:function transition_selection(){return new ha(this._groups,this._parents)},transition:function transition_transition(){for(var t=this._name,e=this._id,n=++da,r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u,c=r[o],s=c.length,l=0;l<s;++l)(a=c[l])&&(u=get$1(a,e),sa(a,t,n,l,c,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease}));return new Transition(r,this._parents,t,n)},call:zo.call,nodes:zo.nodes,node:zo.node,size:zo.size,empty:zo.empty,each:zo.each,on:function transition_on(t,e){var n=this._id;return arguments.length<2?get$1(this.node(),n).on.on(t):this.each(onFunction(n,t,e))},attr:function transition_attr(t,e){var n=go(t),r="transform"===n?An:fa;return this.attrTween(t,"function"==typeof e?(n.local?function attrFunctionNS$1(n,r,i){var o,a,u;return function(){var t,e=i(this);if(null!=e)return(t=this.getAttributeNS(n.space,n.local))===e?null:t===o&&e===a?u:u=r(o=t,a=e);this.removeAttributeNS(n.space,n.local)}}:function attrFunction$1(n,r,i){var o,a,u;return function(){var t,e=i(this);if(null!=e)return(t=this.getAttribute(n))===e?null:t===o&&e===a?u:u=r(o=t,a=e);this.removeAttribute(n)}})(n,r,tweenValue(this,"attr."+t,e)):null==e?(n.local?function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function attrRemove$1(t){return function(){this.removeAttribute(t)}})(n):(n.local?function attrConstantNS$1(e,n,r){var i,o;return function(){var t=this.getAttributeNS(e.space,e.local);return t===r?null:t===i?o:o=n(i=t,r)}}:function attrConstant$1(e,n,r){var i,o;return function(){var t=this.getAttribute(e);return t===r?null:t===i?o:o=n(i=t,r)}})(n,r,e))},attrTween:function transition_attrTween(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=go(t);return this.tween(n,(t.local?function attrTweenNS(r,t){function tween(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.setAttributeNS(r.space,r.local,n(t))}}return tween._value=t,tween}:function attrTween(r,t){function tween(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.setAttribute(r,n(t))}}return tween._value=t,tween})(t,e))},style:function transition_style(t,e,n){var r="transform"==(t+="")?Pn:fa;return null==e?this.styleTween(t,function styleRemove$1(n,r){var i,o,a;return function(){var t=Go(this).getComputedStyle(this,null),e=t.getPropertyValue(n),t=(this.style.removeProperty(n),t.getPropertyValue(n));return e===t?null:e===i&&t===o?a:a=r(i=e,o=t)}}(t,r)).on("end.style."+t,function styleRemoveEnd(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function styleFunction$1(r,i,o){var a,u,c;return function(){var t=Go(this).getComputedStyle(this,null),e=t.getPropertyValue(r),n=o(this);return null==n&&(this.style.removeProperty(r),n=t.getPropertyValue(r)),e===n?null:e===a&&n===u?c:c=i(a=e,u=n)}}(t,r,tweenValue(this,"style."+t,e)):function styleConstant$1(e,n,r){var i,o;return function(){var t=Go(this).getComputedStyle(this,null).getPropertyValue(e);return t===r?null:t===i?o:o=n(i=t,r)}}(t,r,e),n)},styleTween:function transition_styleTween(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function styleTween(r,t,i){function tween(){var e=this,n=t.apply(e,arguments);return n&&function(t){e.style.setProperty(r,n(t),i)}}return tween._value=t,tween}(t,e,null==n?"":n))},text:function transition_text(t){return this.tween("text","function"==typeof t?function textFunction$1(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(tweenValue(this,"text",t)):function textConstant$1(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function transition_remove(){return this.on("end.remove",function removeFunction(n){return function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function transition_tween(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=get$1(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function tweenRemove(i,o){var a,u;return function(){var t=set$3(this,i),e=t.tween;if(e!==a)for(var n=0,r=(u=a=e).length;n<r;++n)if(u[n].name===o){(u=u.slice()).splice(n,1);break}t.tween=u}}:function tweenFunction(o,a,u){var c,s;if("function"!=typeof u)throw new Error;return function(){var t=set$3(this,o),e=t.tween;if(e!==c){s=(c=e).slice();for(var n={name:a,value:u},r=0,i=s.length;r<i;++r)if(s[r].name===a){s[r]=n;break}r===i&&s.push(n)}t.tween=s}})(n,t,e))},delay:function transition_delay(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}:function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}})(e,t)):get$1(this.node(),e).delay},duration:function transition_duration(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function durationFunction(t,e){return function(){set$3(this,t).duration=+e.apply(this,arguments)}}:function durationConstant(t,e){return e=+e,function(){set$3(this,t).duration=e}})(e,t)):get$1(this.node(),e).duration},ease:function transition_ease(t){var e=this._id;return arguments.length?this.each(function easeConstant(t,e){if("function"!=typeof e)throw new Error;return function(){set$3(this,t).ease=e}}(e,t)):get$1(this.node(),e).ease}},{time:null,delay:0,duration:250,ease:cubicInOut});var Oo=function selection_transition(t){var e,n;t=t instanceof Transition?(e=t._id,t._name):(e=++da,(n=pa).time=now(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,s=0;s<c;++s)(a=u[s])&&sa(a,t,e,s,u,n||function inherit(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return pa.time=now(),pa;return n}(a,e));return new Transition(r,this._parents,t,e)},ya=(selection.prototype.interrupt=Ro,selection.prototype.transition=Oo,[null]),Io=function active(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>ra&&n.name===e)return new Transition([[t]],ya,e,+r);return null},va=Array.prototype.slice,ma=function identity$5(t){return t},ga=1,_a=2,ba=3,xa=4,wa=1e-6;function translateX(t,e,n){t=t(n);return"translate("+(isFinite(t)?t:e(n))+",0)"}function translateY(t,e,n){t=t(n);return"translate(0,"+(isFinite(t)?t:e(n))+")"}function center(e){var n=e.bandwidth()/2;return e.round()&&(n=Math.round(n)),function(t){return e(t)+n}}function entering(){return!this.__axis}function axis(m,g){var _=[],b=null,x=null,w=6,M=6,k=3;function axis(t){var e,n=null==b?g.ticks?g.ticks.apply(g,_):g.domain():b,r=null==x?g.tickFormat?g.tickFormat.apply(g,_):ma:x,i=Math.max(w,0)+k,o=m===ga||m===ba?translateX:translateY,a=g.range(),u=a[0]+.5,a=a[a.length-1]+.5,c=(g.bandwidth?center:ma)(g.copy()),s=t.selection?t.selection():t,l=s.selectAll(".domain").data([null]),f=(n=s.selectAll(".tick").data(n,g).order()).exit(),h=n.enter().append("g").attr("class","tick"),d=n.select("line"),p=n.select("text"),y=m===ga||m===xa?-1:1,v=m===xa||m===_a?(e="x","y"):(e="y","x"),l=l.merge(l.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),n=n.merge(h),d=d.merge(h.append("line").attr("stroke","#000").attr(e+"2",y*w).attr(v+"1",.5).attr(v+"2",.5)),p=p.merge(h.append("text").attr("fill","#000").attr(e,y*i).attr(v,.5).attr("dy",m===ga?"0em":m===ba?"0.71em":"0.32em"));t!==s&&(l=l.transition(t),n=n.transition(t),d=d.transition(t),p=p.transition(t),f=f.transition(t).attr("opacity",wa).attr("transform",function(t){return o(c,this.parentNode.__axis||c,t)}),h.attr("opacity",wa).attr("transform",function(t){return o(this.parentNode.__axis||c,c,t)})),f.remove(),l.attr("d",m===xa||m==_a?"M"+y*M+","+u+"H0.5V"+a+"H"+y*M:"M"+u+","+y*M+"V0.5H"+a+"V"+y*M),n.attr("opacity",1).attr("transform",function(t){return o(c,c,t)}),d.attr(e+"2",y*w),p.attr(e,y*i).text(r),s.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",m===_a?"start":m===xa?"end":"middle"),s.each(function(){this.__axis=c})}return axis.scale=function(t){return arguments.length?(g=t,axis):g},axis.ticks=function(){return _=va.call(arguments),axis},axis.tickArguments=function(t){return arguments.length?(_=null==t?[]:va.call(t),axis):_.slice()},axis.tickValues=function(t){return arguments.length?(b=null==t?null:va.call(t),axis):b&&b.slice()},axis.tickFormat=function(t){return arguments.length?(x=t,axis):x},axis.tickSize=function(t){return arguments.length?(w=M=+t,axis):w},axis.tickSizeInner=function(t){return arguments.length?(w=+t,axis):w},axis.tickSizeOuter=function(t){return arguments.length?(M=+t,axis):M},axis.tickPadding=function(t){return arguments.length?(k=+t,axis):k},axis}function defaultSeparation(t,e){return t.parent===e.parent?1:2}function meanXReduce(t,e){return t+e.x}function maxYReduce(t,e){return Math.max(t,e.y)}function Jj(){var u=defaultSeparation,c=1,s=1,l=!1;function cluster(e){var n,r=0,t=(e.eachAfter(function(t){var e=t.children;e?(t.x=function meanX(t){return t.reduce(meanXReduce,0)/t.length}(e),t.y=function maxY(t){return 1+t.reduce(maxYReduce,0)}(e)):(t.x=n?r+=u(t,n):0,t.y=0,n=t)}),function leafLeft(t){for(var e;e=t.children;)t=e[0];return t}(e)),i=function leafRight(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),o=t.x-u(t,i)/2,a=i.x+u(i,t)/2;return e.eachAfter(l?function(t){t.x=(t.x-e.x)*c,t.y=(e.y-t.y)*s}:function(t){t.x=(t.x-o)/(a-o)*c,t.y=(1-(e.y?t.y/e.y:1))*s})}return cluster.separation=function(t){return arguments.length?(u=t,cluster):u},cluster.size=function(t){return arguments.length?(l=!1,c=+t[0],s=+t[1],cluster):l?null:[c,s]},cluster.nodeSize=function(t){return arguments.length?(l=!0,c=+t[0],s=+t[1],cluster):l?[c,s]:null},cluster}function hierarchy(t,e){var n,r,i,o,a,u=new Node(t),c=+t.value&&(u.value=t.value),s=[u];for(null==e&&(e=defaultChildren);n=s.pop();)if(c&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;0<=o;--o)s.push(r=n.children[o]=new Node(i[o])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(computeHeight)}function defaultChildren(t){return t.children}function copyData(t){t.data=t.data.data}function computeHeight(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function Node(t){this.data=t,this.depth=this.height=0,this.parent=null}function Node$2(t){this._=t,this.next=null}Node.prototype=hierarchy.prototype={constructor:Node,each:function node_each(t){var e,n,r,i,o,a=[this];do{for(n=a.reverse(),a=[];e=n.pop();)if(t(e),r=e.children)for(i=0,o=r.length;i<o;++i)a.push(r[i])}while(a.length);return this},eachAfter:function node_eachAfter(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function node_eachBefore(t){for(var e,n,r,i=[this];e=i.pop();)if(t(e),n=e.children)for(r=n.length-1;0<=r;--r)i.push(n[r]);return this},sum:function node_sum(i){return this.eachAfter(function(t){for(var e=+i(t.data)||0,n=t.children,r=n&&n.length;0<=--r;)e+=n[r].value;t.value=e})},sort:function node_sort(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function node_path(t){for(var e=this,n=function leastCommonAncestor(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function node_ancestors(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function node_descendants(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function node_leaves(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function node_links(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}};var Ma=function shuffle$1(t){for(var e=(t=t.slice()).length,n=null,r=n;e;){var i=new Node$2(t[e-1]),r=r?r.next=i:n=i;t[void 0]=t[--e]}return{head:n,tail:r}},ka=function enclose(t){return function encloseN(t,e){var n,r,i,o=null,a=t.head;switch(e.length){case 1:n=enclose1(e[0]);break;case 2:n=enclose2(e[0],e[1]);break;case 3:n=enclose3(e[0],e[1],e[2])}for(;a;)i=a._,r=a.next,n&&encloses(n,i)?o=a:(o?(t.tail=o).next=null:t.head=t.tail=null,e.push(i),n=encloseN(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),(o=t.tail).next=r),a=r;t.tail=o;return n}(Ma(t),[])};function encloses(t,e){var n=e.x-t.x,r=e.y-t.y,t=t.r-e.r;return n*n+r*r<t*t+1e-6}function enclose1(t){return{x:t.x,y:t.y,r:t.r}}function enclose2(t,e){var n=t.x,r=t.y,t=t.r,i=e.x,o=e.y,e=e.r,a=i-n,u=o-r,c=e-t,s=Math.sqrt(a*a+u*u);return{x:(n+i+a/s*c)/2,y:(r+o+u/s*c)/2,r:(s+t+e)/2}}function enclose3(t,e,n){var r=t.x,i=t.y,t=t.r,o=e.x,a=e.y,e=e.r,u=n.x,c=n.y,n=n.r,s=2*(r-o),l=2*(i-a),f=2*(e-t),o=r*r+i*i-t*t-o*o-a*a+e*e,a=2*(r-u),e=2*(i-c),h=2*(n-t),u=r*r+i*i-t*t-u*u-c*c+n*n,c=a*l-s*e,n=(l*u-e*o)/c-r,e=(e*f-l*h)/c,l=(a*o-s*u)/c-i,o=(s*h-a*f)/c,u=e*e+o*o-1,s=2*(n*e+l*o+t),h=(-s-Math.sqrt(s*s-4*u*(n*n+l*l-t*t)))/(2*u);return{x:n+e*h+r,y:l+o*h+i,r:h}}function place(t,e,n){var r,i=t.x,o=t.y,a=e.r+n.r,t=t.r+n.r,u=e.x-i,e=e.y-o,c=u*u+e*e;c?(r=.5+((t*=t)-(a*=a))/(2*c),a=Math.sqrt(Math.max(0,2*a*(t+c)-(t-=c)*t-a*a))/(2*c),n.x=i+r*u+a*e,n.y=o+r*e-a*u):(n.x=i+t,n.y=o)}function intersects(t,e){var n=e.x-t.x,r=e.y-t.y,t=t.r+e.r;return n*n+r*r<t*t}function distance2(t,e,n){e=t.x-e,t=t.y-n;return e*e+t*t}function Node$1(t){this._=t,this.next=null,this.previous=null}function packEnclose(t){if(!(r=t.length))return 0;var e,n,r,i=t[0];if(i.x=0,i.y=0,!(1<r))return i.r;if(e=t[1],i.x=-e.r,e.x=i.r,e.y=0,!(2<r))return i.r+e.r;place(e,i,n=t[2]);var o,a,u,c,s,l,f,h=i.r*i.r,d=e.r*e.r,p=n.r*n.r,y=h+d+p,v=h*i.x+d*e.x+p*n.x,m=h*i.y+d*e.y+p*n.y;i=new Node$1(i),e=new Node$1(e),n=new Node$1(n),((i.next=n.previous=e).next=i.previous=n).next=e.previous=i;t:for(u=3;u<r;++u){if(place(i._,e._,n=t[u]),n=new Node$1(n),(s=i.previous)===(c=e.next)){if(intersects(c._,n._)){i=e,e=c,--u;continue}}else{l=c._.r,f=s._.r;do{if(l<=f){if(intersects(c._,n._)){e=c,(i.next=e).previous=i,--u;continue t}l+=(c=c.next)._.r}else{if(intersects(s._,n._)){((i=s).next=e).previous=i,--u;continue t}f+=(s=s.previous)._.r}}while(c!==s.next)}for(n.previous=i,n.next=e,y+=p=(i.next=e.previous=e=n)._.r*n._.r,v+=p*n._.x,m+=p*n._.y,h=distance2(i._,o=v/y,a=m/y);(n=n.next)!==e;)(p=distance2(n._,o,a))<h&&(i=n,h=p);e=i.next}for(i=[e._],n=e;(n=n.next)!==e;)i.push(n._);for(n=ka(i),u=0;u<r;++u)(i=t[u]).x-=n.x,i.y-=n.y;return n.r}qo=function siblings(t){return packEnclose(t),t};function required(t){if("function"!=typeof t)throw new Error;return t}function constantZero(){return 0}var Sa=function constant$6(t){return function(){return t}};function defaultRadius(t){return Math.sqrt(t.value)}Do=function index(){var e=null,n=1,r=1,i=constantZero;function pack(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(radiusLeaf(e)).eachAfter(packChildren(i,.5)).eachBefore(translateChild(1)):t.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(i,t.r/Math.min(n,r))).eachBefore(translateChild(Math.min(n,r)/(2*t.r))),t}return pack.radius=function(t){return arguments.length?(e=function optional(t){return null==t?null:required(t)}(t),pack):e},pack.size=function(t){return arguments.length?(n=+t[0],r=+t[1],pack):[n,r]},pack.padding=function(t){return arguments.length?(i="function"==typeof t?t:Sa(+t),pack):i},pack};function radiusLeaf(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function packChildren(a,u){return function(t){if(e=t.children){var e,n,r,i=e.length,o=a(t)*u||0;if(o)for(n=0;n<i;++n)e[n].r+=o;if(r=packEnclose(e),o)for(n=0;n<i;++n)e[n].r-=o;t.r=r+o}}}function translateChild(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function _j(){var n=1,r=1,u=0,i=!1;function partition(t){var e=t.height+1;return t.x0=t.y0=u,t.x1=n,t.y1=r/e,t.eachBefore(function positionNode(o,a){return function(t){t.children&&Na(t,t.x0,o*(t.depth+1)/a,t.x1,o*(t.depth+2)/a);var e=t.x0,n=t.y0,r=t.x1-u,i=t.y1-u;r<e&&(e=r=(e+r)/2),i<n&&(n=i=(n+i)/2),t.x0=e,t.y0=n,t.x1=r,t.y1=i}}(r,e)),i&&t.eachBefore(Ca),t}return partition.round=function(t){return arguments.length?(i=!!t,partition):i},partition.size=function(t){return arguments.length?(n=+t[0],r=+t[1],partition):[n,r]},partition.padding=function(t){return arguments.length?(u=+t,partition):u},partition}var Ca=function roundNode(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Na=function treemapDice(t,e,n,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(r-e)/t.value;++u<c;)(o=a[u]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*s},Ta={depth:-1},Pa={};function defaultId(t){return t.id}function defaultParentId(t){return t.parentId}function dk(){var l=defaultId,f=defaultParentId;function stratify(t){for(var e,n,r,i,o,a=t.length,u=new Array(a),c={},s=0;s<a;++s)o=t[s],r=u[s]=new Node(o),null!=(i=l(o,s,t))&&(i+="")&&(c[o="$"+(r.id=i)]=o in c?Pa:r);for(s=0;s<a;++s)if(r=u[s],null!=(i=f(t[s],s,t))&&(i+="")){if(!(n=c["$"+i]))throw new Error("missing: "+i);if(n===Pa)throw new Error("ambiguous: "+i);n.children?n.children.push(r):n.children=[r],r.parent=n}else{if(e)throw new Error("multiple roots");e=r}if(!e)throw new Error("no root");if(e.parent=Ta,e.eachBefore(function(t){t.depth=t.parent.depth+1,--a}).eachBefore(computeHeight),e.parent=null,0<a)throw new Error("cycle");return e}return stratify.id=function(t){return arguments.length?(l=required(t),stratify):l},stratify.parentId=function(t){return arguments.length?(f=required(t),stratify):f},stratify}function defaultSeparation$1(t,e){return t.parent===e.parent?1:2}function nextLeft(t){var e=t.children;return e?e[0]:t.t}function nextRight(t){var e=t.children;return e?e[e.length-1]:t.t}function TreeNode(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}TreeNode.prototype=Object.create(Node.prototype);function ek(){var h=defaultSeparation$1,c=1,s=1,l=null;function tree(t){var e,n,r,i,o,a,u=function treeRoot(t){for(var e,n,r,i,o,a=[t=new TreeNode(t,0)];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;0<=i;--i)a.push(n=e.children[i]=new TreeNode(r[i],i)),n.parent=e;return(t.parent=new TreeNode(null,0)).children=[t],t}(t);return u.eachAfter(firstWalk),u.parent.m=-u.z,u.eachBefore(secondWalk),l?t.eachBefore(sizeNode):((r=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>r.depth&&(r=t)}),u=e===n?1:h(e,n)/2,i=u-e.x,o=c/(n.x+u+i),a=s/(r.depth||1),t.eachBefore(function(t){t.x=(t.x+i)*o,t.y=t.depth*a})),t}function firstWalk(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;e?(function executeShifts(t){for(var e,n=0,r=0,i=t.children,o=i.length;0<=--o;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t),e=(e[0].z+e[e.length-1].z)/2,r?(t.z=r.z+h(t._,r._),t.m=t.z-e):t.z=e):r&&(t.z=r.z+h(t._,r._)),t.parent.A=function apportion(t,e,n){if(e){for(var r,i=t,o=t,a=e,u=i.parent.children[0],c=i.m,s=o.m,l=a.m,f=u.m;a=nextRight(a),i=nextLeft(i),a&&i;)u=nextLeft(u),(o=nextRight(o)).a=t,0<(r=a.z+l-i.z-c+h(a._,i._))&&(function moveSubtree(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function nextAncestor(t,e,n){return t.a.parent===e.parent?t.a:n}(a,t,n),t,r),c+=r,s+=r),l+=a.m,c+=i.m,f+=u.m,s+=o.m;a&&!nextRight(o)&&(o.t=a,o.m+=l-s),i&&!nextLeft(u)&&(u.t=i,u.m+=c-f,n=t)}return n}(t,r,t.parent.A||n[0])}function secondWalk(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function sizeNode(t){t.x*=c,t.y=t.depth*s}return tree.separation=function(t){return arguments.length?(h=t,tree):h},tree.size=function(t){return arguments.length?(l=!1,c=+t[0],s=+t[1],tree):l?null:[c,s]},tree.nodeSize=function(t){return arguments.length?(l=!0,c=+t[0],s=+t[1],tree):l?[c,s]:null},tree}var Aa=function treemapSlice(t,e,n,r,i){for(var o,a=t.children,u=-1,c=a.length,s=t.value&&(i-n)/t.value;++u<c;)(o=a[u]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*s},Fo=(1+Math.sqrt(5))/2;function squarifyRatio(t,e,n,r,i,o){for(var a,u,c,s,l,f,h,d,p,y,v,m,g=[],_=e.children,b=0,x=_.length,w=e.value;b<x;){for(s=i-n,l=o-r,h=d=f=_[b].value,m=f*f*(v=Math.max(l/s,s/l)/(w*t)),y=Math.max(d/m,m/h),c=b+1;c<x;++c){if(f+=u=_[c].value,u<h&&(h=u),d<u&&(d=u),m=f*f*v,y<(p=Math.max(d/m,m/h))){f-=u;break}y=p}g.push(a={value:f,dice:s<l,children:_.slice(b,c)}),a.dice?Na(a,n,r,i,w?r+=l*f/w:o):Aa(a,n,r,w?n+=s*f/w:i,o),w-=f,b=c}return g}var Ea=function custom(o){function squarify(t,e,n,r,i){squarifyRatio(o,t,e,n,r,i)}return squarify.ratio=function(t){return custom(1<(t=+t)?t:1)},squarify}(Fo),Uo=function index$1(){var a=Ea,e=!1,n=1,r=1,u=[0],c=constantZero,s=constantZero,l=constantZero,f=constantZero,h=constantZero;function treemap(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(positionNode),u=[0],e&&t.eachBefore(Ca),t}function positionNode(t){var e=u[t.depth],n=t.x0+e,r=t.y0+e,i=t.x1-e,o=t.y1-e;i<n&&(n=i=(n+i)/2),o<r&&(r=o=(r+o)/2),t.x0=n,t.y0=r,t.x1=i,t.y1=o,t.children&&(e=u[t.depth+1]=c(t)/2,n+=h(t)-e,r+=s(t)-e,(i-=l(t)-e)<n&&(n=i=(n+i)/2),(o-=f(t)-e)<r&&(r=o=(r+o)/2),a(t,n,r,i,o))}return treemap.round=function(t){return arguments.length?(e=!!t,treemap):e},treemap.size=function(t){return arguments.length?(n=+t[0],r=+t[1],treemap):[n,r]},treemap.tile=function(t){return arguments.length?(a=required(t),treemap):a},treemap.padding=function(t){return arguments.length?treemap.paddingInner(t).paddingOuter(t):treemap.paddingInner()},treemap.paddingInner=function(t){return arguments.length?(c="function"==typeof t?t:Sa(+t),treemap):c},treemap.paddingOuter=function(t){return arguments.length?treemap.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):treemap.paddingTop()},treemap.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:Sa(+t),treemap):s},treemap.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:Sa(+t),treemap):l},treemap.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:Sa(+t),treemap):f},treemap.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:Sa(+t),treemap):h},treemap},Bo=function binary(t,e,n,r,i){var o,a,p=t.children,u=p.length,y=new Array(u+1);for(y[0]=a=o=0;o<u;++o)y[o+1]=a+=p[o].value;!function partition(t,e,n,r,i,o,a){if(e-1<=t)return(u=p[t]).x0=r,u.y0=i,u.x1=o,void(u.y1=a);var u=y[t],c=n/2+u,s=t+1,l=e-1;for(;s<l;){var f=s+l>>>1;y[f]<c?s=1+f:l=f}var u=y[s]-u,h=n-u;{var d;o-r<a-i?(partition(t,s,u,r,i,o,d=(i*h+a*u)/n),partition(s,e,h,r,d,o,a)):(partition(t,s,u,r,i,d=(r*h+o*u)/n,a),partition(s,e,h,d,i,o,a))}}(0,u,t.value,e,n,r,i)},Wo=function sliceDice(t,e,n,r,i){(1&t.depth?Aa:Na)(t,e,n,r,i)},Yo=function custom(d){function resquarify(t,e,n,r,i){if((o=t._squarify)&&o.ratio===d)for(var o,a,u,c,s,l=-1,f=o.length,h=t.value;++l<f;){for(u=(a=o[l]).children,c=a.value=0,s=u.length;c<s;++c)a.value+=u[c].value;a.dice?Na(a,e,n,r,n+=(i-n)*a.value/h):Aa(a,e,n,e+=(r-e)*a.value/h,i),h-=a.value}else t._squarify=o=squarifyRatio(d,t,e,n,r,i),o.ratio=d}return resquarify.ratio=function(t){return custom(1<(t=+t)?t:1)},resquarify}(Fo),Ho=function center$1(o,a){var u;function force(){for(var t,e=u.length,n=0,r=0,i=0;i<e;++i)n+=(t=u[i]).x,r+=t.y;for(n=n/e-o,r=r/e-a,i=0;i<e;++i)(t=u[i]).x-=n,t.y-=r}return null==o&&(o=0),null==a&&(a=0),force.initialize=function(t){u=t},force.x=function(t){return arguments.length?(o=+t,force):o},force.y=function(t){return arguments.length?(a=+t,force):a},force},e=function constant$7(t){return function(){return t}},Ra=function jiggle(){return 1e-6*(Math.random()-.5)};function x$1(t){return t.x+t.vx}function y$1(t){return t.y+t.vy}Vo=function collide(n){var r,i,d=1,o=1;function force(){for(var u,t,c,s,l,f,h,e=r.length,n=0;n<o;++n)for(t=quadtree(r,x$1,y$1).visitAfter(prepare),u=0;u<e;++u)c=r[u],f=i[u],h=f*f,s=c.x+c.vx,l=c.y+c.vy,t.visit(apply);function apply(t,e,n,r,i){var o=t.data,t=t.r,a=f+t;if(!o)return s+a<e||r<s-a||l+a<n||i<l-a;o.index>u&&(n=(e=s-o.x-o.vx)*e+(r=l-o.y-o.vy)*r)<a*a&&(0===e&&(n+=(e=Ra())*e),0===r&&(n+=(r=Ra())*r),n=(a-(n=Math.sqrt(n)))/n*d,c.vx+=(e*=n)*(a=(t*=t)/(h+t)),c.vy+=(r*=n)*a,o.vx-=e*(a=1-a),o.vy-=r*a)}}function prepare(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function initialize(){if(r){var t,e=r.length;for(i=new Array(e),t=0;t<e;++t)i[t]=+n(r[t],t,r)}}return"function"!=typeof n&&(n=e(null==n?1:+n)),force.initialize=function(t){r=t,initialize()},force.iterations=function(t){return arguments.length?(o=+t,force):o},force.strength=function(t){return arguments.length?(d=+t,force):d},force.radius=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),initialize(),force):n},force};function index$2(t,e){return e}function find(t,e){t=t.get(e);if(t)return t;throw new Error("missing: "+e)}Xo=function link(s){var l,f,o,a,h,u=index$2,n=function defaultStrength(t){return 1/Math.min(a[t.source.index],a[t.target.index])},r=e(30),d=1;function force(t){for(var e=0,n=s.length;e<d;++e)for(var r,i,o,a,u,c=0;c<n;++c)r=(i=s[c]).source,o=(i=i.target).x+i.vx-r.x-r.vx||Ra(),a=i.y+i.vy-r.y-r.vy||Ra(),o*=u=((u=Math.sqrt(o*o+a*a))-f[c])/u*t*l[c],a*=u,i.vx-=o*(u=h[c]),i.vy-=a*u,r.vx+=o*(u=1-u),r.vy+=a*u}function initialize(){if(o){var t,e=o.length,n=s.length,r=map$1(o,u),i=0;for(a=new Array(e);i<e;++i)a[i]=0;for(i=0;i<n;++i)(t=s[i]).index=i,"object"!==_typeof(t.source)&&(t.source=find(r,t.source)),"object"!==_typeof(t.target)&&(t.target=find(r,t.target)),++a[t.source.index],++a[t.target.index];for(i=0,h=new Array(n);i<n;++i)t=s[i],h[i]=a[t.source.index]/(a[t.source.index]+a[t.target.index]);l=new Array(n),initializeStrength(),f=new Array(n),initializeDistance()}}function initializeStrength(){if(o)for(var t=0,e=s.length;t<e;++t)l[t]=+n(s[t],t,s)}function initializeDistance(){if(o)for(var t=0,e=s.length;t<e;++t)f[t]=+r(s[t],t,s)}return null==s&&(s=[]),force.initialize=function(t){o=t,initialize()},force.links=function(t){return arguments.length?(s=t,initialize(),force):s},force.id=function(t){return arguments.length?(u=t,force):u},force.iterations=function(t){return arguments.length?(d=+t,force):d},force.strength=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),initializeStrength(),force):n},force.distance=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),initializeDistance(),force):r},force};function x$2(t){return t.x}function y$2(t){return t.y}function tk(c){var n,r=1,e=.001,i=1-Math.pow(e,1/300),o=0,a=.6,u=map$1(),t=timer(step),s=dispatch("tick","end");function step(){tick(),s.call("tick",n),r<e&&(t.stop(),s.call("end",n))}function tick(){var t,e,n=c.length;for(r+=(o-r)*i,u.each(function(t){t(r)}),t=0;t<n;++t)null==(e=c[t]).fx?e.x+=e.vx*=a:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=a:(e.y=e.fy,e.vy=0)}function initializeNodes(){for(var t,e,n,r=0,i=c.length;r<i;++r)(n=c[r]).index=r,(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(r),e=r*La,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function initializeForce(t){return t.initialize&&t.initialize(c),t}return null==c&&(c=[]),initializeNodes(),n={tick:tick,restart:function restart(){return t.restart(step),n},stop:function stop(){return t.stop(),n},nodes:function nodes(t){return arguments.length?(c=t,initializeNodes(),u.each(initializeForce),n):c},alpha:function alpha(t){return arguments.length?(r=+t,n):r},alphaMin:function alphaMin(t){return arguments.length?(e=+t,n):e},alphaDecay:function alphaDecay(t){return arguments.length?(i=+t,n):+i},alphaTarget:function alphaTarget(t){return arguments.length?(o=+t,n):o},velocityDecay:function velocityDecay(t){return arguments.length?(a=1-t,n):1-a},force:function force(t,e){return 1<arguments.length?(null==e?u.remove(t):u.set(t,initializeForce(e)),n):u.get(t)},find:function find(t,e,n){var r,i,o,a=0,u=c.length;for(null==n?n=1/0:n*=n,a=0;a<u;++a)(r=(r=t-(i=c[a]).x)*r+(r=e-i.y)*r)<n&&(o=i,n=r);return o},on:function on(t,e){return 1<arguments.length?(s.on(t,e),n):s.on(t)}}}var La=Math.PI*(3-Math.sqrt(5)),Zo=function manyBody(){var i,c,s,l,n=e(-30),f=1,h=1/0,d=.81;function force(t){var e,n=i.length,r=quadtree(i,x$2,y$2).visitAfter(accumulate);for(s=t,e=0;e<n;++e)c=i[e],r.visit(apply)}function initialize(){if(i){var t,e=i.length;for(l=new Array(e),t=0;t<e;++t)l[t]=+n(i[t],t,i)}}function accumulate(t){var e,n,r,i,o,a=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=e.value)&&(a+=n,r+=n*e.x,i+=n*e.y);t.x=r/a,t.y=i/a}else for((e=t).x=e.data.x,e.y=e.data.y;a+=l[e.data.index],e=e.next;);t.value=a}function apply(t,e,n,r){if(!t.value)return!0;var i=t.x-c.x,o=t.y-c.y,a=r-e,u=i*i+o*o;if(a*a/d<u)return u<h&&(0===i&&(u+=(i=Ra())*i),0===o&&(u+=(o=Ra())*o),u<f&&(u=Math.sqrt(f*u)),c.vx+=i*t.value*s/u,c.vy+=o*t.value*s/u),!0;if(!(t.length||h<=u))for((t.data!==c||t.next)&&(0===i&&(u+=(i=Ra())*i),0===o&&(u+=(o=Ra())*o),u<f)&&(u=Math.sqrt(f*u));t.data!==c&&(a=l[t.data.index]*s/u,c.vx+=i*a,c.vy+=o*a),t=t.next;);}return force.initialize=function(t){i=t,initialize()},force.strength=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),initialize(),force):n},force.distanceMin=function(t){return arguments.length?(f=t*t,force):Math.sqrt(f)},force.distanceMax=function(t){return arguments.length?(h=t*t,force):Math.sqrt(h)},force.theta=function(t){return arguments.length?(d=t*t,force):Math.sqrt(d)},force},Ko=function x$3(n){var i,o,a,r=e(.1);function force(t){for(var e,n=0,r=i.length;n<r;++n)(e=i[n]).vx+=(a[n]-e.x)*o[n]*t}function initialize(){if(i){var t,e=i.length;for(o=new Array(e),a=new Array(e),t=0;t<e;++t)o[t]=isNaN(a[t]=+n(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof n&&(n=e(null==n?0:+n)),force.initialize=function(t){i=t,initialize()},force.strength=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),initialize(),force):r},force.x=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),initialize(),force):n},force},So=function y$3(n){var i,o,a,r=e(.1);function force(t){for(var e,n=0,r=i.length;n<r;++n)(e=i[n]).vy+=(a[n]-e.y)*o[n]*t}function initialize(){if(i){var t,e=i.length;for(o=new Array(e),a=new Array(e),t=0;t<e;++t)o[t]=isNaN(a[t]=+n(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof n&&(n=e(null==n?0:+n)),force.initialize=function(t){i=t,initialize()},force.strength=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),initialize(),force):r},force.y=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),initialize(),force):n},force};function nopropagation(){j.event.stopImmediatePropagation()}var Oa=function noevent(){j.event.preventDefault(),j.event.stopImmediatePropagation()},ja=function dragDisable(t){var e=t.document.documentElement,t=Jo(t).on("dragstart.drag",Oa,!0);"onselectstart"in e?t.on("selectstart.drag",Oa,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function yesdrag(t,e){var n=t.document.documentElement,r=Jo(t).on("dragstart.drag",null);e&&(r.on("click.drag",Oa,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var $a=function constant$8(t){return function(){return t}};function DragEvent(t,e,n,r,i,o,a,u,c,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=s}function defaultFilter(){return!j.event.button}function defaultContainer(){return this.parentNode}function defaultSubject(t){return null==t?{x:j.event.x,y:j.event.y}:t}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ak(){var e,i,o=defaultFilter,a=defaultContainer,n=defaultSubject,d={},p=dispatch("start","drag","end"),y=0;function drag(t){t.on("mousedown.drag",mousedowned).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(){var t;!i&&o.apply(this,arguments)&&(t=beforestart("mouse",a.apply(this,arguments),To,this,arguments))&&(Jo(j.event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),ja(j.event.view),nopropagation(),e=!1,t("start"))}function mousemoved(){Oa(),e=!0,d.mouse("drag")}function mouseupped(){Jo(j.event.view).on("mousemove.drag mouseup.drag",null),yesdrag(j.event.view,e),Oa(),d.mouse("end")}function touchstarted(){if(o.apply(this,arguments))for(var t,e=j.event.changedTouches,n=a.apply(this,arguments),r=e.length,i=0;i<r;++i)(t=beforestart(e[i].identifier,n,R9,this,arguments))&&(nopropagation(),t("start"))}function touchmoved(){for(var t,e=j.event.changedTouches,n=e.length,r=0;r<n;++r)(t=d[e[r].identifier])&&(Oa(),t("drag"))}function touchended(){var t,e,n=j.event.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<r;++t)(e=d[n[t].identifier])&&(nopropagation(),e("end"))}function beforestart(r,i,o,a,u){var c,s,l,f=o(i,r),h=p.copy();if(customEvent(new DragEvent(drag,"beforestart",c,r,y,f[0],f[1],0,0,h),function(){return null!=(j.event.subject=c=n.apply(a,u))&&(s=c.x-f[0]||0,l=c.y-f[1]||0,!0)}))return function gesture(t){var e,n=f;switch(t){case"start":d[r]=gesture,e=y++;break;case"end":delete d[r],--y;case"drag":f=o(i,r),e=y}customEvent(new DragEvent(drag,t,c,r,e,f[0]+s,f[1]+l,f[0]-n[0],f[1]-n[1],h),h.apply,h,[t,a,u])}}return drag.filter=function(t){return arguments.length?(o="function"==typeof t?t:$a(!!t),drag):o},drag.container=function(t){return arguments.length?(a="function"==typeof t?t:$a(t),drag):a},drag.subject=function(t){return arguments.length?(n="function"==typeof t?t:$a(t),drag):n},drag.on=function(){var t=p.on.apply(p,arguments);return t===p?drag:t},drag}var za=function constant$9(t){return function(){return t}};function x$4(t){return t[0]}function y$4(t){return t[1]}function RedBlackTree(){this._=null}function RedBlackNode(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function RedBlackRotateLeft(t,e){var n=e,e=e.R,r=n.U;r?r.L===n?r.L=e:r.R=e:t._=e,e.U=r,n.U=e,n.R=e.L,n.R&&(n.R.U=n),e.L=n}function RedBlackRotateRight(t,e){var n=e,e=e.L,r=n.U;r?r.L===n?r.L=e:r.R=e:t._=e,e.U=r,n.U=e,n.L=e.R,n.L&&(n.L.U=n),e.R=n}function RedBlackFirst(t){for(;t.L;)t=t.L;return t}function createEdge(t,e,n,r){var i=[null,null],o=k.push(i)-1;return i.left=t,i.right=e,n&&setEdgeEnd(i,t,e,n),r&&setEdgeEnd(i,e,t,r),M[t.index].halfedges.push(o),M[e.index].halfedges.push(o),i}function createBorderEdge(t,e,n){e=[e,n];return e.left=t,e}function setEdgeEnd(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function clipEdges(t,e,n,r){for(var i,o=k.length;o--;)(function connectEdge(t,e,n,r,i){var o=t[1];if(!o){var a,u=t[0],c=t.left,s=t.right,l=c[0],c=c[1],f=s[0],s=s[1],h=(l+f)/2;if(s===c){if(h<e||r<=h)return;if(f<l){if(u){if(u[1]>=i)return}else u=[h,n];o=[h,i]}else{if(u){if(u[1]<n)return}else u=[h,i];o=[h,n]}}else if(h=(c+s)/2-(a=(l-f)/(s-c))*h,a<-1||1<a)if(f<l){if(u){if(u[1]>=i)return}else u=[(n-h)/a,n];o=[(i-h)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-h)/a,i];o=[(n-h)/a,n]}else if(c<s){if(u){if(u[0]>=r)return}else u=[e,a*e+h];o=[r,a*r+h]}else{if(u){if(u[0]<e)return}else u=[r,a*r+h];o=[e,a*e+h]}t[0]=u,t[1]=o}return 1})(i=k[o],t,e,n,r)&&function clipEdge(t,e,n,r,i){var o=t[0],a=t[1],u=o[0],o=o[1],c=0,s=1,l=a[0]-u,a=a[1]-o,e=e-u;if(l||!(0<e)){if(e/=l,l<0){if(e<c)return;e<s&&(s=e)}else if(0<l){if(s<e)return;c<e&&(c=e)}if(e=r-u,l||!(e<0)){if(e/=l,l<0){if(s<e)return;c<e&&(c=e)}else if(0<l){if(e<c)return;e<s&&(s=e)}if(e=n-o,a||!(0<e)){if(e/=a,a<0){if(e<c)return;e<s&&(s=e)}else if(0<a){if(s<e)return;c<e&&(c=e)}if(e=i-o,a||!(e<0)){if(e/=a,a<0){if(s<e)return;c<e&&(c=e)}else if(0<a){if(e<c)return;e<s&&(s=e)}return(0<c||s<1)&&(0<c&&(t[0]=[u+c*l,o+c*a]),s<1)&&(t[1]=[u+s*l,o+s*a]),1}}}}}(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>S||Math.abs(i[0][1]-i[1][1])>S)||delete k[o]}function cellHalfedgeStart(t,e){return e[+(e.left!==t.site)]}function sortCellHalfedges(){for(var t,e,n,r=0,i=M.length;r<i;++r)if((t=M[r])&&(n=(e=t.halfedges).length)){for(var o=new Array(n),a=new Array(n),u=0;u<n;++u)o[u]=u,a[u]=function cellHalfedgeAngle(t,e){var t=t.site,n=e.left,r=e.right;return t===r&&(r=n,n=t),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(r=t===n?(n=e[1],e[0]):(n=e[0],e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}(t,k[e[u]]);for(o.sort(function(t,e){return a[e]-a[t]}),u=0;u<n;++u)a[u]=e[o[u]];for(u=0;u<n;++u)e[u]=a[u]}}function clipCells(t,e,n,r){var i,o,a,u,c,s,l,f,h,d,p=M.length,y=!0;for(w=0;w<p;++w)if(i=M[w]){for(o=i.site,a=(u=i.halfedges).length;a--;)k[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)h=(f=function cellHalfedgeEnd(t,e){return e[+(e.left===t.site)]}(i,k[u[a]]))[0],d=f[1],s=(l=cellHalfedgeStart(i,k[u[++a%c]]))[0],l=l[1],(Math.abs(h-s)>S||Math.abs(d-l)>S)&&(u.splice(a,0,k.push(createBorderEdge(o,f,Math.abs(h-t)<S&&S<r-d?[t,Math.abs(s-t)<S?l:r]:Math.abs(d-r)<S&&S<n-h?[Math.abs(l-r)<S?s:n,r]:Math.abs(h-n)<S&&S<d-e?[n,Math.abs(s-n)<S?l:e]:Math.abs(d-e)<S&&S<h-t?[Math.abs(l-e)<S?s:t,e]:null))-1),++c);c&&(y=!1)}if(y){for(var v,m,g,_,b,x=1/0,w=0,y=null;w<p;++w)(i=M[w])&&(v=(v=(o=i.site)[0]-t)*v+(v=o[1]-e)*v)<x&&(x=v,y=i);y&&(_=[n,r],b=[n,e],y.halfedges.push(k.push(createBorderEdge(o=y.site,m=[t,e],g=[t,r]))-1,k.push(createBorderEdge(o,g,_))-1,k.push(createBorderEdge(o,_,b))-1,k.push(createBorderEdge(o,b,m))-1))}for(w=0;w<p;++w)!(i=M[w])||i.halfedges.length||delete M[w]}RedBlackTree.prototype={constructor:RedBlackTree,insert:function insert(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=RedBlackFirst(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(RedBlackRotateLeft(this,n),n=(t=n).U),n.C=!1,r.C=!0,RedBlackRotateRight(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(RedBlackRotateRight(this,n),n=(t=n).U),n.C=!1,r.C=!0,RedBlackRotateLeft(this,r)),n=t.U;this._.C=!1},remove:function remove(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r=t.U,i=t.L,o=t.R,a=i?o?RedBlackFirst(o):i:o;if(r?r.L===t?r.L=a:r.R=a:this._=a,i&&o?(n=a.C,a.C=t.C,((a.L=i).U=a)!==o?(r=a.U,a.U=t.U,t=a.R,r.L=t,(a.R=o).U=a):(a.U=r,t=(r=a).R)):(n=t.C,t=a),t&&(t.U=r),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,RedBlackRotateLeft(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,RedBlackRotateRight(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,RedBlackRotateLeft(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,RedBlackRotateRight(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,RedBlackRotateLeft(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,RedBlackRotateRight(this,r),t=this._;break}}while(e.C=!0,r=(t=r).U,!t.C);t&&(t.C=!1)}}};var Ia,qa=[];function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(t){var e=t.P,n=t.N;if(e&&n){var e=e.site,r=t.site,n=n.site;if(e!==n){var i=r[0],o=r[1],a=e[0]-i,e=e[1]-o,u=n[0]-i,n=n[1]-o,c=2*(a*n-e*u);if(!(-Ba<=c)){for(var s=a*a+e*e,l=u*u+n*n,n=(n*s-e*l)/c,e=(a*l-u*s)/c,f=qa.pop()||new Circle,h=(f.arc=t,f.site=r,f.x=n+i,f.y=(f.cy=e+o)+Math.sqrt(n*n+e*e),t.circle=f,null),d=Ua._;d;)if(f.y<d.y||f.y===d.y&&f.x<=d.x){if(!d.L){h=d.P;break}d=d.L}else{if(!d.R){h=d;break}d=d.R}Ua.insert(h,f),h||(Ia=f)}}}}function detachCircle(t){var e=t.circle;e&&(e.P||(Ia=e.N),Ua.remove(e),qa.push(e),RedBlackNode(e),t.circle=null)}var Da=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(t){var e=Da.pop()||new Beach;return e.site=t,e}function detachBeach(t){detachCircle(t),Fa.remove(t),Da.push(t),RedBlackNode(t)}function addBeach(t){for(var e,n,r,i,o=t[0],a=t[1],u=Fa._;u;)if(r=leftBreakPoint(u,a)-o,S<r)u=u.L;else{if(i=o-function rightBreakPoint(t,e){var n=t.N;return n?leftBreakPoint(n,e):(n=t.site)[1]===e?n[0]:1/0}(u,a),!(S<i)){-S<r?(e=u.P,n=u):-S<i?n=(e=u).N:e=n=u;break}if(!u.R){e=u;break}u=u.R}!function createCell(t){M[t.index]={site:t,halfedges:[]}}(t);var c,s,l,f,h,d,p,y,v,m,g=createBeach(t);Fa.insert(e,g),(e||n)&&(e===n?(detachCircle(e),n=createBeach(e.site),Fa.insert(g,n),g.edge=n.edge=createEdge(e.site,g.site),attachCircle(e),attachCircle(n)):n?(detachCircle(e),detachCircle(n),s=(c=e.site)[0],l=c[1],f=t[0]-s,m=t[1]-l,d=(h=n.site)[0]-s,p=h[1]-l,setEdgeEnd(n.edge,c,h,m=[(p*(y=f*f+m*m)-m*(v=d*d+p*p))/(p=2*(f*p-m*d))+s,(f*v-d*y)/p+l]),g.edge=createEdge(c,t,null,m),n.edge=createEdge(t,h,null,m),attachCircle(e),attachCircle(n)):g.edge=createEdge(e.site,g.site))}function leftBreakPoint(t,e){var n,r,i,o=t.site,a=o[0],u=o[1],c=u-e;return c?(t=t.P)?(t=(o=t.site)[0],(e=(o=o[1])-e)?(i=(n=t-a)/e,(r=1/c-1/e)?(-i+Math.sqrt(i*i-2*r*(n*n/(-2*e)-o+e/2+u-c/2)))/r+a:(a+t)/2):t):-1/0:a}var Fa,M,Ua,k,S=1e-6,Ba=1e-12;function lexicographic(t,e){return e[1]-t[1]||e[0]-t[0]}function Diagram(t,e){var n,r,i,o,a,u,c=t.sort(lexicographic).pop();for(k=[],M=new Array(t.length),Fa=new RedBlackTree,Ua=new RedBlackTree;;)if(i=Ia,c&&(!i||c[1]<i.y||c[1]===i.y&&c[0]<i.x))c[0]===n&&c[1]===r||(addBeach(c),n=c[0],r=c[1]),c=t.pop();else{if(!i)break;!function removeBeach(t){for(var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,u=[t],c=(detachBeach(t),o);c.circle&&Math.abs(n-c.circle.x)<S&&Math.abs(r-c.circle.cy)<S;)o=c.P,u.unshift(c),detachBeach(c),c=o;u.unshift(c),detachCircle(c);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<S&&Math.abs(r-s.circle.cy)<S;)a=s.N,u.push(s),detachBeach(s),s=a;u.push(s),detachCircle(s);for(var l=u.length,f=1;f<l;++f)setEdgeEnd((s=u[f]).edge,(c=u[f-1]).site,s.site,i);(s=u[l-1]).edge=createEdge((c=u[0]).site,s.site,null,i),attachCircle(c),attachCircle(s)}(i.arc)}sortCellHalfedges(),e&&(clipEdges(o=+e[0][0],a=+e[0][1],u=+e[1][0],e=+e[1][1]),clipCells(o,a,u,e)),this.edges=k,this.cells=M,Fa=Ua=k=M=null}Diagram.prototype={constructor:Diagram,polygons:function polygons(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return cellHalfedgeStart(e,n[t])});return t.data=e.site.data,t})},triangles:function triangles(){var triangles=[],s=this.edges;return this.cells.forEach(function(t,e){for(var n,r=t.site,i=t.halfedges,o=-1,a=i.length,u=s[i[a-1]],c=u.left===r?u.right:u.left;++o<a;)n=c,c=(u=s[i[o]]).left===r?u.right:u.left,e<n.index&&e<c.index&&function triangleArea(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}(r,n,c)<0&&triangles.push([r.data,n.data,c.data])}),triangles},links:function links(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})}};function Lk(){var i=x$4,o=y$4,e=null;function voronoi(r){return new Diagram(r.map(function(t,e){var n=[Math.round(i(t,e,r)/S)*S,Math.round(o(t,e,r)/S)*S];return n.index=e,n.data=t,n}),e)}return voronoi.polygons=function(t){return voronoi(t).polygons()},voronoi.links=function(t){return voronoi(t).links()},voronoi.triangles=function(t){return voronoi(t).triangles()},voronoi.x=function(t){return arguments.length?(i="function"==typeof t?t:za(+t),voronoi):i},voronoi.y=function(t){return arguments.length?(o="function"==typeof t?t:za(+t),voronoi):o},voronoi.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],voronoi):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},voronoi.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],voronoi):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},voronoi}var Wa=function constant$10(t){return function(){return t}};function ZoomEvent(t,e,n){this.target=t,this.type=e,this.transform=n}function Transform(t,e,n){this.k=t,this.x=e,this.y=n}Transform.prototype={constructor:Transform,scale:function scale(t){return 1===t?this:new Transform(this.k*t,this.x,this.y)},translate:function translate(t,e){return 0===t&0===e?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function apply(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function applyX(t){return t*this.k+this.x},applyY:function applyY(t){return t*this.k+this.y},invert:function invert(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function invertX(t){return(t-this.x)/this.k},invertY:function invertY(t){return(t-this.y)/this.k},rescaleX:function rescaleX(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function rescaleY(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function toString(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ya=new Transform(1,0,0);function transform(t){return t.__zoom||Ya}function nopropagation$1(){j.event.stopImmediatePropagation()}transform.prototype=Transform.prototype;var Ha=function noevent$1(){j.event.preventDefault(),j.event.stopImmediatePropagation()};function defaultFilter$1(){return!j.event.button}function defaultExtent(){var t,e=this,e=e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,e.height.baseVal.value):(t=e.clientWidth,e.clientHeight);return[[0,0],[t,e]]}function defaultTransform(){return this.__zoom||Ya}function Pk(){var h,o,a=defaultFilter$1,s=defaultExtent,i=0,u=1/0,r=-u,c=u,l=r,f=c,d=250,p=[],e=dispatch("start","zoom","end"),y=500,v=150;function zoom(t){t.on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",defaultTransform)}function scale(t,e){return(e=Math.max(i,Math.min(u,e)))===t.k?t:new Transform(e,t.x,t.y)}function translate(t,e,n){var r=e[0]-n[0]*t.k,e=e[1]-n[1]*t.k;return r===t.x&&e===t.y?t:new Transform(t.k,r,e)}function constrain(t,e){var n=Math.min(0,t.invertX(e[0][0])-r)||Math.max(0,t.invertX(e[1][0])-c),e=Math.min(0,t.invertY(e[0][1])-l)||Math.max(0,t.invertY(e[1][1])-f);return n||e?t.translate(n,e):t}function centroid(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function schedule(t,n,c){t.on("start.zoom",function(){gesture(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){gesture(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=gesture(this,t),e=s.apply(this,t),i=c||centroid(e),o=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,a="function"==typeof n?n.apply(this,t):n,u=Rn(e.invert(i).concat(o/e.k),a.invert(i).concat(o/a.k));return function(t){var e,n;t=1===t?a:(e=u(t),new Transform(n=o/e[2],i[0]-e[0]*n,i[1]-e[1]*n)),r.zoom(null,t)}})}function gesture(t,e){for(var n,r=0,i=p.length;r<i;++r)if((n=p[r]).that===t)return n;return new Gesture(t,e)}function Gesture(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=s.apply(t,e)}function wheeled(){if(a.apply(this,arguments)){var t=gesture(this,arguments),e=this.__zoom,n=Math.max(i,Math.min(u,e.k*Math.pow(2,-j.event.deltaY*(j.event.deltaMode?120:1)/500))),r=To(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],la(this),t.start()}Ha(),t.wheel=setTimeout(function wheelidled(){t.wheel=null,t.end()},v),t.zoom("mouse",constrain(translate(scale(e,n),t.mouse[0],t.mouse[1]),t.extent))}}function mousedowned(){var t,e,n;!o&&a.apply(this,arguments)&&(t=gesture(this,arguments),e=Jo(j.event.view).on("mousemove.zoom",function mousemoved(){Ha(),t.moved=!0,t.zoom("mouse",constrain(translate(t.that.__zoom,t.mouse[0]=To(t.that),t.mouse[1]),t.extent))},!0).on("mouseup.zoom",function mouseupped(){e.on("mousemove.zoom mouseup.zoom",null),yesdrag(j.event.view,t.moved),Ha(),t.end()},!0),n=To(this),ja(j.event.view),nopropagation$1(),t.mouse=[n,this.__zoom.invert(n)],la(this),t.start())}function dblclicked(){var t,e,n;a.apply(this,arguments)&&(n=this.__zoom,t=To(this),e=n.invert(t),n=constrain(translate(scale(n,n.k*(j.event.shiftKey?.5:2)),t,e),s.apply(this,arguments)),Ha(),0<d?Jo(this).transition().duration(d).call(schedule,n,t):Jo(this).call(zoom.transform,n))}function touchstarted(){if(a.apply(this,arguments)){var t,e,n,r=gesture(this,arguments),i=j.event.changedTouches,o=i.length;for(nopropagation$1(),t=0;t<o;++t)e=i[t],n=[n=R9(this,i,e.identifier),this.__zoom.invert(n),e.identifier],r.touch0?r.touch1||(r.touch1=n):r.touch0=n;if(h&&(h=clearTimeout(h),!r.touch1))return r.end(),dblclicked.apply(this,arguments);j.event.touches.length===o&&(h=setTimeout(function(){h=null},y),la(this),r.start())}}function touchmoved(){var t,e=gesture(this,arguments),n=j.event.changedTouches,r=n.length;for(Ha(),h=h&&clearTimeout(h),t=0;t<r;++t)l=n[t],f=R9(this,n,l.identifier),e.touch0&&e.touch0[2]===l.identifier?e.touch0[0]=f:e.touch1&&e.touch1[2]===l.identifier&&(e.touch1[0]=f);if(l=e.that.__zoom,e.touch1)var i=e.touch0[0],o=e.touch0[1],a=e.touch1[0],u=e.touch1[1],c=(c=a[0]-i[0])*c+(c=a[1]-i[1])*c,s=(s=u[0]-o[0])*s+(s=u[1]-o[1])*s,l=scale(l,Math.sqrt(c/s)),f=[(i[0]+a[0])/2,(i[1]+a[1])/2],c=[(o[0]+u[0])/2,(o[1]+u[1])/2];else{if(!e.touch0)return;f=e.touch0[0],c=e.touch0[1]}e.zoom("touch",constrain(translate(l,f,c),e.extent))}function touchended(){var t,e,n=gesture(this,arguments),r=j.event.changedTouches,i=r.length;for(nopropagation$1(),o&&clearTimeout(o),o=setTimeout(function(){o=null},y),t=0;t<i;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0||n.end()}return zoom.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",defaultTransform),t!==n?schedule(t,e):n.interrupt().each(function(){gesture(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},zoom.scaleBy=function(t,e){zoom.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},zoom.scaleTo=function(t,i){zoom.transform(t,function(){var t=s.apply(this,arguments),e=this.__zoom,n=centroid(t),r=e.invert(n);return constrain(translate(scale(e,"function"==typeof i?i.apply(this,arguments):i),n,r),t)})},zoom.translateBy=function(t,e,n){zoom.transform(t,function(){return constrain(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),s.apply(this,arguments))})},Gesture.prototype={start:function start(){return 1==++this.active&&(this.index=p.push(this)-1,this.emit("start")),this},zoom:function zoom(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function end(){return 0==--this.active&&(p.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function emit(t){customEvent(new ZoomEvent(zoom,t,this.that.__zoom),e.apply,e,[t,this.that,this.args])}},zoom.filter=function(t){return arguments.length?(a="function"==typeof t?t:Wa(!!t),zoom):a},zoom.extent=function(t){return arguments.length?(s="function"==typeof t?t:Wa([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),zoom):s},zoom.scaleExtent=function(t){return arguments.length?(i=+t[0],u=+t[1],zoom):[i,u]},zoom.translateExtent=function(t){return arguments.length?(r=+t[0][0],c=+t[1][0],l=+t[0][1],f=+t[1][1],zoom):[[r,l],[c,f]]},zoom.duration=function(t){return arguments.length?(d=+t,zoom):d},zoom.on=function(){var t=e.on.apply(e,arguments);return t===e?zoom:t},zoom}var Va=function constant$11(t){return function(){return t}},Xa=function BrushEvent(t,e,n){this.target=t,this.type=e,this.selection=n};function nopropagation$2(){j.event.stopImmediatePropagation()}var Ga=function noevent$2(){j.event.preventDefault(),j.event.stopImmediatePropagation()},Za={name:"drag"},Ka={name:"space"},Qa={name:"handle"},Ja={name:"center"},tu={name:"x",handles:["e","w"].map(type$1),input:function input(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function output(t){return t&&[t[0][0],t[1][0]]}},eu={name:"y",handles:["n","s"].map(type$1),input:function input(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function output(t){return t&&[t[0][1],t[1][1]]}},nu={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(type$1),input:function input(t){return t},output:function output(t){return t}},ru={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},iu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ou={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},au={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},uu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type$1(t){return{type:t}}function defaultFilter$2(){return!j.event.button}function defaultExtent$1(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function local$1(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function empty$1(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}zo=function brush(){return brush$1(nu)};function brush$1(R){var L,e=defaultExtent$1,O=defaultFilter$2,n=dispatch(brush,"start","brush","end"),r=6;function brush(t){var e=t.property("__brush",initialize).selectAll(".overlay").data([{type:"overlay"}]),e=(e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ru.overlay).merge(e).each(function(){var t=local$1(this).extent;Jo(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([{type:"selection"}]).enter().append("rect").attr("class","selection").attr("cursor",ru.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges"),t.selectAll(".handle").data(R.handles,function(t){return t.type}));e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return ru[t.type]}),t.each(redraw).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",started)}function redraw(){var t=Jo(this),e=local$1(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-r/2:e[0][0]-r/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-r/2:e[0][1]-r/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+r:r}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+r:r})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(t,e){return t.__brush.emitter||new Emitter(t,e)}function Emitter(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function started(){if(j.event.touches){if(j.event.changedTouches.length<j.event.touches.length)return Ga()}else if(L)return;var e,n,r,i,o,a,t,u,c,s,l,f,h,d,p,y,v,m,g,_,b,x,w,M,k,S,C,N,T,P,A,E;function moved(){var t=To(e);!M||k||S||(Math.abs(t[0]-N[0])>Math.abs(t[1]-N[1])?S=!0:k=!0),N=t,w=!0,Ga(),move()}function move(){var t;switch(b=N[0]-C[0],x=N[1]-C[1],r){case Ka:case Za:i&&(b=Math.max(c-s,Math.min(p-y,b)),l=s+b,v=y+b),o&&(x=Math.max(f-h,Math.min(m-g,x)),d=h+x,_=g+x);break;case Qa:i<0?(b=Math.max(c-s,Math.min(p-s,b)),l=s+b,v=y):0<i&&(b=Math.max(c-y,Math.min(p-y,b)),l=s,v=y+b),o<0?(x=Math.max(f-h,Math.min(m-h,x)),d=h+x,_=g):0<o&&(x=Math.max(f-g,Math.min(m-g,x)),d=h,_=g+x);break;case Ja:i&&(l=Math.max(c,Math.min(p,s-b*i)),v=Math.max(c,Math.min(p,y+b*i))),o&&(d=Math.max(f,Math.min(m,h-x*o)),_=Math.max(f,Math.min(m,g+x*o)))}v<l&&(i*=-1,t=s,s=y,y=t,t=l,l=v,v=t,n in iu)&&A.attr("cursor",ru[n=iu[n]]),_<d&&(o*=-1,t=h,h=g,g=t,t=d,d=_,_=t,n in ou)&&A.attr("cursor",ru[n=ou[n]]),a.selection&&(u=a.selection),k&&(l=u[0][0],v=u[1][0]),S&&(d=u[0][1],_=u[1][1]),u[0][0]===l&&u[0][1]===d&&u[1][0]===v&&u[1][1]===_||(a.selection=[[l,d],[v,_]],redraw.call(e),T.brush())}function ended(){if(nopropagation$2(),j.event.touches){if(j.event.touches.length)return;L&&clearTimeout(L),L=setTimeout(function(){L=null},500),P.on("touchmove.brush touchend.brush touchcancel.brush",null)}else yesdrag(j.event.view,w),E.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),A.attr("cursor",ru.overlay),empty$1(u=a.selection?a.selection:u)&&(a.selection=null,redraw.call(e)),T.end()}O.apply(this,arguments)&&(e=this,n=j.event.target.__data__.type,r="selection"===(j.event.metaKey?n="overlay":n)?Za:j.event.altKey?Ja:Qa,i=R===eu?null:au[n],o=R===tu?null:uu[n],t=(a=local$1(e)).extent,u=a.selection,c=t[0][0],f=t[0][1],p=t[1][0],m=t[1][1],M=i&&o&&j.event.shiftKey,C=To(e),N=C,T=emitter(e,arguments).beforestart(),"overlay"===n?a.selection=u=[[s=R===eu?c:C[0],h=R===tu?f:C[1]],[y=R===eu?p:s,g=R===tu?m:h]]:(s=u[0][0],h=u[0][1],y=u[1][0],g=u[1][1]),l=s,d=h,v=y,_=g,P=Jo(e).attr("pointer-events","none"),A=P.selectAll(".overlay").attr("cursor",ru[n]),j.event.touches?P.on("touchmove.brush",moved,!0).on("touchend.brush touchcancel.brush",ended,!0):(E=Jo(j.event.view).on("keydown.brush",function keydowned(){switch(j.event.keyCode){case 16:M=i&&o;break;case 18:r===Qa&&(i&&(y=v-b*i,s=l+b*i),o&&(g=_-x*o,h=d+x*o),r=Ja,move());break;case 32:r!==Qa&&r!==Ja||(i<0?y=v-b:0<i&&(s=l-b),o<0?g=_-x:0<o&&(h=d-x),r=Ka,A.attr("cursor",ru.selection),move());break;default:return}Ga()},!0).on("keyup.brush",function keyupped(){switch(j.event.keyCode){case 16:M&&(k=S=M=!1,move());break;case 18:r===Ja&&(i<0?y=v:0<i&&(s=l),o<0?g=_:0<o&&(h=d),r=Qa,move());break;case 32:r===Ka&&(r=j.event.altKey?(i&&(y=v-b*i,s=l+b*i),o&&(g=_-x*o,h=d+x*o),Ja):(i<0?y=v:0<i&&(s=l),o<0?g=_:0<o&&(h=d),Qa),A.attr("cursor",ru[n]),move());break;default:return}Ga()},!0).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0),ja(j.event.view)),nopropagation$2(),la(e),redraw.call(e),T.start())}function initialize(){var t=this.__brush||{selection:null};return t.extent=e.apply(this,arguments),t.dim=R,t}return brush.move=function(t,a){t.selection?t.on("start.brush",function(){emitter(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){emitter(this,arguments).end()}).tween("brush",function(){var e=this,n=e.__brush,r=emitter(e,arguments),t=n.selection,i=R.input("function"==typeof a?a.apply(this,arguments):a,n.extent),o=kn(t,i);function tween(t){n.selection=1===t&&empty$1(i)?null:o(t),redraw.call(e),r.brush()}return t&&i?tween:tween(1)}):t.each(function(){var t=arguments,e=this.__brush,n=R.input("function"==typeof a?a.apply(this,t):a,e.extent),t=emitter(this,t).beforestart();la(this),e.selection=null==n||empty$1(n)?null:n,redraw.call(this),t.start().brush().end()})},Emitter.prototype={beforestart:function beforestart(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function start(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function brush(){return this.emit("brush"),this},end:function end(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function emit(t){customEvent(new Xa(brush,t,R.output(this.state.selection)),n.apply,n,[t,this.that,this.args])}},brush.extent=function(t){return arguments.length?(e="function"==typeof t?t:Va([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),brush):e},brush.filter=function(t){return arguments.length?(O="function"==typeof t?t:Va(!!t),brush):O},brush.handleSize=function(t){return arguments.length?(r=+t,brush):r},brush.on=function(){var t=n.on.apply(n,arguments);return t===n?brush:t},brush}var cu=Math.cos,su=Math.sin,Ro=Math.PI,lu=Ro/2,fu=2*Ro,hu=Math.max;function kl(){var x=0,w=null,M=null,k=null;function chord(r){for(var t,e,n,i,o=r.length,a=[],u=X(o),c=[],s=[],l=s.groups=new Array(o),f=new Array(o*o),h=0,d=-1;++d<o;){for(t=0,i=-1;++i<o;)t+=r[d][i];a.push(t),c.push(X(o)),h+=t}for(w&&u.sort(function(t,e){return w(a[t],a[e])}),M&&c.forEach(function(t,n){t.sort(function(t,e){return M(r[n][t],r[n][e])})}),n=(h=hu(0,fu-x*o)/h)?x:fu/o,t=0,d=-1;++d<o;){for(e=t,i=-1;++i<o;){var p=u[d],y=c[p][i],v=r[p][y],m=t,g=t+=v*h;f[y*o+p]={index:p,subindex:y,startAngle:m,endAngle:g,value:v}}l[p]={index:p,startAngle:e,endAngle:t,value:a[p]},t+=n}for(d=-1;++d<o;)for(i=d-1;++i<o;){var _=f[i*o+d],b=f[d*o+i];(_.value||b.value)&&s.push(_.value<b.value?{source:b,target:_}:{source:_,target:b})}return k?s.sort(k):s}return chord.padAngle=function(t){return arguments.length?(x=hu(0,t),chord):x},chord.sortGroups=function(t){return arguments.length?(w=t,chord):w},chord.sortSubgroups=function(t){return arguments.length?(M=t,chord):M},chord.sortChords=function(t){return arguments.length?(null==t?k=null:(k=function compareValue(n){return function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)}}(t))._=t,chord):k&&k._},chord}var du=Array.prototype.slice,pu=function constant$12(t){return function(){return t}};function defaultSource(t){return t.source}function defaultTarget(t){return t.target}function defaultRadius$1(t){return t.radius}function defaultStartAngle(t){return t.startAngle}function defaultEndAngle(t){return t.endAngle}function nl(){var s=defaultSource,l=defaultTarget,f=defaultRadius$1,h=defaultStartAngle,d=defaultEndAngle,p=null;function ribbon(){var t,e=du.call(arguments),n=s.apply(this,e),r=l.apply(this,e),n=+f.apply(this,(e[0]=n,e)),i=h.apply(this,e)-lu,o=d.apply(this,e)-lu,a=n*cu(i),u=n*su(i),r=+f.apply(this,(e[0]=r,e)),c=h.apply(this,e)-lu,e=d.apply(this,e)-lu;if((p=p||(t=path())).moveTo(a,u),p.arc(0,0,n,i,o),i==c&&o==e||(p.quadraticCurveTo(0,0,r*cu(c),r*su(c)),p.arc(0,0,r,c,e)),p.quadraticCurveTo(0,0,a,u),p.closePath(),t)return p=null,t+""||null}return ribbon.radius=function(t){return arguments.length?(f="function"==typeof t?t:pu(+t),ribbon):f},ribbon.startAngle=function(t){return arguments.length?(h="function"==typeof t?t:pu(+t),ribbon):h},ribbon.endAngle=function(t){return arguments.length?(d="function"==typeof t?t:pu(+t),ribbon):d},ribbon.source=function(t){return arguments.length?(s=t,ribbon):s},ribbon.target=function(t){return arguments.length?(l=t,ribbon):l},ribbon.context=function(t){return arguments.length?(p=null==t?null:t,ribbon):p},ribbon}Oo=function adder(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function reset(){this.s=this.t=0},add:function add(t){add$1(yu,t,this.t),add$1(this,yu.s,this.s),this.s?this.t+=yu.t:this.s=yu.t},valueOf:function valueOf(){return this.s}};var yu=new Adder;function add$1(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var P=1e-6,C=Math.PI,s=C/2,vu=C/4,N=2*C,A=180/C,E=C/180,R=Math.abs,mu=Math.atan,L=Math.atan2,O=Math.cos,gu=Math.ceil,_u=Math.exp,bu=Math.log,xu=Math.pow,z=Math.sin,wu=Math.sign||function(t){return 0<t?1:t<0?-1:0},I=Math.sqrt,Mu=Math.tan;function acos(t){return 1<t?0:t<-1?C:Math.acos(t)}function asin$1(t){return 1<t?s:t<-1?-s:Math.asin(t)}function haversin(t){return(t=z(t/2))*t}function noop$2(){}function streamGeometry(t,e){t&&Su.hasOwnProperty(t.type)&&Su[t.type](t,e)}var ku={Feature:function Feature(t,e){streamGeometry(t.geometry,e)},FeatureCollection:function FeatureCollection(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)streamGeometry(n[r].geometry,e)}},Su={Sphere:function Sphere(t,e){e.sphere()},Point:function Point(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function MultiPoint(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function LineString(t,e){streamLine(t.coordinates,e,0)},MultiLineString:function MultiLineString(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)streamLine(n[r],e,0)},Polygon:function Polygon(t,e){streamPolygon(t.coordinates,e)},MultiPolygon:function MultiPolygon(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)streamPolygon(n[r],e)},GeometryCollection:function GeometryCollection(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)streamGeometry(n[r],e)}};function streamLine(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function streamPolygon(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)streamLine(t[n],e,1);e.polygonEnd()}var Cu,Nu,Tu,Pu,Au,Eu=function geoStream(t,e){t&&ku.hasOwnProperty(t.type)?ku[t.type](t,e):streamGeometry(t,e)},Ru=Oo(),Lu=Oo(),Ou={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function polygonStart(){Ru.reset(),Ou.lineStart=areaRingStart,Ou.lineEnd=areaRingEnd},polygonEnd:function polygonEnd(){var t=+Ru;Lu.add(t<0?N+t:t),this.lineStart=this.lineEnd=this.point=noop$2},sphere:function sphere(){Lu.add(N)}};function areaRingStart(){Ou.point=areaPointFirst}function areaRingEnd(){areaPoint(Cu,Nu)}function areaPointFirst(t,e){Ou.point=areaPoint,Cu=t,Nu=e,Tu=t*=E,Pu=O(e=(e*=E)/2+vu),Au=z(e)}function areaPoint(t,e){var n=(t*=E)-Tu,r=0<=n?1:-1,n=r*n,i=O(e=(e*=E)/2+vu),e=z(e),o=Au*e,a=Pu*i+o*O(n),o=o*r*z(n);Ru.add(L(o,a)),Tu=t,Pu=i,Au=e}var l,ju,f,$u,zu,Iu,qu,Du,Fo=function area$2(t){return Lu.reset(),Eu(t,Ou),2*Lu};function spherical(t){return[L(t[1],t[0]),asin$1(t[2])]}function cartesian(t){var e=t[0],t=t[1],n=O(t);return[n*O(e),n*z(e),z(t)]}function cartesianDot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cartesianCross(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cartesianAddInPlace(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function cartesianScale(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cartesianNormalizeInPlace(t){var e=I(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Fu,Uu,Bu=Oo(),Wu={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function polygonStart(){Wu.point=boundsRingPoint,Wu.lineStart=boundsRingStart,Wu.lineEnd=boundsRingEnd,Bu.reset(),Ou.polygonStart()},polygonEnd:function polygonEnd(){Ou.polygonEnd(),Wu.point=boundsPoint,Wu.lineStart=boundsLineStart,Wu.lineEnd=boundsLineEnd,Ru<0?(l=-(f=180),ju=-($u=90)):P<Bu?$u=90:Bu<-P&&(ju=-90),Uu[0]=l,Uu[1]=f}};function boundsPoint(t,e){Fu.push(Uu=[l=t,f=t]),e<ju&&(ju=e),$u<e&&($u=e)}function linePoint(t,e){var n,r,i,o,a,u=cartesian([t*E,e*E]);Du?(n=cartesianCross(Du,u),cartesianNormalizeInPlace(n=cartesianCross([n[1],-n[0],0],n)),n=spherical(n),a=t-zu,i=n[0]*A*(r=0<a?1:-1),(a=180<R(a))^(r*zu<i&&i<r*t)?(o=n[1]*A,$u<o&&($u=o)):a^(r*zu<(i=(360+i)%360-180)&&i<r*t)?(o=-n[1]*A)<ju&&(ju=o):(e<ju&&(ju=e),$u<e&&($u=e)),a?t<zu?angle(l,t)>angle(l,f)&&(f=t):angle(t,f)>angle(l,f)&&(l=t):l<=f?(t<l&&(l=t),f<t&&(f=t)):zu<t?angle(l,t)>angle(l,f)&&(f=t):angle(t,f)>angle(l,f)&&(l=t)):boundsPoint(t,e),Du=u,zu=t}function boundsLineStart(){Wu.point=linePoint}function boundsLineEnd(){Uu[0]=l,Uu[1]=f,Wu.point=boundsPoint,Du=null}function boundsRingPoint(t,e){var n;Du?(n=t-zu,Bu.add(180<R(n)?n+(0<n?360:-360):n)):(Iu=t,qu=e),Ou.point(t,e),linePoint(t,e)}function boundsRingStart(){Ou.lineStart()}function boundsRingEnd(){boundsRingPoint(Iu,qu),Ou.lineEnd(),R(Bu)>P&&(l=-(f=180)),Uu[0]=l,Uu[1]=f,Du=null}function angle(t,e){return(e-=t)<0?e+360:e}function rangeCompare(t,e){return t[0]-e[0]}function rangeContains(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Yu,Hu,Vu,Xu,Gu,Zu,Ku,Qu,Ju,tc,ec,nc,rc,h,d,v,Ro=function bounds(t){var e,n,r,i,o,a,u;if($u=f=-(l=ju=1/0),Fu=[],Eu(t,Wu),n=Fu.length){for(Fu.sort(rangeCompare),e=1,o=[r=Fu[0]];e<n;++e)rangeContains(r,(i=Fu[e])[0])||rangeContains(r,i[1])?(angle(r[0],i[1])>angle(r[0],r[1])&&(r[1]=i[1]),angle(i[0],r[1])>angle(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)(u=angle(r[1],(i=o[e])[0]))>a&&(a=u,l=i[0],f=r[1])}return Fu=Uu=null,l===1/0||ju===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,ju],[f,$u]]},ic={sphere:noop$2,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function polygonStart(){ic.lineStart=centroidRingStart,ic.lineEnd=centroidRingEnd},polygonEnd:function polygonEnd(){ic.lineStart=centroidLineStart,ic.lineEnd=centroidLineEnd}};function centroidPoint(t,e){t*=E;var n=O(e*=E);centroidPointCartesian(n*O(t),n*z(t),z(e))}function centroidPointCartesian(t,e,n){Vu+=(t-Vu)/++Yu,Xu+=(e-Xu)/Yu,Gu+=(n-Gu)/Yu}function centroidLineStart(){ic.point=centroidLinePointFirst}function centroidLinePointFirst(t,e){t*=E;var n=O(e*=E);h=n*O(t),d=n*z(t),v=z(e),ic.point=centroidLinePoint,centroidPointCartesian(h,d,v)}function centroidLinePoint(t,e){t*=E;var n=O(e*=E),r=n*O(t),n=n*z(t),t=z(e),e=L(I((e=d*t-v*n)*e+(e=v*r-h*t)*e+(e=h*n-d*r)*e),h*r+d*n+v*t);Hu+=e,Zu+=e*(h+(h=r)),Ku+=e*(d+(d=n)),Qu+=e*(v+(v=t)),centroidPointCartesian(h,d,v)}function centroidLineEnd(){ic.point=centroidPoint}function centroidRingStart(){ic.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(nc,rc),ic.point=centroidPoint}function centroidRingPointFirst(t,e){nc=t,rc=e,t*=E,e*=E,ic.point=centroidRingPoint;var n=O(e);h=n*O(t),d=n*z(t),v=z(e),centroidPointCartesian(h,d,v)}function centroidRingPoint(t,e){t*=E;var n=O(e*=E),r=n*O(t),n=n*z(t),t=z(e),e=d*t-v*n,i=v*r-h*t,o=h*n-d*r,a=I(e*e+i*i+o*o),u=h*r+d*n+v*t,c=a&&-acos(u)/a,a=L(a,u);Ju+=c*e,tc+=c*i,ec+=c*o,Hu+=a,Zu+=a*(h+(h=r)),Ku+=a*(d+(d=n)),Qu+=a*(v+(v=t)),centroidPointCartesian(h,d,v)}var oc=function centroid$1(t){Yu=Hu=Vu=Xu=Gu=Zu=Ku=Qu=Ju=tc=ec=0,Eu(t,ic);var t=Ju,e=tc,n=ec,r=t*t+e*e+n*n;return r<1e-12&&(t=Zu,e=Ku,n=Qu,Hu<P&&(t=Vu,e=Xu,n=Gu),(r=t*t+e*e+n*n)<1e-12)?[NaN,NaN]:[L(e,t)*A,asin$1(n/I(r))*A]},ac=function constant$13(t){return function(){return t}},uc=function compose(n,r){function compose(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(compose.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),compose};function rotationIdentity(t,e){return[C<t?t-N:t<-C?t+N:t,e]}function rotateRadians(t,e,n){return(t%=N)?e||n?uc(rotationLambda(t),rotationPhiGamma(e,n)):rotationLambda(t):e||n?rotationPhiGamma(e,n):rotationIdentity}function forwardRotationLambda(n){return function(t,e){return[C<(t+=n)?t-N:t<-C?t+N:t,e]}}function rotationLambda(t){var e=forwardRotationLambda(t);return e.invert=forwardRotationLambda(-t),e}function rotationPhiGamma(t,e){var i=O(t),o=z(t),a=O(e),u=z(e);function rotation(t,e){var n=O(e),r=O(t)*n,t=z(t)*n,n=z(e),e=n*i+r*o;return[L(t*a-e*u,r*i-n*o),asin$1(e*a+t*u)]}return rotation.invert=function(t,e){var n=O(e),r=O(t)*n,t=z(t)*n,n=z(e),e=n*a-t*u;return[L(t*a+n*u,r*i+e*o),asin$1(e*i-r*o)]},rotation}rotationIdentity.invert=rotationIdentity;var cc=function rotation(e){function forward(t){return(t=e(t[0]*E,t[1]*E))[0]*=A,t[1]*=A,t}return e=rotateRadians(e[0]*E,e[1]*E,2<e.length?e[2]*E:0),forward.invert=function(t){return(t=e.invert(t[0]*E,t[1]*E))[0]*=A,t[1]*=A,t},forward};function circleStream(t,e,n,r,i,o){if(n){var a=O(e),u=z(e),c=r*n;null==i?(i=e+r*N,o=e-c/2):(i=circleRadius(a,i),o=circleRadius(a,o),(0<r?i<o:o<i)&&(i+=r*N));for(var s,l=i;0<r?o<l:l<o;l-=c)s=spherical([a,-u*O(l),-u*z(l)]),t.point(s[0],s[1])}}function circleRadius(t,e){(e=cartesian(e))[0]-=t,cartesianNormalizeInPlace(e);t=acos(-e[1]);return((-e[2]<0?-t:t)+N-P)%N}var sc=function circle$1(){var r,i,o=ac([0,0]),a=ac(90),u=ac(6),c={point:function point(t,e){r.push(t=i(t,e)),t[0]*=A,t[1]*=A}};function circle(){var t=o.apply(this,arguments),e=a.apply(this,arguments)*E,n=u.apply(this,arguments)*E;return r=[],i=rotateRadians(-t[0]*E,-t[1]*E,0).invert,circleStream(c,e,n,1),t={type:"Polygon",coordinates:[r]},r=i=null,t}return circle.center=function(t){return arguments.length?(o="function"==typeof t?t:ac([+t[0],+t[1]]),circle):o},circle.radius=function(t){return arguments.length?(a="function"==typeof t?t:ac(+t),circle):a},circle.precision=function(t){return arguments.length?(u="function"==typeof t?t:ac(+t),circle):u},circle},lc=function clipBuffer(){var n,t=[];return{point:function point(t,e){n.push([t,e])},lineStart:function lineStart(){t.push(n=[])},lineEnd:noop$2,rejoin:function rejoin(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function result(){var result=t;return t=[],n=null,result}}},fc=function clipLine(t,e,n,r,i,o){var a=t[0],u=t[1],c=0,s=1,l=e[0]-a,f=e[1]-u,n=n-a;if(l||!(0<n)){if(n/=l,l<0){if(n<c)return;n<s&&(s=n)}else if(0<l){if(s<n)return;c<n&&(c=n)}if(n=i-a,l||!(n<0)){if(n/=l,l<0){if(s<n)return;c<n&&(c=n)}else if(0<l){if(n<c)return;n<s&&(s=n)}if(n=r-u,f||!(0<n)){if(n/=f,f<0){if(n<c)return;n<s&&(s=n)}else if(0<f){if(s<n)return;c<n&&(c=n)}if(n=o-u,f||!(n<0)){if(n/=f,f<0){if(s<n)return;c<n&&(c=n)}else if(0<f){if(n<c)return;n<s&&(s=n)}return 0<c&&(t[0]=a+c*l,t[1]=u+c*f),s<1&&(e[0]=a+s*l,e[1]=u+s*f),!0}}}}},hc=function pointEqual(t,e){return R(t[0]-e[0])<P&&R(t[1]-e[1])<P};function Intersection(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var dc=function clipPolygon(t,e,n,r,o){var a,i,u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(hc(r,i)){for(o.lineStart(),a=0;a<e;++a)o.point((r=t[a])[0],r[1]);o.lineEnd()}else u.push(n=new Intersection(r,t,null,!0)),c.push(n.o=new Intersection(r,null,n,!1)),u.push(n=new Intersection(i,t,null,!1)),c.push(n.o=new Intersection(i,null,n,!0))}}),u.length){for(c.sort(e),link$1(u),link$1(c),a=0,i=c.length;a<i;++a)c[a].e=n=!n;for(var s,l,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;s=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,i=s.length;a<i;++a)o.point((l=s[a])[0],l[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(d)for(s=h.p.z,a=s.length-1;0<=a;--a)o.point((l=s[a])[0],l[1]);else r(h.x,h.p.x,-1,o);h=h.p}}while(s=(h=h.o).z,d=!d,!h.v);o.lineEnd()}}};function link$1(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var pc=1e9,yc=-pc;function clipExtent(v,m,g,_){function visible(t,e){return v<=t&&t<=g&&m<=e&&e<=_}function interpolate(t,e,n,r){var i=0,o=0;if(null==t||(i=corner(t,n))!==(o=corner(e,n))||comparePoint(t,e)<0^0<n)for(;r.point(0===i||3===i?v:g,1<i?_:m),(i=(i+n+4)%4)!==o;);else r.point(e[0],e[1])}function corner(t,e){return R(t[0]-v)<P?0<e?0:3:R(t[0]-g)<P?0<e?2:1:R(t[1]-m)<P?0<e?1:0:0<e?3:2}function compareIntersection(t,e){return comparePoint(t.x,e.x)}function comparePoint(t,e){var n=corner(t,1),r=corner(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var i,f,o,a,u,c,s,l,h,d,p,y=r,t=lc(),e={point:point,lineStart:function lineStart(){e.point=linePoint,f&&f.push(o=[]);d=!0,h=!1,s=l=NaN},lineEnd:function lineEnd(){i&&(linePoint(a,u),c&&h&&t.rejoin(),i.push(t.result()));e.point=point,h&&y.lineEnd()},polygonStart:function polygonStart(){y=t,i=[],f=[],p=!0},polygonEnd:function polygonEnd(){var t=function polygonInside(){for(var t=0,e=0,n=f.length;e<n;++e)for(var r,i,o=f[e],a=1,u=o.length,c=o[0],s=c[0],l=c[1];a<u;++a)r=s,i=l,c=o[a],s=c[0],l=c[1],i<=_?_<l&&(l-i)*(v-r)<(s-r)*(_-i)&&++t:l<=_&&(s-r)*(_-i)<(l-i)*(v-r)&&--t;return t}(),e=p&&t,n=(i=ot(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),interpolate(null,null,1,r),r.lineEnd()),n&&dc(i,compareIntersection,t,interpolate,r),r.polygonEnd());y=r,i=f=o=null}};function point(t,e){visible(t,e)&&y.point(t,e)}function linePoint(t,e){var n,r,i=visible(t,e);f&&o.push([t,e]),d?(a=t,u=e,d=!1,(c=i)&&(y.lineStart(),y.point(t,e))):i&&h?y.point(t,e):(n=[s=Math.max(yc,Math.min(pc,s)),l=Math.max(yc,Math.min(pc,l))],r=[t=Math.max(yc,Math.min(pc,t)),e=Math.max(yc,Math.min(pc,e))],fc(n,r,v,m,g,_)?(h||(y.lineStart(),y.point(n[0],n[1])),y.point(r[0],r[1]),i||y.lineEnd(),p=!1):i&&(y.lineStart(),y.point(t,e),p=!1)),s=t,l=e,h=i}return e}}var vc,mc,gc,_c=function extent$1(){var e,n,r,i=0,o=0,a=960,u=500;return r={stream:function stream(t){return e&&n===t?e:e=clipExtent(i,o,a,u)(n=t)},extent:function extent(t){return arguments.length?(i=+t[0][0],o=+t[0][1],a=+t[1][0],u=+t[1][1],e=n=null,r):[[i,o],[a,u]]}}},bc=Oo(),xc={sphere:noop$2,point:noop$2,lineStart:function lengthLineStart(){xc.point=lengthPointFirst,xc.lineEnd=lengthLineEnd},lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2};function lengthLineEnd(){xc.point=xc.lineEnd=noop$2}function lengthPointFirst(t,e){vc=t*=E,mc=z(e*=E),gc=O(e),xc.point=lengthPoint}function lengthPoint(t,e){t*=E;var n=z(e*=E),e=O(e),r=R(t-vc),i=O(r),r=e*z(r),o=gc*n-mc*e*i,i=mc*n+gc*e*i;bc.add(L(I(r*r+o*o),i)),vc=t,mc=n,gc=e}var wc=function length$2(t){return bc.reset(),Eu(t,xc),+bc},Mc=[null,null],kc={type:"LineString",coordinates:Mc},Sc=function distance(t,e){return Mc[0]=t,Mc[1]=e,wc(kc)};function graticuleX(t,e,n){var r=X(t,e-P,n).concat(e);return function(e){return r.map(function(t){return[e,t]})}}function graticuleY(t,e,n){var r=X(t,e-P,n).concat(e);return function(e){return r.map(function(t){return[t,e]})}}function Tm(){var e,n,r,i,o,a,u,c,s,l,f,h,d=10,p=d,y=90,v=360,m=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return X(gu(i/y)*y,r,y).map(f).concat(X(gu(c/v)*v,u,v).map(h)).concat(X(gu(n/d)*d,e,d).filter(function(t){return R(t%y)>P}).map(s)).concat(X(gu(a/p)*p,o,p).filter(function(t){return R(t%v)>P}).map(l))}return graticule.lines=function(){return lines().map(function(t){return{type:"LineString",coordinates:t}})},graticule.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(u).slice(1),f(r).reverse().slice(1),h(c).reverse().slice(1))]}},graticule.extent=function(t){return arguments.length?graticule.extentMajor(t).extentMinor(t):graticule.extentMinor()},graticule.extentMajor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],c=+t[0][1],u=+t[1][1],r<i&&(t=i,i=r,r=t),u<c&&(t=c,c=u,u=t),graticule.precision(m)):[[i,c],[r,u]]},graticule.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],e<n&&(t=n,n=e,e=t),o<a&&(t=a,a=o,o=t),graticule.precision(m)):[[n,a],[e,o]]},graticule.step=function(t){return arguments.length?graticule.stepMajor(t).stepMinor(t):graticule.stepMinor()},graticule.stepMajor=function(t){return arguments.length?(y=+t[0],v=+t[1],graticule):[y,v]},graticule.stepMinor=function(t){return arguments.length?(d=+t[0],p=+t[1],graticule):[d,p]},graticule.precision=function(t){return arguments.length?(m=+t,s=graticuleX(a,o,90),l=graticuleY(n,e,m),f=graticuleX(c,u,90),h=graticuleY(i,r,m),graticule):m},graticule.extentMajor([[-180,-90+P],[180,90-P]]).extentMinor([[-180,-80-P],[180,80+P]])}var Cc,Nc,Tc,Pc,Ac=function interpolate$2(t,e){var n=t[0]*E,r=t[1]*E,t=e[0]*E,e=e[1]*E,i=O(r),o=z(r),a=O(e),u=z(e),c=i*O(n),s=i*z(n),l=a*O(t),f=a*z(t),h=2*asin$1(I(haversin(e-r)+i*a*haversin(t-n))),d=z(h),e=h?function(t){var e=z(t*=h)/d,t=z(h-t)/d,n=t*c+e*l,r=t*s+e*f,t=t*o+e*u;return[L(r,n)*A,L(t,I(n*n+r*r))*A]}:function(){return[n*A,r*A]};return e.distance=h,e},Ec=function identity$7(t){return t},Rc=Oo(),Lc=Oo(),Oc={point:noop$2,lineStart:noop$2,lineEnd:noop$2,polygonStart:function polygonStart(){Oc.lineStart=areaRingStart$1,Oc.lineEnd=areaRingEnd$1},polygonEnd:function polygonEnd(){Oc.lineStart=Oc.lineEnd=Oc.point=noop$2,Rc.add(R(Lc)),Lc.reset()},result:function result(){var t=Rc/2;return Rc.reset(),t}};function areaRingStart$1(){Oc.point=areaPointFirst$1}function areaPointFirst$1(t,e){Oc.point=areaPoint$1,Cc=Tc=t,Nc=Pc=e}function areaPoint$1(t,e){Lc.add(Pc*t-Tc*e),Tc=t,Pc=e}function areaRingEnd$1(){areaPoint$1(Cc,Nc)}var jc=1/0,$c=jc,zc=-jc,Ic=zc,qc={point:function boundsPoint$1(t,e){t<jc&&(jc=t);zc<t&&(zc=t);e<$c&&($c=e);Ic<e&&(Ic=e)},lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function result(){var t=[[jc,$c],[zc,Ic]];return zc=Ic=-($c=jc=1/0),t}};var Dc,Fc,Uc,Bc,Wc=0,Yc=0,Hc=0,Vc=0,Xc=0,Gc=0,Zc=0,Kc=0,Qc=0,Jc={point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function polygonStart(){Jc.lineStart=centroidRingStart$1,Jc.lineEnd=centroidRingEnd$1},polygonEnd:function polygonEnd(){Jc.point=centroidPoint$1,Jc.lineStart=centroidLineStart$1,Jc.lineEnd=centroidLineEnd$1},result:function result(){var t=Qc?[Zc/Qc,Kc/Qc]:Gc?[Vc/Gc,Xc/Gc]:Hc?[Wc/Hc,Yc/Hc]:[NaN,NaN];return Wc=Yc=Hc=Vc=Xc=Gc=Zc=Kc=Qc=0,t}};function centroidPoint$1(t,e){Wc+=t,Yc+=e,++Hc}function centroidLineStart$1(){Jc.point=centroidPointFirstLine}function centroidPointFirstLine(t,e){Jc.point=centroidPointLine,centroidPoint$1(Uc=t,Bc=e)}function centroidPointLine(t,e){var n=t-Uc,r=e-Bc,n=I(n*n+r*r);Vc+=n*(Uc+t)/2,Xc+=n*(Bc+e)/2,Gc+=n,centroidPoint$1(Uc=t,Bc=e)}function centroidLineEnd$1(){Jc.point=centroidPoint$1}function centroidRingStart$1(){Jc.point=centroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(Dc,Fc)}function centroidPointFirstRing(t,e){Jc.point=centroidPointRing,centroidPoint$1(Dc=Uc=t,Fc=Bc=e)}function centroidPointRing(t,e){var n=t-Uc,r=e-Bc,n=I(n*n+r*r);Vc+=n*(Uc+t)/2,Xc+=n*(Bc+e)/2,Gc+=n,Zc+=(n=Bc*t-Uc*e)*(Uc+t),Kc+=n*(Bc+e),Qc+=3*n,centroidPoint$1(Uc=t,Bc=e)}function PathContext(t){this._context=t}function PathString(){this._string=[]}function circle$2(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}PathContext.prototype={_radius:4.5,pointRadius:function pointRadius(t){return this._radius=t,this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._context.closePath(),this._point=NaN},point:function point(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,N)}},result:noop$2},PathString.prototype={_circle:circle$2(4.5),pointRadius:function pointRadius(t){return this._circle=circle$2(t),this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function point(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function result(){var result;if(this._string.length)return result=this._string.join(""),this._string=[],result}};var ts=function index$3(){var e,n,r,i,o=4.5;function path(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Eu(t,n(i))),i.result()}return path.area=function(t){return Eu(t,n(Oc)),Oc.result()},path.bounds=function(t){return Eu(t,n(qc)),qc.result()},path.centroid=function(t){return Eu(t,n(Jc)),Jc.result()},path.projection=function(t){return arguments.length?(n=null==(e=t)?Ec:t.stream,path):e},path.context=function(t){return arguments.length?(i=null==(r=t)?new PathString:new PathContext(t),"function"!=typeof o&&i.pointRadius(o),path):r},path.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),path):o},path.projection(null).context(null)},es=Oo(),ns=function polygonContains(t,e){var n=e[0],r=e[1],i=[z(n),-O(n),0],o=0,a=0;es.reset();for(var u=0,c=t.length;u<c;++u)if(l=(s=t[u]).length)for(var s,l,f=s[l-1],h=f[0],d=f[1]/2+vu,p=z(d),y=O(d),v=0;v<l;++v,h=g,p=b,y=_,f=m){var m=s[v],g=m[0],_=m[1]/2+vu,b=z(_),_=O(_),x=g-h,w=0<=x?1:-1,M=w*x,k=C<M,S=p*b;es.add(L(S*w*z(M),y*_+S*O(M))),o+=k?x+w*N:x,k^n<=h^n<=g&&(cartesianNormalizeInPlace(S=cartesianCross(cartesian(f),cartesian(m))),cartesianNormalizeInPlace(M=cartesianCross(i,S)),(w=(k^0<=x?-1:1)*asin$1(M[2]))<r||r===w&&(S[0]||S[1]))&&(a+=k^0<=x?1:-1)}return(o<-P||o<P&&es<-P)^1&a},rs=function clip(o,t,a,p){return function(r,u){var c,s,l,n=t(u),e=r.invert(p[0],p[1]),f=lc(),h=t(f),d=!1,i={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){i.point=pointRing,i.lineStart=ringStart,i.lineEnd=ringEnd,s=[],c=[]},polygonEnd:function polygonEnd(){i.point=point,i.lineStart=lineStart,i.lineEnd=lineEnd,s=ot(s);var t=ns(c,e);s.length?(d||(u.polygonStart(),d=!0),dc(s,compareIntersection,t,a,u)):t&&(d||(u.polygonStart(),d=!0),u.lineStart(),a(null,null,1,u),u.lineEnd()),d&&(u.polygonEnd(),d=!1),s=c=null},sphere:function sphere(){u.polygonStart(),u.lineStart(),a(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function point(t,e){var n=r(t,e);o(t=n[0],e=n[1])&&u.point(t,e)}function pointLine(t,e){t=r(t,e);n.point(t[0],t[1])}function lineStart(){i.point=pointLine,n.lineStart()}function lineEnd(){i.point=point,n.lineEnd()}function pointRing(t,e){l.push([t,e]);t=r(t,e);h.point(t[0],t[1])}function ringStart(){h.lineStart(),l=[]}function ringEnd(){pointRing(l[0][0],l[0][1]),h.lineEnd();var t,e,n,r,i=h.clean(),o=f.result(),a=o.length;if(l.pop(),c.push(l),l=null,a)if(1&i){if(0<(e=(n=o[0]).length-1)){for(d||(u.polygonStart(),d=!0),u.lineStart(),t=0;t<e;++t)u.point((r=n[t])[0],r[1]);u.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),s.push(o.filter(validSegment))}return i}};function validSegment(t){return 1<t.length}function compareIntersection(t,e){return((t=t.x)[0]<0?t[1]-s-P:s-t[1])-((e=e.x)[0]<0?e[1]-s-P:s-e[1])}var is=rs(function(){return!0},function clipAntimeridianLine(i){var o,a=NaN,u=NaN,c=NaN;return{lineStart:function lineStart(){i.lineStart(),o=1},point:function point(t,e){var n=0<t?C:-C,r=R(t-a);R(r-C)<P?(i.point(a,u=0<(u+e)/2?s:-s),i.point(c,u),i.lineEnd(),i.lineStart(),i.point(n,u),i.point(t,u),o=0):c!==n&&C<=r&&(R(a-c)<P&&(a-=c*P),R(t-n)<P&&(t-=n*P),u=function clipAntimeridianIntersect(t,e,n,r){var i,o=z(t-n);return R(o)>P?mu((z(e)*(i=O(r))*z(n)-z(r)*(n=O(e))*z(t))/(n*i*o)):(e+r)/2}(a,u,t,e),i.point(c,u),i.lineEnd(),i.lineStart(),i.point(n,u),o=0),i.point(a=t,u=e),c=n},lineEnd:function lineEnd(){i.lineEnd(),a=u=NaN},clean:function clean(){return 2-o}}},function clipAntimeridianInterpolate(t,e,n,r){var i;null==t?(i=n*s,r.point(-C,i),r.point(0,i),r.point(C,i),r.point(C,0),r.point(C,-i),r.point(0,-i),r.point(-C,-i),r.point(-C,0),r.point(-C,i)):R(t[0]-e[0])>P?(t=t[0]<e[0]?C:-C,i=n*t/2,r.point(-t,i),r.point(0,i),r.point(t,i)):r.point(e[0],e[1])},[-C,-s]);var os=function clipCircle(i,o){var y=O(i),f=0<y,h=R(y)>P;function visible(t,e){return O(t)*O(e)>y}function intersect(t,e,n){var r,i,o,a,u,c,s,l=[1,0,0],f=cartesianCross(cartesian(t),cartesian(e)),h=cartesianDot(f,f),d=f[0],p=h-d*d;return p?(r=cartesianCross(l,f),cartesianAddInPlace(l=cartesianScale(l,y*h/p),cartesianScale(f,-y*d/p)),(p=(f=cartesianDot(l,h=r))*f-(d=cartesianDot(h,h))*(cartesianDot(l,l)-1))<0?void 0:(cartesianAddInPlace(p=cartesianScale(h,(-f-(r=I(p)))/d),l),p=spherical(p),n?(i=t[0],o=e[0],a=t[1],e=e[1],o<i&&(s=i,i=o,o=s),!(c=R((u=o-i)-C)<P)&&e<a&&(s=a,a=e,e=s),(c||u<P?c?0<a+e^p[1]<(R(p[0]-i)<P?a:e):a<=p[1]&&p[1]<=e:C<u^(i<=p[0]&&p[0]<=o))?(cartesianAddInPlace(s=cartesianScale(h,(-f+r)/d),l),[p,spherical(s)]):void 0):p)):!n&&t}function code(t,e){var n=f?i:C-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}return rs(visible,function clipLine(o){var a,u,c,s,l;return{lineStart:function lineStart(){s=c=!1,l=1},point:function point(t,e){var n,r=[t,e],i=visible(t,e),t=f?i?0:code(t,e):i?code(t+(t<0?C:-C),e):0;!a&&(s=c=i)&&o.lineStart(),i!==c&&(n=intersect(a,r),hc(a,n)||hc(r,n))&&(r[0]+=P,r[1]+=P,i=visible(r[0],r[1])),i!==c?(l=0,i?(o.lineStart(),n=intersect(r,a),o.point(n[0],n[1])):(n=intersect(a,r),o.point(n[0],n[1]),o.lineEnd()),a=n):h&&a&&f^i&&(t&u||!(e=intersect(r,a,!0))||(l=0,f?(o.lineStart(),o.point(e[0][0],e[0][1]),o.point(e[1][0],e[1][1]),o.lineEnd()):(o.point(e[1][0],e[1][1]),o.lineEnd(),o.lineStart(),o.point(e[0][0],e[0][1])))),!i||a&&hc(a,r)||o.point(r[0],r[1]),a=r,c=i,u=t},lineEnd:function lineEnd(){c&&o.lineEnd(),a=null},clean:function clean(){return l|(s&&c)<<1}}},function interpolate(t,e,n,r){circleStream(r,i,o,n,t,e)},f?[0,-i]:[-C,i-C])},Oo=function transform$1(t){return{stream:transform$2(t)}};function transform$2(t){function T(){}var e,n=T.prototype=Object.create(Transform$1.prototype);for(e in t)n[e]=t[e];return function(t){var e=new T;return e.stream=t,e}}function Transform$1(){}function fit(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent(),n=(t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Eu(n,t.stream(qc)),qc.result()),a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),r=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,e=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([r,e])}function fitSize(n){return function(t,e){return fit(n,[[0,0],t],e)}}function fitExtent(n){return function(t,e){return fit(n,t,e)}}Transform$1.prototype={point:function point(t,e){this.stream.point(t,e)},sphere:function sphere(){this.stream.sphere()},lineStart:function lineStart(){this.stream.lineStart()},lineEnd:function lineEnd(){this.stream.lineEnd()},polygonStart:function polygonStart(){this.stream.polygonStart()},polygonEnd:function polygonEnd(){this.stream.polygonEnd()}};var as=16,us=O(30*E),cs=function resample(t,e){return+e?function resample$1(N,T){function resampleLineTo(t,e,n,r,i,o,a,u,c,s,l,f,h,d){var p,y,v,m,g,_,b,x,w,M,k=a-t,S=u-e,C=k*k+S*S;4*T<C&&h--&&(v=o+f,b=asin$1(v/=m=I((p=r+s)*p+(y=i+l)*y+v*v)),g=R(R(v)-1)<P||R(n-c)<P?(n+c)/2:L(y,p),_=(b=N(g,b))[0],b=b[1],T<(M=S*(x=_-t)-k*(w=b-e))*M/C||.3<R((k*x+S*w)/C-.5)||r*s+i*l+o*f<us)&&(resampleLineTo(t,e,n,r,i,o,_,b,g,p/=m,y/=m,v,h,d),d.point(_,b),resampleLineTo(_,b,g,p,y,v,a,u,c,s,l,f,h,d))}return function(r){var n,i,o,a,u,c,s,l,f,h,d,p,y={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){r.polygonStart(),y.lineStart=ringStart},polygonEnd:function polygonEnd(){r.polygonEnd(),y.lineStart=lineStart}};function point(t,e){t=N(t,e),r.point(t[0],t[1])}function lineStart(){l=NaN,y.point=linePoint,r.lineStart()}function linePoint(t,e){var n=cartesian([t,e]),e=N(t,e);resampleLineTo(l,f,s,h,d,p,l=e[0],f=e[1],s=t,h=n[0],d=n[1],p=n[2],as,r),r.point(l,f)}function lineEnd(){y.point=point,r.lineEnd()}function ringStart(){lineStart(),y.point=ringPoint,y.lineEnd=ringEnd}function ringPoint(t,e){linePoint(n=t,e),i=l,o=f,a=h,u=d,c=p,y.point=linePoint}function ringEnd(){resampleLineTo(l,f,s,h,d,p,i,o,n,a,u,c,as,r),y.lineEnd=lineEnd,lineEnd()}return y}}(t,e):function resampleNone(n){return transform$2({point:function point(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(t)};var ss=transform$2({point:function point(t,e){this.stream.point(t*E,e*E)}});function projection(t){return projectionMutator(function(){return t})()}function projectionMutator(t){var n,r,i,e,o,a,u,c,s,l,f=150,h=480,d=250,p=0,y=0,v=0,m=0,g=0,_=null,b=is,x=null,w=Ec,M=.5,k=cs(projectTransform,M);function projection(t){return[(t=o(t[0]*E,t[1]*E))[0]*f+r,i-t[1]*f]}function invert(t){return(t=o.invert((t[0]-r)/f,(i-t[1])/f))&&[t[0]*A,t[1]*A]}function projectTransform(t,e){return[(t=n(t,e))[0]*f+r,i-t[1]*f]}function recenter(){o=uc(e=rotateRadians(v,m,g),n);var t=n(p,y);return r=h-t[0]*f,i=d+t[1]*f,reset()}function reset(){return s=l=null,projection}return projection.stream=function(t){return s&&l===t?s:s=ss(b(e,k(w(l=t))))},projection.clipAngle=function(t){return arguments.length?(b=+t?os(_=t*E,6*E):(_=null,is),reset()):_*A},projection.clipExtent=function(t){return arguments.length?(w=null==t?(x=a=u=c=null,Ec):clipExtent(x=+t[0][0],a=+t[0][1],u=+t[1][0],c=+t[1][1]),reset()):null==x?null:[[x,a],[u,c]]},projection.scale=function(t){return arguments.length?(f=+t,recenter()):f},projection.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],recenter()):[h,d]},projection.center=function(t){return arguments.length?(p=t[0]%360*E,y=t[1]%360*E,recenter()):[p*A,y*A]},projection.rotate=function(t){return arguments.length?(v=t[0]%360*E,m=t[1]%360*E,g=2<t.length?t[2]%360*E:0,recenter()):[v*A,m*A,g*A]},projection.precision=function(t){return arguments.length?(k=cs(projectTransform,M=t*t),reset()):I(M)},projection.fitExtent=fitExtent(projection),projection.fitSize=fitSize(projection),function(){return n=t.apply(this,arguments),projection.invert=n.invert&&invert,recenter()}}function conicProjection(t){var e=0,n=C/3,r=projectionMutator(t),t=r(e,n);return t.parallels=function(t){return arguments.length?r(e=t[0]*E,n=t[1]*E):[e*A,n*A]},t}function conicEqualAreaRaw(t,e){var n,r,i=z(t),o=(i+z(e))/2;return R(o)<P?function cylindricalEqualAreaRaw(t){var n=O(t);function forward(t,e){return[t*n,z(e)/n]}return forward.invert=function(t,e){return[t/n,asin$1(e*n)]},forward}(t):(r=I(n=1+i*(2*o-i))/o,project.invert=function(t,e){e=r-e;return[L(t,R(e))/o*wu(e),asin$1((n-(t*t+e*e)*o*o)/(2*o))]},project);function project(t,e){e=I(n-2*o*z(e))/o;return[e*z(t*=o),r-e*O(t)]}}var ls=function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])},fs=function albers(){return ls().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Jn(){var e,n,i,o,a,r,u=fs(),c=ls().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ls().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function point(t,e){r=[t,e]}};function albersUsa(t){var e=t[0],t=t[1];return r=null,i.point(e,t),r||(o.point(e,t),r)||(a.point(e,t),r)}function reset(){return e=n=null,albersUsa}return albersUsa.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,n=(t[1]-n[1])/e;return(.12<=n&&n<.234&&-.425<=r&&r<-.214?c:.166<=n&&n<.234&&-.214<=r&&r<-.115?s:u).invert(t)},albersUsa.stream=function(t){return e&&n===t?e:e=function multiplex(r){var i=r.length;return{point:function point(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function sphere(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function lineStart(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function lineEnd(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function polygonStart(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function polygonEnd(){for(var t=-1;++t<i;)r[t].polygonEnd()}}}([u.stream(n=t),c.stream(t),s.stream(t)])},albersUsa.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),s.precision(t),reset()):u.precision()},albersUsa.scale=function(t){return arguments.length?(u.scale(t),c.scale(.35*t),s.scale(t),albersUsa.translate(u.translate())):u.scale()},albersUsa.translate=function(t){var e,n,r;return arguments.length?(e=u.scale(),n=+t[0],r=+t[1],i=u.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(l),o=c.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+P,r+.12*e+P],[n-.214*e-P,r+.234*e-P]]).stream(l),a=s.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+P,r+.166*e+P],[n-.115*e-P,r+.234*e-P]]).stream(l),reset()):u.translate()},albersUsa.fitExtent=fitExtent(albersUsa),albersUsa.fitSize=fitSize(albersUsa),albersUsa.scale(1070)}function azimuthalRaw(i){return function(t,e){var n=O(t),r=O(e),n=i(n*r);return[n*r*z(t),n*z(e)]}}function azimuthalInvert(o){return function(t,e){var n=I(t*t+e*e),r=o(n),i=z(r),r=O(r);return[L(t*i,n*r),asin$1(n&&e*i/n)]}}var hs=azimuthalRaw(function(t){return I(2/(1+t))}),ds=(hs.invert=azimuthalInvert(function(t){return 2*asin$1(t/2)}),function azimuthalEqualArea(){return projection(hs).scale(124.75).clipAngle(179.999)}),ps=azimuthalRaw(function(t){return(t=acos(t))&&t/z(t)}),ys=(ps.invert=azimuthalInvert(function(t){return t}),function azimuthalEquidistant(){return projection(ps).scale(79.4188).clipAngle(179.999)});function mercatorRaw(t,e){return[t,bu(Mu((s+e)/2))]}mercatorRaw.invert=function(t,e){return[t,2*mu(_u(e))-s]};var vs=function mercator(){return mercatorProjection(mercatorRaw).scale(961/N)};function mercatorProjection(t){var r,i=projection(t),o=i.scale,a=i.translate,u=i.clipExtent;return i.scale=function(t){return arguments.length?(o(t),r&&i.clipExtent(null),i):o()},i.translate=function(t){return arguments.length?(a(t),r&&i.clipExtent(null),i):a()},i.clipExtent=function(t){var e,n;return arguments.length?((r=null==t)&&(e=C*o(),t=[[(n=a())[0]-e,n[1]-e],[n[0]+e,n[1]+e]]),u(t),i):r?null:u()},i.clipExtent(null)}function tany(t){return Mu((s+t)/2)}function conicConformalRaw(t,e){var n=O(t),r=t===e?z(t):bu(n/O(e))/bu(tany(e)/tany(t)),i=n*xu(tany(t),r)/r;return r?(project.invert=function(t,e){var e=i-e,n=wu(r)*I(t*t+e*e);return[L(t,R(e))/r*wu(e),2*mu(xu(i/n,1/r))-s]},project):mercatorRaw;function project(t,e){0<i?e<-s+P&&(e=-s+P):s-P<e&&(e=s-P);e=i/xu(tany(e),r);return[e*z(r*t),i-e*O(r*t)]}}var ms=function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};function equirectangularRaw(t,e){return[t,e]}equirectangularRaw.invert=equirectangularRaw;var gs=function equirectangular(){return projection(equirectangularRaw).scale(152.63)};function conicEquidistantRaw(t,e){var n=O(t),r=t===e?z(t):(n-O(e))/(e-t),i=n/r+t;return R(r)<P?equirectangularRaw:(project.invert=function(t,e){e=i-e;return[L(t,R(e))/r*wu(e),i-wu(r)*I(t*t+e*e)]},project);function project(t,e){e=i-e,t*=r;return[e*z(t),i-e*O(t)]}}var _s=function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])};function gnomonicRaw(t,e){var n=O(e),r=O(t)*n;return[n*z(t)/r,z(e)/r]}gnomonicRaw.invert=azimuthalInvert(mu);var bs=function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)};function orthographicRaw(t,e){return[O(e)*z(t),z(e)]}orthographicRaw.invert=azimuthalInvert(asin$1);var xs=function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+P)};function stereographicRaw(t,e){var n=O(e),r=1+O(t)*n;return[n*z(t)/r,z(e)/r]}stereographicRaw.invert=azimuthalInvert(function(t){return 2*mu(t)});var ws=function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)};function transverseMercatorRaw(t,e){return[bu(Mu((s+e)/2)),-t]}transverseMercatorRaw.invert=function(t,e){return[-e,2*mu(_u(t))-s]};var Ms=function transverseMercator(){var t=mercatorProjection(transverseMercatorRaw),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};j.version="4.2.8",j.bisect=_,j.bisectRight=_,j.bisectLeft=r,j.ascending=g,j.bisector=q,j.descending=a,j.deviation=F,j.extent=U,j.histogram=of,j.thresholdFreedmanDiaconis=B,j.thresholdScott=et,j.thresholdSturges=J,j.max=nt,j.mean=rt,j.median=it,j.merge=ot,j.min=at,j.pairs=xf,j.permute=ut,j.quantile=tt,j.range=X,j.scan=ct,j.shuffle=st,j.sum=lt,j.ticks=Q,j.tickStep=tickStep,j.transpose=Cf,j.variance=D,j.zip=ft,j.entries=Jf,j.keys=Hf,j.values=If,j.map=map$1,j.set=set,j.nest=Ff,j.randomUniform=ht,j.randomNormal=dt,j.randomLogNormal=pt,j.randomBates=vt,j.randomIrwinHall=yt,j.randomExponential=mt,j.easeLinear=function linear(t){return+t},j.easeQuad=quadInOut,j.easeQuadIn=function quadIn(t){return t*t},j.easeQuadOut=function quadOut(t){return t*(2-t)},j.easeQuadInOut=quadInOut,j.easeCubic=cubicInOut,j.easeCubicIn=function cubicIn(t){return t*t*t},j.easeCubicOut=function cubicOut(t){return--t*t*t+1},j.easeCubicInOut=cubicInOut,j.easePoly=bt,j.easePolyIn=gt,j.easePolyOut=_t,j.easePolyInOut=bt,j.easeSin=sinInOut,j.easeSinIn=function sinIn(t){return 1-Math.cos(t*wt)},j.easeSinOut=function sinOut(t){return Math.sin(t*wt)},j.easeSinInOut=sinInOut,j.easeExp=expInOut,j.easeExpIn=function expIn(t){return Math.pow(2,10*t-10)},j.easeExpOut=function expOut(t){return 1-Math.pow(2,-10*t)},j.easeExpInOut=expInOut,j.easeCircle=circleInOut,j.easeCircleIn=function circleIn(t){return 1-Math.sqrt(1-t*t)},j.easeCircleOut=function circleOut(t){return Math.sqrt(1- --t*t)},j.easeCircleInOut=circleInOut,j.easeBounce=bounceOut,j.easeBounceIn=function bounceIn(t){return 1-bounceOut(1-t)},j.easeBounceOut=bounceOut,j.easeBounceInOut=function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2},j.easeBack=kt,j.easeBackIn=St,j.easeBackOut=Ct,j.easeBackInOut=kt,j.easeElastic=Pt,j.easeElasticIn=Tt,j.easeElasticOut=Pt,j.easeElasticInOut=At,j.polygonArea=og,j.polygonCentroid=Et,j.polygonHull=rg,j.polygonContains=Lt,j.polygonLength=Ot,j.path=path,j.quadtree=quadtree,j.queue=queue,j.arc=Tg,j.area=re,j.line=Vg,j.pie=Zg,j.radialArea=Dt,j.radialLine=qt,j.symbol=u6,j.symbols=Xt,j.symbolCircle=ue,j.symbolCross=Ft,j.symbolDiamond=Ut,j.symbolSquare=Yt,j.symbolStar=Wt,j.symbolTriangle=Ht,j.symbolWye=Vt,j.curveBasisClosed=Zt,j.curveBasisOpen=Bt,j.curveBasis=t,j.curveBundle=ye,j.curveCardinalClosed=me,j.curveCardinalOpen=ge,j.curveCardinal=ve,j.curveCatmullRomClosed=be,j.curveCatmullRomOpen=xe,j.curveCatmullRom=_e,j.curveLinearClosed=Gt,j.curveLinear=ne,j.curveMonotoneX=function monotoneX(t){return new MonotoneX(t)},j.curveMonotoneY=function monotoneY(t){return new MonotoneY(t)},j.curveNatural=we,j.curveStep=Me,j.curveStepAfter=function stepAfter(t){return new Step(t,1)},j.curveStepBefore=function stepBefore(t){return new Step(t,0)},j.stack=M6,j.stackOffsetExpand=Ne,j.stackOffsetNone=Se,j.stackOffsetSilhouette=Te,j.stackOffsetWiggle=Pe,j.stackOrderAscending=Ae,j.stackOrderDescending=Ee,j.stackOrderInsideOut=Re,j.stackOrderNone=Ce,j.stackOrderReverse=Le,j.color=color,j.rgb=rgb,j.hsl=hsl,j.lab=lab,j.hcl=hcl,j.cubehelix=cubehelix,j.interpolate=kn,j.interpolateArray=pn,j.interpolateDate=yn,j.interpolateNumber=w,j.interpolateObject=vn,j.interpolateRound=Sn,j.interpolateString=Mn,j.interpolateTransformCss=Pn,j.interpolateTransformSvg=An,j.interpolateZoom=Rn,j.interpolateRgb=fn,j.interpolateRgbBasis=hn,j.interpolateRgbBasisClosed=dn,j.interpolateHsl=Ln,j.interpolateHslLong=On,j.interpolateLab=function lab$1(e,t){var n=nogamma((e=lab(e)).l,(t=lab(t)).l),r=nogamma(e.a,t.a),i=nogamma(e.b,t.b),o=nogamma(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}},j.interpolateHcl=jn,j.interpolateHclLong=$n,j.interpolateCubehelix=zn,j.interpolateCubehelixLong=In,j.interpolateBasis=Oe,j.interpolateBasisClosed=sn,j.quantize=qn,j.dispatch=dispatch,j.dsvFormat=Fn,j.csvParse=Bn,j.csvParseRows=Wn,j.csvFormat=Yn,j.csvFormatRows=Un,j.tsvParse=Vn,j.tsvParseRows=Xn,j.tsvFormat=Gn,j.tsvFormatRows=Hn,j.request=q7,j.html=Kn,j.json=Qn,j.text=tr,j.xml=Zn,j.csv=ir,j.tsv=er,j.now=now,j.timer=timer,j.timerFlush=timerFlush,j.timeout=pr,j.interval=yr,j.timeInterval=newInterval,j.timeMillisecond=gr,j.timeMilliseconds=_r,j.timeSecond=wr,j.timeSeconds=Mr,j.timeMinute=kr,j.timeMinutes=Sr,j.timeHour=Cr,j.timeHours=Nr,j.timeDay=Tr,j.timeDays=Pr,j.timeWeek=Ar,j.timeWeeks=zr,j.timeSunday=Ar,j.timeSundays=zr,j.timeMonday=Er,j.timeMondays=Ir,j.timeTuesday=Rr,j.timeTuesdays=qr,j.timeWednesday=Lr,j.timeWednesdays=Dr,j.timeThursday=Or,j.timeThursdays=Fr,j.timeFriday=jr,j.timeFridays=Ur,j.timeSaturday=$r,j.timeSaturdays=Br,j.timeMonth=Wr,j.timeMonths=Yr,j.timeYear=Hr,j.timeYears=Vr,j.utcMillisecond=gr,j.utcMilliseconds=_r,j.utcSecond=wr,j.utcSeconds=Mr,j.utcMinute=Xr,j.utcMinutes=Gr,j.utcHour=Zr,j.utcHours=Kr,j.utcDay=Qr,j.utcDays=Jr,j.utcWeek=ei,j.utcWeeks=ci,j.utcSunday=ei,j.utcSundays=ci,j.utcMonday=ni,j.utcMondays=si,j.utcTuesday=ri,j.utcTuesdays=li,j.utcWednesday=ii,j.utcWednesdays=fi,j.utcThursday=oi,j.utcThursdays=hi,j.utcFriday=ai,j.utcFridays=di,j.utcSaturday=ui,j.utcSaturdays=pi,j.utcMonth=yi,j.utcMonths=vi,j.utcYear=mi,j.utcYears=gi,j.formatLocale=Ti,j.formatDefaultLocale=defaultLocale,j.formatSpecifier=Si,j.precisionFixed=Pi,j.precisionPrefix=Ai,j.precisionRound=Ei,j.isoFormat=Ii,j.isoParse=zi,j.timeFormatLocale=formatLocale$1,j.timeFormatDefaultLocale=defaultLocale$1,j.scaleBand=band,j.scalePoint=function point$4(){return function pointish(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pointish(e())},t}(band().paddingInner(1))},j.scaleIdentity=function identity$4(){var e=[0,1];function scale(t){return+t}return(scale.invert=scale).domain=scale.range=function(t){return arguments.length?(e=Di.call(t,Wi),scale):e.slice()},scale.copy=function(){return identity$4().domain(e)},linearish(scale)},j.scaleLinear=function linear$2(){var t=continuous(deinterpolateLinear,w);return t.copy=function(){return copy(t,linear$2())},linearish(t)},j.scaleLog=function log(){var e=continuous(deinterpolate,reinterpolate).domain([1,10]),l=e.domain,f=10,h=logp(10),d=powp(10);function rescale(){return h=logp(f),d=powp(f),l()[0]<0&&(h=reflect(h),d=reflect(d)),e}return e.base=function(t){return arguments.length?(f=+t,rescale()):f},e.domain=function(t){return(arguments.length?(l(t),rescale):l)()},e.ticks=function(t){var e,n,r,i=l(),o=i[0],a=i[i.length-1],u=((i=a<o)&&(u=o,o=a,a=u),h(o)),c=h(a),t=null==t?10:+t,s=[];if(!(f%1)&&c-u<t){if(u=Math.round(u)-1,c=Math.round(c)+1,0<o){for(;u<c;++u)for(n=1,e=d(u);n<f;++n)if(!((r=e*n)<o)){if(a<r)break;s.push(r)}}else for(;u<c;++u)for(n=f-1,e=d(u);1<=n;--n)if(!((r=e*n)<o)){if(a<r)break;s.push(r)}}else s=Q(u,c,Math.min(c-u,t)).map(d);return i?s.reverse():s},e.tickFormat=function(t,n){if("function"!=typeof(n=null==n?10===f?".0e":",":n)&&(n=j.format(n)),t===1/0)return n;null==t&&(t=10);var r=Math.max(1,f*t/e.ticks().length);return function(t){var e=t/d(Math.round(h(t)));return e*f<f-.5&&(e*=f),e<=r?n(t):""}},e.nice=function(){return l(Vi(l(),{floor:function floor(t){return d(Math.floor(h(t)))},ceil:function ceil(t){return d(Math.ceil(h(t)))}}))},e.copy=function(){return copy(e,log().base(f))},e},j.scaleOrdinal=ordinal,j.scaleImplicit=Ui,j.scalePow=pow,j.scaleSqrt=function sqrt(){return pow().exponent(.5)},j.scaleQuantile=function quantile$$1(){var i=[],n=[],r=[];function rescale(){var t=0,e=Math.max(1,n.length);for(r=new Array(e-1);++t<e;)r[t-1]=tt(i,t/e);return scale}function scale(t){if(!isNaN(t=+t))return n[_(r,t)]}return scale.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:i[0],t<r.length?r[t]:i[i.length-1]]},scale.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var e,n=0,r=t.length;n<r;++n)null==(e=t[n])||isNaN(e=+e)||i.push(e);return i.sort(g),rescale()},scale.range=function(t){return arguments.length?(n=Fi.call(t),rescale()):n.slice()},scale.quantiles=function(){return r.slice()},scale.copy=function(){return quantile$$1().domain(i).range(n)},scale},j.scaleQuantize=function quantize$1(){var e=0,n=1,r=1,i=[.5],o=[0,1];function scale(t){if(t<=t)return o[_(i,t,0,r)]}function rescale(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return scale}return scale.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],rescale()):[e,n]},scale.range=function(t){return arguments.length?(r=(o=Fi.call(t)).length-1,rescale()):o.slice()},scale.invertExtent=function(t){return(t=o.indexOf(t))<0?[NaN,NaN]:t<1?[e,i[0]]:r<=t?[i[r-1],n]:[i[t-1],i[t]]},scale.copy=function(){return quantize$1().domain([e,n]).range(o)},linearish(scale)},j.scaleThreshold=function threshold$1(){var e=[.5],n=[0,1],r=1;function scale(t){if(t<=t)return n[_(e,t,0,r)]}return scale.domain=function(t){return arguments.length?(e=Fi.call(t),r=Math.min(e.length,n.length-1),scale):e.slice()},scale.range=function(t){return arguments.length?(n=Fi.call(t),r=Math.min(e.length,n.length-1),scale):n.slice()},scale.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},scale.copy=function(){return threshold$1().domain(e).range(n)},scale},j.scaleTime=qi,j.scaleUtc=eo,j.schemeCategory10=ro,j.schemeCategory20b=io,j.schemeCategory20c=oo,j.schemeCategory20=ao,j.scaleSequential=function sequential(e){var n=0,r=1,i=!1;function scale(t){return t=(t-n)/(r-n),e(i?Math.max(0,Math.min(1,t)):t)}return scale.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],scale):[n,r]},scale.clamp=function(t){return arguments.length?(i=!!t,scale):i},scale.interpolator=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return sequential(e).domain([n,r]).clamp(i)},linearish(scale)},j.interpolateCubehelixDefault=uo,j.interpolateRainbow=fo,j.interpolateWarm=co,j.interpolateCool=so,j.interpolateViridis=ho,j.interpolateMagma=po,j.interpolateInferno=yo,j.interpolatePlasma=no,j.creator=_o,j.customEvent=customEvent,j.local=local,j.matcher=Mo,j.mouse=To,j.namespace=go,j.namespaces=mo,j.select=Jo,j.selectAll=wo,j.selection=selection,j.selector=Po,j.selectorAll=Ao,j.touch=R9,j.touches=Eo,j.window=Go,j.active=Io,j.interrupt=la,j.transition=transition,j.axisTop=function axisTop(t){return axis(ga,t)},j.axisRight=function axisRight(t){return axis(_a,t)},j.axisBottom=function axisBottom(t){return axis(ba,t)},j.axisLeft=function axisLeft(t){return axis(xa,t)},j.cluster=Jj,j.hierarchy=hierarchy,j.pack=Do,j.packSiblings=qo,j.packEnclose=ka,j.partition=_j,j.stratify=dk,j.tree=ek,j.treemap=Uo,j.treemapBinary=Bo,j.treemapDice=Na,j.treemapSlice=Aa,j.treemapSliceDice=Wo,j.treemapSquarify=Ea,j.treemapResquarify=Yo,j.forceCenter=Ho,j.forceCollide=Vo,j.forceLink=Xo,j.forceManyBody=Zo,j.forceSimulation=tk,j.forceX=Ko,j.forceY=So,j.drag=Ak,j.dragDisable=ja,j.dragEnable=yesdrag,j.voronoi=Lk,j.zoom=Pk,j.zoomIdentity=Ya,j.zoomTransform=transform,j.brush=zo,j.brushX=function brushX(){return brush$1(tu)},j.brushY=function brushY(){return brush$1(eu)},j.brushSelection=function brushSelection(t){return(t=t.__brush)?t.dim.output(t.selection):null},j.chord=kl,j.ribbon=nl,j.geoAlbers=fs,j.geoAlbersUsa=Jn,j.geoArea=Fo,j.geoAzimuthalEqualArea=ds,j.geoAzimuthalEqualAreaRaw=hs,j.geoAzimuthalEquidistant=ys,j.geoAzimuthalEquidistantRaw=ps,j.geoBounds=Ro,j.geoCentroid=oc,j.geoCircle=sc,j.geoClipExtent=_c,j.geoConicConformal=ms,j.geoConicConformalRaw=conicConformalRaw,j.geoConicEqualArea=ls,j.geoConicEqualAreaRaw=conicEqualAreaRaw,j.geoConicEquidistant=_s,j.geoConicEquidistantRaw=conicEquidistantRaw,j.geoDistance=Sc,j.geoEquirectangular=gs,j.geoEquirectangularRaw=equirectangularRaw,j.geoGnomonic=bs,j.geoGnomonicRaw=gnomonicRaw,j.geoGraticule=Tm,j.geoInterpolate=Ac,j.geoLength=wc,j.geoMercator=vs,j.geoMercatorRaw=mercatorRaw,j.geoOrthographic=xs,j.geoOrthographicRaw=orthographicRaw,j.geoPath=ts,j.geoProjection=projection,j.geoProjectionMutator=projectionMutator,j.geoRotation=cc,j.geoStereographic=ws,j.geoStereographicRaw=stereographicRaw,j.geoStream=Eu,j.geoTransform=Oo,j.geoTransverseMercator=Ms,j.geoTransverseMercatorRaw=transverseMercatorRaw,Object.defineProperty(j,"__esModule",{value:!0})},"object"===(void 0===n?"undefined":_typeof(n))&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r((void 0).d3=(void 0).d3||{})},{}],12:[function(t,e,n){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.XorLevel=n.WeatherLevel=n.TutorialLevelC=n.TutorialLevelB=n.TutorialLevelA=n.SumLevel=n.MaxLevel=n.FahrenheitLevel=n.AvgLevel=n.AndLevel=void 0;var u=function _interopRequireWildcard(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};e=_getRequireWildcardCache(e);if(e&&e.has(t))return e.get(t);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){var o;"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}r.default=t,e&&e.set(t,r);return r}(t("d3")),s=t("./Node.js"),l=t("./InputNode.js"),f=t("./OutputNode.js"),h=t("./Network.js"),r=t("./Level.js"),c=t("./constants.js");function _getRequireWildcardCache(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function _getRequireWildcardCache(t){return t?n:e})(t))}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function _toPropertyKey(t){t=function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===_typeof(t)?t:String(t)}(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(n){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function _createSuperInternal(){var t,e=_getPrototypeOf(n);return function _possibleConstructorReturn(t,e){{if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function _assertThisInitialized(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function addnodeinfo(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.noderadius+30;u.select("#levelinfo").append("text").text(e).attr("pointer-events","none").attr("text-anchor","middle").attr("font-size",20).attr("x",t.x).attr("y",t.y+n)},t=function(){_inherits(TutorialLevelA,r.Level);var a=_createSuper(TutorialLevelA);function TutorialLevelA(){_classCallCheck(this,TutorialLevelA);var t=1+Math.random(),e=[new l.InputNode(function(){return.5+.5*Math.sin(t*Date.now()/1e3)*Math.exp(-.1*(Date.now()-o.t0)/1e3)}),new f.OutputNode],n=(e[0].x=200,e[0].y=500,e[0].allownegative=!0,e[1].x=800,e[1].y=550,e[0].addChild(e[1],1),function f(t){return 2*t}),r=[1,2,3],i=r.map(n),o=a.call(this,"A simple Network: Double its input!",new h.Network(e,[e[0]],[e[1]]),["input"],r.map(function(t){return[t]}),["desired output"],i.map(function(t){return[t]}),"This is a minimalistic neural Network. Can you adjust the network such that it doubles the input?");return o.animatestep=function(){e[1].target=n(e[0].getActivation())},o.onenter=function(){d(e[0],"You can adjust the input of the network."),d(e[1],"The output of the neural network."),u.select("#levelinfo").append("text").text("Adjust the multiplication factor along the connection.").attr("pointer-events","none").attr("text-anchor","middle").attr("font-size",20).attr("x",(e[0].x+e[1].x)/2).attr("y",(e[0].y+e[1].y)/2-100),document.querySelector(".trainingdata").classList.remove("visible")},o.onleave=function(){document.querySelector(".trainingdata").classList.add("visible")},o}return _createClass(TutorialLevelA)}(),t=(n.TutorialLevelA=t,function(){_inherits(TutorialLevelB,r.Level);var a=_createSuper(TutorialLevelB);function TutorialLevelB(){_classCallCheck(this,TutorialLevelB);var t=1+Math.random(),e=[new l.InputNode(function(){return.5+2*Math.sin(t*Date.now()/1e3)*Math.exp(-.1*(Date.now()-o.t0)/1e3)}),new s.Node,new f.OutputNode],n=(e[0].allownegative=!0,e[0].x=200,e[0].y=500,e[1].x=500,e[1].y=550,e[1].adjustable=!1,e[2].x=800,e[2].y=500,e[0].addChild(e[1],-2),e[1].addChild(e[2],1),e[1].outedges[0].adjustable=!1,function f(t){return Math.max(0,+t)}),r=[-2,-1,0,1,2,3],i=r.map(n),o=a.call(this,"Propagate only positive values!",new h.Network(e,[e[0]],[e[2]]),["input"],r.map(function(t){return[t]}),["output"],i.map(function(t){return[t]}),"Can you modify this network such that it outputs its positive input or zero if the input was negative? It should predict the data of the training table below.");return o.animatestep=function(){e[2].target=n(e[0].getActivation())},o.onenter=function(){d(e[1],"Internal nodes ignore negative inputs.")},o}return _createClass(TutorialLevelB)}()),t=(n.TutorialLevelB=t,function(){_inherits(TutorialLevelC,r.Level);var a=_createSuper(TutorialLevelC);function TutorialLevelC(){_classCallCheck(this,TutorialLevelC);var t=1+Math.random(),e=[new l.InputNode(function(){return+Math.sin(t*Date.now()/1e3)*Math.exp(-.1*(Date.now()-o.t0)/1e3)-.2}),new s.Node,new f.OutputNode],n=(e[0].allownegative=!0,e[0].x=200,e[0].y=500,e[1].x=500,e[1].y=550,e[1].adjustable=!0,e[2].x=800,e[2].y=500,e[0].addChild(e[1],1),e[1].addChild(e[2],1),e[0].outedges[0].adjustable=!1,e[1].outedges[0].adjustable=!1,e[1].bias=1,function f(t){return Math.max(0,t-1)}),r=[-2,-1,0,1,2,3],i=r.map(n),o=a.call(this,"Internal nodes with bias",new h.Network(e,[e[0]],[e[2]]),["input"],r.map(function(t){return[t]}),["output"],i.map(function(t){return[t]}),"Can you modify the parameter of this network such that it outputs by how much the input is greater than 1. If the input is smaller than 1 it should output zero.");return o.animatestep=function(){e[2].target=n(e[0].getActivation())},o.onenter=function(){d(e[1],"An adjustable bias is added to the input of an internal node.")},o}return _createClass(TutorialLevelC)}()),t=(n.TutorialLevelC=t,function(){_inherits(WeatherLevel,r.Level);var u=_createSuper(WeatherLevel);function WeatherLevel(){_classCallCheck(this,WeatherLevel);var t,e,n=1+Math.random(),r=[new l.InputNode(function(){return.5+.5*Math.sin(n*Date.now()/1e3)*Math.exp(-.3*(Date.now()-t.t0)/1e3)}),new l.InputNode(function(){return 1}),new s.Node,new s.Node,new f.OutputNode];for(e in[2,3])r[[2,3][e]].bias=2*(Math.random()-.5);r[0].x=200,r[0].y=400,r[1].x=200,r[1].y=600,r[2].x=509,r[2].y=300,r[3].x=500,r[3].y=700,r[4].x=800,r[4].y=500,r[0].addChild(r[2],1),r[0].addChild(r[3],1),r[1].addChild(r[2],1),r[1].addChild(r[3],1),r[2].addChild(r[4],1),r[3].addChild(r[4],1);var i=new h.Network(r,[r[0],r[1]],[r[4]]),o=[{cloudiness:0,inside:0},{cloudiness:.5,inside:0},{cloudiness:1,inside:0},{cloudiness:1,inside:1},{cloudiness:.5,inside:1},{cloudiness:0,inside:1}],a=function formula(t,e){return 1==e?2.1-.1*t:2.5-1.2*t};return r[1].format=function(t){return t.toFixed(0)},r[4].format=function(t){return"".concat((10*t).toFixed(0),"°C")},(t=u.call(this,"Can you predict the temperature given the cloudiness and the fact of being inside?",i,["cloudiness","inside?"],o.map(function(t){return[t.cloudiness,t.inside]}),["temperature"],o.map(function(t){return[a(t.cloudiness,t.inside)]}),"Outside (insideness = 0), the temperature depends on the amount of clouds: The higher the cloudiness, the lower the temperature. Inside (insideness = 1), the temperature is almost constant 20°C.")).animatestep=function(){r[0].setUserParameter(Math.min(1,Math.max(0,r[0].getActivation()))),r[1].setUserParameter(Math.min(1,Math.max(0,Math.round(r[1].getActivation())))),r[4].target=a(r[0].getActivation(),r[1].getActivation())},t.onenter=function(){d(r[0],"amount of clouds",-c.noderadius-20),d(r[1],"inside/outside"),d(r[4],"predicted temperature")},t}return _createClass(WeatherLevel)}()),t=(n.WeatherLevel=t,function(){_inherits(FahrenheitLevel,r.Level);var u=_createSuper(FahrenheitLevel);function FahrenheitLevel(){_classCallCheck(this,FahrenheitLevel);var t,e,n=1+Math.random(),r=[new l.InputNode(function(){return.5+.5*Math.sin(n*Date.now()/1e3)*Math.exp(-.3*(Date.now()-t.t0)/1e3)}),new s.Node,new f.OutputNode];for(e in[1])r[[1][e]].bias=1+2*Math.random();r[0].x=200,r[0].y=500,r[0].allownegative=!1,r[1].x=500,r[1].y=550,r[2].x=800,r[2].y=500,r[0].addChild(r[1],1),r[1].addChild(r[2],1),r[1].outedges[0].adjustable=!1;var i=function c2f(t){return 1.8*t+32},o=[0,10,20,30],a=o.map(i);return r[0].format=function(t){return"".concat((10*t).toFixed(0),"°C")},r[1].format=function(t){return"".concat((10*t).toFixed(0))},r[2].format=function(t){return"".concat((10*t).toFixed(0),"°F")},(t=u.call(this,"Convert Celsius to Fahrenheit.",new h.Network(r,[r[0]],[r[2]]),["Celsius"],o.map(function(t){return[t/10]}),["Fahrenheit"],a.map(function(t){return[t/10]}),"Given a positive temperature in Celsius (left, yellow slider), the temperature in Fahrenheit is to be computed (output of the network on the right side). Adjust the parameters (blue and white sliders) of the network such that it computes the target value for each input. All values of the table below should be obtained.")).animatestep=function(){r[2].target=i(10*r[0].getActivation())/10},t}return _createClass(FahrenheitLevel)}()),t=(n.FahrenheitLevel=t,function(){_inherits(SumLevel,r.Level);var a=_createSuper(SumLevel);function SumLevel(){_classCallCheck(this,SumLevel);var t=1+Math.random(),e=1+Math.random(),n=[new l.InputNode(function(){return.5+.5*Math.sin(t*Date.now()/1e3)*Math.exp(-.3*(Date.now()-o.t0)/1e3)}),new l.InputNode(function(){return.5+.5*Math.sin(e*Date.now()/1e3)*Math.exp(-.3*(Date.now()-o.t0)/1e3)}),new f.OutputNode],r=(n[2].bias=0,n[0].x=200,n[0].y=300,n[0].allownegative=!0,n[1].x=200,n[1].y=700,n[1].allownegative=!0,n[2].x=800,n[2].y=500,n[0].addChild(n[2],1),n[1].addChild(n[2],-1),[[0,0],[0,1],[2,1],[3,1],[4,2],[0,2]]),i=r.map(function(t){return[t[0]+t[1]]}),o=a.call(this,"The sum of the input activations.",new h.Network(n,[n[0],n[1]],[n[2]]),["summand 1","summand 2"],r,["sum"],i,"Adjust the parameters of the network such that the output on the right equals the sum of the two inputs. The predictions of the network should be correct for all the values in the training table below.");return o.animatestep=function(){n[2].target=n[0].getActivation()+n[1].getActivation()},o}return _createClass(SumLevel)}()),t=(n.SumLevel=t,function(){_inherits(AndLevel,r.Level);var o=_createSuper(AndLevel);function AndLevel(){_classCallCheck(this,AndLevel),Math.random(),Math.random();var t,e=[new l.InputNode(function(){return 1}),new l.InputNode(function(){return 1}),new s.Node,new f.OutputNode];for(t in[2])e[[2][t]].bias=2*Math.random();e[0].x=200,e[0].y=350,e[1].x=200,e[1].y=650,e[2].x=500,e[2].y=500,e[3].x=800,e[3].y=500,e[0].addChild(e[2],1),e[1].addChild(e[2],-.2),e[2].addChild(e[3],1);var n=new h.Network(e,[e[0],e[1]],[e[3]]),r=[[0,0],[1,0],[0,1],[1,1]],i=r.map(function(t){return[t[0]*t[1]]});return(n=o.call(this,"Are both inputs set to 1?",n,["bit 1","bit 2"],r,["AND"],i,"The inputs of this network are either 0 or 1. The output on the right should be 1 only if both inputs are 1. Otherwise, it should be 0.")).animatestep=function(){e[0].format=function(t){return Math.round(t)},e[1].format=function(t){return Math.round(t)},e[0].setUserParameter(Math.min(1,Math.max(0,Math.round(e[0].getActivation())))),e[1].setUserParameter(Math.min(1,Math.max(0,Math.round(e[1].getActivation())))),e[3].target=e[0].getActivation()*e[1].getActivation()},n}return _createClass(AndLevel)}()),t=(n.AndLevel=t,function(){_inherits(MaxLevel,r.Level);var c=_createSuper(MaxLevel);function MaxLevel(){_classCallCheck(this,MaxLevel);var t,e=1+Math.random(),n=1+Math.random(),r=[new l.InputNode(function(){return+Math.sin(e*Date.now()/1e3)*Math.exp(-.3*(Date.now()-i.t0)/1e3)+1.5}),new l.InputNode(function(){return+Math.sin(n*Date.now()/1e3)*Math.exp(-.3*(Date.now()-i.t0)/1e3)+1}),new s.Node,new f.OutputNode];for(t in[2])r[[2][t]].bias=2*(Math.random()-.5);r[0].x=200,r[0].y=350,r[1].x=200,r[1].y=650,r[2].x=500,r[2].y=400,r[3].x=800,r[3].y=500,r[0].addChild(r[2],1),r[1].addChild(r[2],-.2),r[2].addChild(r[3],1),r[1].addChild(r[3],1);var i,o=new h.Network(r,[r[0],r[1]],[r[3]]),a=[0,0,0,0,0,0,0].map(function(t){return[Math.random(),Math.random()]}),u=a.map(function(t){return[Math.max(t[0],t[1])]});return(i=c.call(this,"Compute the maximum of the input activations.",o,["input 1","input 2"],a,["maximum"],u,"The output on the right should be the maximum of the input. Hint: max(a, b) = max(0, a-b) + b. Remember that the internal node ignores its input if it is negative.")).animatestep=function(){r[3].target=Math.max(r[0].getActivation(),r[1].getActivation())},i}return _createClass(MaxLevel)}()),t=(n.MaxLevel=t,function(){_inherits(XorLevel,r.Level);var a=_createSuper(XorLevel);function XorLevel(){_classCallCheck(this,XorLevel);var t,e=1+Math.random(),n=1+Math.random(),r=[new l.InputNode(function(){return.5+.5*Math.sin(e*Date.now()/1e3)*Math.exp(-.3*(Date.now()-i.t0)/1e3)}),new l.InputNode(function(){return.5+.5*Math.sin(n*Date.now()/1e3)*Math.exp(-.3*(Date.now()-i.t0)/1e3)}),new s.Node,new s.Node,new s.Node,new f.OutputNode];for(t in[2,3,4])r[[2,3,4][t]].bias=2*(Math.random()-.5);r[0].x=200,r[0].y=400,r[1].x=200,r[1].y=600,r[2].x=500,r[2].y=300,r[3].x=500,r[3].y=500,r[4].x=500,r[4].y=700,r[5].x=800,r[5].y=500,r[0].addChild(r[2],1),r[0].addChild(r[3],1),r[0].addChild(r[4],1),r[1].addChild(r[2],1),r[1].addChild(r[3],1),r[1].addChild(r[4],1),r[2].addChild(r[5],1),r[3].addChild(r[5],1),r[4].addChild(r[5],1);var i,o=new h.Network(r,[r[0],r[1]],[r[5]]);return(i=a.call(this,"Compute the XOR of the input bits.",o,["bit 1","bit 2"],[[0,0],[1,0],[0,1],[1,1]],["XOR"],[[0],[1],[1],[0]],"Assume that the network only takes 0 and 1 as input. The output of the network should be 1 if exactly one input is set to 1. Otherwise (both inputs equal) the output should be 0.")).animatestep=function(){r[0].format=function(t){return Math.round(t)},r[1].format=function(t){return Math.round(t)},r[0].setUserParameter(Math.min(1,Math.max(0,Math.round(r[0].getActivation())))),r[1].setUserParameter(Math.min(1,Math.max(0,Math.round(r[1].getActivation())))),r[5].target=(r[0].getActivation()+r[1].getActivation()|0)%2},i}return _createClass(XorLevel)}()),t=(n.XorLevel=t,function(){_inherits(AvgLevel,r.Level);var u=_createSuper(AvgLevel);function AvgLevel(){_classCallCheck(this,AvgLevel);var t=1+Math.random(),e=1+Math.random(),n=(Math.random(),[new l.InputNode(function(){return.5+.5*Math.sin(t*Date.now()/1e3)*Math.exp(-.3*(Date.now()-a.t0)/1e3)}),new l.InputNode(function(){return.5+.5*Math.sin(e*Date.now()/1e3)*Math.exp(-.3*(Date.now()-a.t0)/1e3)}),new l.InputNode(function(){return.5+.5*Math.sin(e*Date.now()/1e3)*Math.exp(-.3*(Date.now()-a.t0)/1e3)}),new f.OutputNode]),r=(n[0].x=200,n[0].y=300,n[0].allownegative=!0,n[1].x=200,n[1].y=500,n[1].allownegative=!0,n[2].x=200,n[2].y=700,n[2].allownegative=!0,n[3].x=800,n[3].y=500,n[0].addChild(n[3],1),n[1].addChild(n[3],1),n[2].addChild(n[3],1),new h.Network(n,[n[0],n[1],n[2]],[n[3]])),i=[0,0,0,0,0,0,0].map(function(t){return[Math.random(),Math.random(),Math.random()]}),o=i.map(function(t){return[(t[0]+t[1]+t[2])/3]}),a=u.call(this,"The average of the input values.",r,["number 1","number 2","number 3"],i,["average"],o,"Given three inputs, can you adjust the weights such that the output always equals to the average of the input activations? In particular, the network should produce correct outputs for all values in the table below.");return a.animatestep=function(){n[3].target=(n[0].getActivation()+n[1].getActivation()+n[2].getActivation())/3},a}return _createClass(AvgLevel)}());n.AvgLevel=t},{"./InputNode.js":3,"./Level.js":4,"./Network.js":6,"./Node.js":8,"./OutputNode.js":9,"./constants.js":10,d3:"d3"}],13:[function(t,e,n){"use strict";new(t("./LevelController.js").LevelController),window.addEventListener("DOMContentLoaded",function(t){document.querySelector("#helpmebutton").onclick=function(){document.querySelector(".helper").classList.add("visible"),document.querySelector(".mission").classList.remove("visible"),document.querySelector("#helpmebutton").classList.add("selected"),document.querySelector("#missionbutton").classList.remove("selected")},document.querySelector("#missionbutton").onclick=function(){document.querySelector(".helper").classList.remove("visible"),document.querySelector(".mission").classList.add("visible"),document.querySelector("#helpmebutton").classList.remove("selected"),document.querySelector("#missionbutton").classList.add("selected")},document.querySelector("#screenoverlay").onclick=function(){document.querySelector(".credits").classList.remove("visible"),document.querySelector("#screenoverlay").classList.remove("visible"),document.querySelector("#creditsbutton").classList.remove("selected")}})},{"./LevelController.js":5}]},{},[13]);
//# sourceMappingURL=bundle.min.js.map
